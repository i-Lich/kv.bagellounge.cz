(window.webpackJsonpjStore=window.webpackJsonpjStore||[]).push([[1],[,,,,,function(t,s,o){var n,i;n=[o(4),o(2),o(3)],void 0===(i=function(r,a,C){"use strict";var e=r.View.extend({popup:null,pageName:"",showInPopUp:!1,returnUrl:"#!/",formPrefix:"",formFields:{},getFormFieldsValues:function(e){var r=this,s={};return e=e||this.formFields,C.each(e,function(e){var t=e.fieldName?e.fieldName:e.name;s[t]=r.getFormFieldValue(e)}),s},getFormFieldValue:function(e){var t=this,r=null,s="";switch("string"==typeof e&&(e=this.formFields[e]),e.type){case"text":case"email":case"passwordRepeat":(r=t.$el.find('[name="'+e.name+'"]')).length&&(s=r.val().trim());break;case"integer":(r=t.$el.find('[name="'+e.name+'"]')).length&&(s=r.val().trim().replace(/[^\d]/g,""));break;case"option":((r=t.$el.find('[name="'+e.name+'"][type="option"]:checked')).length||(r=t.$el.find('[name="'+e.name+'"][type="hidden"]')).length)&&(s=r.val().trim());break;case"deliveryType":if((r=t.$el.find('[name="'+e.name+'"][type="radio"]:checked')).length)s=r.val().trim();else{var o=jStoreApp.restaurant.get("canReceiveDelivery"),a=jStoreApp.restaurant.get("canReceiveTakeAway");o&&!a?s="delivery":!o&&a&&(s="takeaway")}break;case"paymentType":var n=jStoreApp.restaurant.get("paymentTypesActive"),i="";1!==(r=t.$el.find('[name="'+e.name+'"][type="radio"]:checked')).length&&(r=t.$el.find('[name="'+e.name+'"][type="hidden"]')),s=null,r.length&&(i=r.val().trim(),C.each(n,function(e){i===e.code&&(s=e)}));break;case"paymentTypeSum":var l=this.getFormFieldValue("payment_type");if(l){var p=t.$el.find('[name="payment_type_'+l.code+'_sum"]');if(1===p.length){var c=p.val().replace(/[^\d]/g,"").trim();s=c.length?jStoreApp.parseFloat(c):0}else s=0}break;case"terminal":(r=t.$el.find('[name="'+e.name+'"]')).length?s=r.val().trim():1===jStoreApp.restaurant.getTerminalsCount()&&(s=jStoreApp.restaurant.getTerminals()[0].id);break;case"phone":1===(r=t.$el.find('[name="'+e.name+'"]')).length&&r.val()&&(s="+"+r.val().replace(/[^\d]/g,""));break;case"dateDelivery":if(r=t.$el.find('[name="'+e.name+'"]'),s=null,r.length){var d=r.is("select")?r.val():r.data("time"),u=jStoreApp.DateNow();if(d&&r.val()){var m=jStoreApp.DateNow();u.setTime(d),m<u&&(s=jStoreApp.formatDateTime(u))}}break;case"delivery_city":if((r=t.$el.find('[name="'+e.name+'"]')).length){var g=jStoreApp.DeliveryCities.get(r.val());g&&(s=g.get("id"))}break;case"post_code_city":if((r=t.$el.find('[name="'+e.name+'"]')).length&&"string"==typeof(s=r.val())){var h=s.split(","),f=h[0].trim(),v=h[1].trim(),y=h[5].trim(),j=h[6].trim();s=j+", "+y+", "+f+(v?", "+v:"")}break;case"post_code_city_id":var _=this.getFormFieldValue("post_code_city");if(s=null,_.length&&"string"==typeof _){var S=_.split(",")[5].trim();jStoreApp.DeliveryCities.each(function(e){return e.get("name")!==S||(s=e.get("kladrId"),!1)})}break;case"post_code_city_name":var b=this.getFormFieldValue("post_code_city");if(s=null,b.length&&"string"==typeof b){var A=b.split(",")[5].trim();jStoreApp.DeliveryCities.each(function(e){return e.get("name")!==A||(s=e.get("name"),!1)})}break;case"street":if(r=t.$el.find('[name="'+e.name+'"]'),s="",r.length){var w=r.kladr("current");s=w?"Улица"===w.type?w.name:w.name+" "+w.type.toLowerCase():r.val()}break;case"street_kladr_current":if(r=t.$el.find('[name="'+e.name+'"]'),s=null,r.length){var k=r.kladr("current");k&&(s=k)}break;case"bonusPay":r=t.$el.find('[name="'+e.name+'"][type="checkbox"]:checked'),s=1===r.length&&"Y"===r.val()?"Y":"N";break;case"userAgreement":case"userAgreementRegister":r=t.$el.find('[name="'+e.name+'"][type="checkbox"]:checked'),s=1===r.length&&"Y"===r.val()?"Y":"N";break;case"marketing_source":r=t.$el.find('[name="'+e.name+'"]');var x=jStoreApp.restaurant.getUtmMarketing();x?s=x:r.length&&(s=r.val().trim())}return!s&&t.formPrefix&&void 0!==window.jStoreAppConfig.formData[t.formPrefix]&&void 0!==window.jStoreAppConfig.formData[t.formPrefix][e.name]&&(s=window.jStoreAppConfig.formData[t.formPrefix][e.name]),s},validateFormFields:function(e){var t=this,r=!1;return this.$(".lsp-form-success-mess-common-cont").slideUp(),this.$(".lsp-form-error-mess-common-cont").slideUp(),C.each(e||this.formFields,function(e){t.validateFormField(e)||(r=!0)}),!r},validateFormField:function(e){var t=this,r=t.checkFormField(e);return 0!==r.errorMessage.length?(t.$(".lsp-js-form-field-"+e.name).addClass("has-error"),t.$(".lsp-js-form-field-"+e.name+" .lsp-form-error-mess").html(r.errorMessage),t.$(".lsp-js-form-field-"+e.name+" .lsp-form-error-mess-cont").slideDown(),!1):(t.$(".lsp-js-form-field-"+e.name+" .lsp-form-error-mess-cont").slideUp(),t.$(".lsp-js-form-field-"+e.name).removeClass("has-error"),!0)},checkFormField:function(e){var t="",r=this.getFormFieldValue(e);if(this.formFieldRequired(e)&&!r)t=jStoreApp.t("required");else if(r)switch(e.validateType){case"text":var s=""+r;e.maxLength&&s.length>e.maxLength&&(t=jStoreApp.t("field_is_long",{len:e.maxLength}));break;case"email":60<r.length&&(t=jStoreApp.t("field_is_long",{len:60})),/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i.test(r)||(t=jStoreApp.t("email_not_valid"));break;case"phone":jStoreApp.restaurant.checkPhoneFormat(r)||(t=jStoreApp.t("phone_is_incorrect"));break;case"userAgreement":!0===jStoreApp.restaurant.needUserAgrement()&&"N"===r&&(t=jStoreApp.t("need_"+e.type+"_confirm"));break;case"paymentType":if("CASH"===r.code&&this.getFormFieldValue("payment_type_CASH_sum"))this.getFormFieldValue("payment_type_CASH_sum")<jStoreApp.cart.getSumForPay()&&(t=jStoreApp.t("pyment_sum_is_to_low"))}return{status:!(0<t.length),fieldValue:r,errorMessage:t}},formFieldRequired:function(e){return!!e.required},validateFormAnswer:function(e){var r=this;if(!1!==e.success)return!0;var s=r.$(".lsp-form-error-common-mess"),o=r.$(".lsp-form-error-mess-common-cont");if(Array.isArray(e.validationErrors)&&1<=e.validationErrors.length)C.each(e.validationErrors,function(e){var t=r.$(".lsp-js-form-field-"+e.propertyName);t.length?(t.find(".lsp-form-error-mess").html(e.error),t.find(".lsp-form-error-mess-cont").slideDown()):(s.html(e.error),o.slideDown())});else{var t="";t=e.error?e.error:jStoreApp.t("common_error"),s.html(t),o.slideDown()}return!1},onChangeFormFieldIntervals:{},onChangeFormField:function(e){var r=this,s=a(e.currentTarget).attr("name");s?C.each(this.formFields,function(t){if(t.name===s){var e=t.name+"_"+t.modelField;r.onChangeFormFieldIntervals[e]&&clearTimeout(r.onChangeFormFieldIntervals[e]),r.onChangeFormFieldIntervals[e]=setTimeout(function(){var e=r.checkFormField(t);!0===e.status&&r.model.get(t.modelField)!==e.fieldValue&&r.model.set(t.modelField,e.fieldValue),r.validateFormField(t)},300)}}):jStoreApp.error(["changed field has no name attr",e])},onChangeModelField:function(e){var t=this.$('[name="'+e.name+'"]');this.getFormFieldValue(e)!==this.model.get(e.modelField)&&t.val(this.model.get(e.modelField)).trigger("change")},showSuccessMessage:function(e){this.$(".lsp-form-success-common-mess").html(e),this.$(".lsp-form-error-mess-common-cont").slideUp(),this.$(".lsp-form-success-mess-common-cont").slideDown()},showErrorMessage:function(e){this.$(".lsp-form-error-common-mess").html(e),this.$(".lsp-form-success-mess-common-cont").slideUp(),this.$(".lsp-form-error-mess-common-cont").slideDown()},idOnInitialize:null,initialize:function(e){var s=this;C.each(this.formFields,function(e,t){!0!==e.required&&(e.required=!1),e.type||(e.type="text"),e.validateType||(e.validateType=e.type),e.name||(e.name=t),void 0===e.modelField&&(e.modelField=t),void 0===e.fieldName&&(e.fieldName=t)}),s.childViews=[],s.idOnInitialize&&this.$el.attr("id",this.idOnInitialize),"BODY"!==s.$el.get(0).tagName&&s.$el.addClass("jstore-tag"),s.initProperties(e),s.choseTemplate(),s.listenTo(jStoreApp.filter,"change:page",this.validateVisibility),s.validateVisibility();function o(e){switch(e){case"order":return"order-page";case"order_success":return"order-page order-success-page";case"order_check":return"order-page order-check-page";case"order_error":return"order-page order-error-page";case"order_success_payment":return"order-page order-success-payment-page";case"order_error_payment":return"order-page order-error-payment-page";case"searchEmpty":case"search":return"search-page";case"personalEdit":return"personal-page profile-edit-page";case"remember_pass":return"personal-page forgot-pass-page";case"register":return"register-page";case"personal":return"personal-page personal-index-page";case"logout":return"logout-page";case"auth":return"auth-page";case"cart":return"cart-page";case"show_item":return"product-page";case"change_category":return"category-page";case"index":return"index-page"}}if(s.listenTo(r.history,"route",function(e,t){s.$el.removeClass(s.$el.attr("data-page"));var r=o(t);s.$el.addClass(r),s.$el.attr("data-page",r)}),r.History.started&&jStoreApp.main&&jStoreApp.main.actualRoute){s.$el.removeClass(s.$el.attr("data-page"));var t=o(jStoreApp.main.actualRoute.page);s.$el.addClass(t),s.$el.attr("data-page",t)}return s},initProperties:function(e){var r=this;C.each(e,function(e,t){void 0!==r[t]&&r[t]!==e&&(r[t]=e)})},_hidden:!1,visible:[],hidden:[],validateVisibility:function(){var r=!1,s=jStoreApp.filter.get("page");s&&C.each([{arr:this.hidden,status:!0},{arr:this.visible,status:!1}],function(t){0<t.arr.length&&(r=!t.status,C.every(t.arr,function(e){return"string"!=typeof e||s.pageName!==e||(r=t.status,!1)}))}),r!==this._hidden&&(this._hidden=r,this._hidden?(this.$el.hide(),this.onBlockHide()):(this.$el.show(),this.render(),this.onBlockShow()))},sliderItem:!0,onBlockHide:function(){this.sliderUse&&this.sliderItem&&0<this.sliderItem.length&&"function"==typeof this.sliderItem.slick&&this.sliderItem.slick("unslick")},onBlockShow:function(){this.sliderUse&&this.sliderItem&&0<this.sliderItem.length&&"function"==typeof this.sliderItem.slick&&(this.$el.addClass("jstore-slider"),this.sliderItem.not(".slick-initialized").slick(this.getSliderConfig()))},parentView:null,lastHash:null,calculateHash:function(){return null},templateHtmlElements:null,templateIfElements:null,templateSrc:null,templateClass:null,render:function(){var r=this,e=this.calculateHash();return!0!==this._hidden&&(null===this.lastHash||this.lastHash!==e)&&(this.lastHash=e,this.removeChildViews(),this.renderProcess.apply(this,arguments),this.templateValueElements=this.$("[data-jstore-value]"),this.templateIfElements=this.$("[data-jstore-if]"),this.templateSrc=this.$("[data-jstore-src]"),this.templateClass=this.$("[data-jstore-class]"),"function"==typeof this.change&&this.change(),"N"!==this.$el.data("render")&&(this.initWidgets(),this.formFields&&this.model&&C.each(this.formFields,function(e,t){if(void 0!==e.modelField&&!1===e.modelField)return!0;r.listenTo(r.model,"change:"+(e.modelField?e.modelField:t),function(){r.onChangeModelField(e)})})),this.onBlockShow(),this)},updateFields:function(s){function o(e){return new Function("with(this) { return "+e+"}").call(s)}this.templateIfElements&&this.templateIfElements.each(function(){var e=a(this);e.toggle(!!o.call(s,e.data("jstore-if")))}),this.templateValueElements&&this.templateValueElements.each(function(){var e=a(this),t=o.call(s,e.data("jstore-value"));e.is("input")?t!==e.val()&&e.val(t):e.html(t)}),this.templateSrc&&this.templateSrc.each(function(){var e=a(this),t=o.call(s,e.data("jstore-src"));t?e.attr("src",t):e.hide()}),this.templateClass&&this.templateClass.each(function(){var r=a(this),e=o.call(s,r.data("jstore-class"));C.each(e,function(e,t){r.toggleClass(t,e)})})},renderProcess:function(){console.error("renderProcess not initialized")},renderTemplate:function(e){this.$el.html(this.template(e))},search:function(e){location.hash="!/search/"+e},initWidgetsDone:function(){},initWidgets:function(){function h(e,t){var r=a(e);r.data("hasParent")||(r.data("hasParent",!0),t.call(f,e))}var f=this;n=[o(51),o(53),o(31),o(71),o(75),o(77),o(79),o(41),o(83),o(85),o(89),o(93),o(96)],void 0===(i=function(r,s,o,a,n,i,l,p,c,d,u,m,g){f.$el.find(".jstore-block-search").each(function(e,t){h(t,function(e){var t=new g({el:e,parentView:f});t.render(),this.childViews.push(t)})}),f.$el.find(".lsp-block-userinfo").each(function(e,t){h(t,function(){var e=new r({model:window.jStoreApp.user,el:t,parentView:f});e.render(),f.childViews.push(e)})}),f.$el.find(".lsp-block-restinfo").each(function(e,t){h(t,function(){var e=new s({model:window.jStoreApp.restaurant,el:t,parentView:f});e.render(),f.childViews.push(e)})}),f.$el.find(".lsp-block-terminalinfo").each(function(e,t){h(t,function(){var e=new u({el:t,parentView:f});e.render(),f.childViews.push(e)})}),f.$el.find(".lsp-block-cart").each(function(e,t){h(t,function(){var e=new o({collection:window.jStoreApp.cart,el:t,parentView:f});e.render(),f.childViews.push(e)})}),jStoreApp.restaurant.canPayDiscount()&&(f.$el.find(".lsp-block-gift").each(function(e,t){h(t,function(){var e=new a({el:t,parentView:f});e.render(),f.childViews.push(e)})}),f.$el.find(".lsp-block-happy-hour").each(function(e,t){h(t,function(){var e=new i({el:t,model:window.jStoreApp.HappyHour,parentView:f});e.render(),f.childViews.push(e)})})),f.$el.find(".lsp-block-menu-tree").each(function(e,t){h(t,function(){var e=new n({el:t,model:window.jStoreApp.tree,parentView:f});e.render(),f.childViews.push(e)})}),f.$el.find(".lsp-block-breadcrumbs").each(function(e,t){h(t,function(){var e=new l({el:t,collection:window.jStoreApp.crumbs,parentView:f});e.render(),f.childViews.push(e)})}),f.$el.find(".lsp-block-items-filter").each(function(e,t){h(t,function(){var e=new p({el:t,parentView:f});e.render(),f.childViews.push(e)})}),f.$el.find(".lsp-block-lastPurchases").each(function(e,t){h(t,function(){var e=new c({el:t,parentView:f});e.render(),f.childViews.push(e)})}),f.$el.find(".lsp-block-recommendation").each(function(e,t){h(t,function(){var e=new d({el:t,parentView:f});e.render(),f.childViews.push(e)})}),f.$el.find(".lsp-js-user-auth").each(function(e,t){h(t,function(){var e=new m({el:t,model:jStoreApp.user,parentView:f});e.render(),f.childViews.push(e)})}),f.initWidgetsDone()}.apply(s,n))||(t.exports=i)},removeChildViews:function(){if(Array.isArray(this.childViews)&&this.childViews.length)for(var e=0;e<this.childViews.length;)if(void 0===this.childViews[e])this.childViews.splice(e,1),e++;else{var t=this.childViews[e];this.childViews.splice(e,1),t.remove()}},remove:function(){return this.removeChildViews(),this.popup&&this.popup.remove(),e.__super__.remove.apply(this,arguments)},template:null,templateProcess:null,templates:["template","templateProcess","templateAuth"],templateType:null,templateDefault:"template is't defined",templateSelectorDefault:null,templateProcessDefault:"template is't defined",templateProcessSelectorDefault:null,templateAuthDefault:"template is't defined",templateAuthSelectorDefault:null,checkTemplateType:function(e){var t=this;if(!e)return!1;var r=e.split("->"),s=r.pop();if(0<r.length&&(!t.parentView||!t.parentView.checkTemplateType(r.join("->"))))return!1;var o=null;return t.$el.attr("id")&&(o=t.templateType+"#"+t.$el.attr("id")),s===t.templateType||s===o},choseTemplate:function(){var s,o=this;return o.templateType&&window.jStoreAppConfig.templates&&C.every(window.jStoreAppConfig.templates,function(e){if(o.checkTemplateType(e.type)){var t=!0,r=!0;if(e.filter&&(e.filter.products&&(t=!1,C.each(e.filter.products,function(e){e===o.model.get("id")&&(t=!0)})),e.filter.categories&&(r=!1,C.each(e.filter.categories,function(e){o.model.inCategory([e])&&(r=!0)}))),t&&r)return s=e,!1}return!0}),void 0!==s&&(s.class&&o.$el.addClass(s.class),C.each(this.templates,function(e){if("string"==typeof s[e]){var t=a(s[e]);1===t.length&&(o[e]=C.template(t.html()))}}),s.properties&&this.initProperties(s.properties)),C.each(this.templates,function(e){var t;o[e]||o.$el.data(e)&&1===(t=a("#"+o.$el.data(e))).length&&(o[e]=C.template(t.html()));if(o.templateType&&o.parentView){var r=e+o.templateType.charAt(0).toUpperCase()+o.templateType.slice(1)+"Child";o.parentView[r]&&(o[e]=C.template(o.parentView[r]))}o[e]||((t=o[e+"SelectorDefault"]?a(o[e+"SelectorDefault"]):[]).length?o[e]=C.template(t.html()):o[e]=C.template(o[e+"Default"]))}),this},getSeoTitle:function(){return""},getSeoDescription:function(){return""},getSeoKeywords:function(){return""},sliderUse:!1,sliderConfig:{},getSliderDefaultConfig:function(){return{autoplay:!0,autoplaySpeed:4e3,prevArrow:'<span class="lsp-slider-prev"><<<</span>',nextArrow:'<span class="lsp-slider-next">>>></span>',lazyLoad:"progressive"}},getSliderConfig:function(){return a.extend(this.getSliderDefaultConfig(),this.sliderConfig)}});return e}.apply(s,n))||(t.exports=i)},function(e,t,r){var s,o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s=[r(2)],void 0===(o=function(l){return(e={version:"2.6",withPrefix:function(e){return"jStore_"+jStoreApp.restaurant.get("id")+"_"+e}}).getItem=function(t,e){var r,s;t=this.withPrefix(t);try{s=localStorage.getItem(t)}catch(e){s=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}(t)}return(s=JSON.parse(s))&&"object"===a(s)&&"string"==typeof s.version&&this.version===s.version&&s.value&&(r=s.value),void 0===e&&(e=""),r||e},e.setItem=function(t,r){t=this.withPrefix(t),r=JSON.stringify({version:this.version,value:r});try{localStorage.setItem(t,r)}catch(e){!function(e,t,r){r=r||{};var s=(r=l.extend(r,{Path:"/"})).expires;if("number"==typeof s&&s){var o=new Date;o.setTime(o.getTime()+1e3*s),s=r.expires=o}s&&s.toUTCString&&(r.expires=s.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var n in r){a+="; "+n;var i=r[n];!0!==i&&(a+="="+i)}a+="; secure",document.cookie=a}(t,r,{expires:1314e3})}},e.getOrderFields=function(e,t){return t=t||"default",this.getItem("orderFields_"+e+"_"+t,!1)},e.setOrderFields=function(e,t,r){return r=r||"default",this.setItem("orderFields_"+t+"_"+r,e),"default"!==r&&this.setItem("orderFields_"+t+"_default",e),!0},e;var e}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(57),r(5),r(2),r(3)],void 0===(o=function(e,t,o,r){var s=null,a=t.extend({view:null,template:null,returnUrl:!1,cont:!1,contInner:!1,fullSize:!1,modal:!1,events:{"click .lsp-js-popup-close":"removeByUser"},idOnInitialize:"lsp-block-popup",templateType:"popupBlock",templateDefault:e,initialize:function(){a.__super__.initialize.apply(this,arguments),this.time=(new Date).getMilliseconds(),this.window=o(window)},keyUp:function(e){27===e.keyCode&&this.removeByUser()},initResize:!0,scroll:function(){var t=this,e=o(window),r=parseInt(e.scrollTop()),s=parseInt(e.outerHeight());t.cont.show(function(){var e=parseInt(t.cont.height());e<s?t.cont.css({top:parseInt(r+(s-e)/2)}):t.initResize&&(t.initResize=!1,t.cont.css({top:r}))})},resize:function(){this.setSize(),this.scroll()},setSize:function(){if(this.fullSize){this.cont.addClass("full-size");var e=parseInt(.9*this.window.width());this.cont.css({width:e,height:parseInt(.9*this.window.height()),"margin-left":-parseInt(e/2)})}},removeView:function(){this.view&&(this.view.popup=null,this.view.remove())},renderProcess:function(e){return this.removeView(),this.view=e,this.initResize=!0,e.render(),this.$el.empty().append(this.template({innerClass:e.$el.attr("id")})),this.cont=this.$(".lsp-js-popup-cont"),this.setSize(),this.contInner=this.$(".lsp-js-popup-inner"),this.contInner.empty().append(e.$el),this.childViews.push(e),(e.popup=this).modal&&this.$(".lsp-js-popup-close.lsp-popup-cross").hide(),o("body").append(this.$el),this.resize(),s&&s!==this&&(s.returnUrl=!1,s.remove()),(s=this).window.bind("scroll",this,this.wScroll),this.window.bind("resize",this,this.wResize),this.window.bind("keyup",this,this.wKeyUp),jStoreApp.attachEvent("popupOpen",[e.pageName,e]),this},wResize:function(e){e.data.resize(e)},wKeyUp:function(e){e.data.keyUp(e)},wScroll:function(e){e.data.scroll(e)},removeByUser:function(){this.modal||this.remove()},remove:function(e){return this.window.off("resize",this.wResize),this.window.off("scroll",this.wScroll),this.window.off("keyup",this.wKeyUp),s=null,jStoreApp.attachEvent("popupClose",[this.view.pageName,this.view]),this.removeView(),"string"==typeof this.returnUrl&&(location.href=this.returnUrl),a.__super__.remove.apply(this,arguments)}});return a.removeAll=function(){s&&s!==this&&(s.returnUrl=!1,s.remove(),s=!1)},a}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(99),r(4),r(2),r(3)],void 0===(o=function(e,t,r,o){return t.Collection.extend({model:e,findId:function(t){var r=!1;return o.each(this.models,function(e){r||e.get("translitirateName")!==t&&e.get("id")!==t||(r=e.get("id"))}),r},getCategoryTextTree:function(e){var t=this.get(e);if(t){var r=[jStoreApp.t("Menu")],s=t.getParents();return s&&o.each(s,function(e){var t=jStoreApp.tree.get(e);t&&r.push(t.get("name"))}),r.push(t.get("name")),r.join("/")}return jStoreApp.t("Menu")}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(87),r(4),r(2),r(3)],void 0===(o=function(e,t,n,i){var r=t.Collection.extend({model:e,initFilter:{},dishTypes:["dish","good"],initialize:function(e,t){var r=this;!0!==t&&r.listenTo(jStoreApp.filter,"change:terminal_id",function(){r.reset(jStoreApp.dbItems.getItems(r.initFilter))})},getItems:function(r){var s=this;r=r||{},r=n.extend({categoryID:!1,searchString:!1,categories:[],tags:null,usePagination:!1,pageItems:21,pageID:1},r);var o=0,a=[];return this.every(function(e){if(!e.isActive())return!0;if(-1===s.dishTypes.indexOf(e.get("type")))return!0;if(r.tags&&r.tags.length){var t=!1;if(i.every(e.get("searchTags"),function(e){return-1==r.tags.indexOf(e)||!(t=!0)}),!t)return!0}return!(!r.categories.length||e.inCategory(r.categories))||(!1!==r.categoryID&&e.get("parentGroup")!==r.categoryID||(!(!r.searchString||new RegExp(jStoreApp.escape(jStoreApp.escape(r.searchString)),"i").test(e.getSearchString()))||(o++,!!(r.usePagination&&r.pageItems*(r.pageID-1)>=o)||(a.push(e),!(r.usePagination&&r.pageItems*r.pageID<=o)))))}),a},getList:function(e){var t=new r(this.getItems(e));return t.initFilter=e,t},findByCode:function(t){var r=!1;return i.each(this.models,function(e){e.get("code")===t&&(r=e)}),r},findId:function(t,r){var s=!1;return i.every(this.models,function(e){return e.get("translitirateName")!==t&&e.get("id")!==t||void 0!==r&&!e.inCategory([r])||(s=e.get("id"),!1)}),s},getByGroupID:function(r){var s=[];return i.each(this.models,function(t){t.get("parentGroups").every(function(e){return e!==r||(s.push({id:t.attributes.id,maxAmount:!1,minAmount:!1,defaultAmount:0,name:t.get("name"),price:t.get("price")}),!1)})}),s}});return r}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(2),r(4),r(3),r(6),r(43)],void 0===(o=function(e,t,a,r,s){return t.Collection.extend({model:s,discountSum:0,availablePayments:[],discountOffers:[],upSaleProducts:[],upSaleProductsCodes:[],lastSendDiscountString:"",initialize:function(){this.discountSum=jStoreApp.parseFloat(r.getItem("discountSum",0)),this.availableFreeProducts=JSON.parse(r.getItem("availableFreeProducts","[]"))},forOrder:function(){var r=[];return this.each(function(e){var t=e.get("dbItem");if(e.get("active")&&0!==e.get("amount")){var o=[];e.eachModifiers(function(e){if(0!==e.get("amount")){var t=e.get("dbModifier"),r={id:t.get("id"),name:t.get("name"),amount:e.get("amount")};t.get("code")&&(r.code=t.get("code"));var s=e.get("group");s&&(r.groupId=s.get("id"),r.groupName=s.get("name")),o.push(r)}}),r.push({id:t.get("id"),name:t.get("name"),code:t.get("code"),amount:e.get("amount"),category:t.get("categoryName"),modifiers:o})}}),r},getByHash:function(t){var r=null;return this.every(function(e){return e.getHash()!==t||(r=e,!1)}),r},getTotal:function(){var t=0,r=0,e=0,s=0,o=0;this.each(function(e){e.get("active")&&(t+=e.get("amount")*e.get("cost"),!0===e.get("dbItem").get("useBalanceForSell")?r++:r+=e.get("amount"))}),"Y"===jStoreApp.order.get("bonusPay")&&(s=jStoreApp.order.get("bonusPaySum")),e=!1===this.discountSum?jStoreApp.cart.getDiscountSum():this.discountSum;var a=jStoreApp.filter.get("pageParams");return a&&a.service&&a.service.productSum&&(o=a.service.productSum),{cost:jStoreApp.fixMath(t),items:r,bonusSum:s,discountSum:e,deliverySum:o}},getDiscountSum:function(){return this.discountSum},hasDiscount:function(t){var r=0;return a.each(this.discountOffers,function(e){e.product.get("code")===t&&(r+=e.discountSum)}),jStoreApp.fixMath(r)},resetCart:function(){this.reset()},inCart:function(t){var r=!1;return this.each(function(e){e.get("dbItem").get("id")===t&&(r=!0)}),r},hasSectionProduct:function(s){var o=!1;return a.each(this.models,function(e){var t=e.get("itemId"),r=jStoreApp.dbItems.get(t);o=r.inCategory([s])||o}),o},upInfo:function(){this.each(function(e){e.upInfo()})},onUpdate:function(){return!0},getSumForPay:function(){var e=this.getTotal(),t=this.getDiscountSum(),r=jStoreApp.order.get("bonusPay"),s=jStoreApp.order.get("bonusPaySum");return"Y"===r&&(e.cost-=s),0<jStoreApp.restaurant.get("loyalitySystem")&&(e.cost-=t),e.cost}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(98),r(4),r(3)],void 0===(o=function(e,t,r){return t.Collection.extend({model:e,getArray:function(){var t=[];return r.each(this.models,function(e){t.push(e.getArray())}),t}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4)],void 0===(o=function(e){return e.Collection.extend({})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(100),r(4),r(3)],void 0===(o=function(e,t,o){return t.Collection.extend({model:e,setup:function(){var e=jStoreApp.filter.get("city_id");return!this.isCity(e)&&0<this.length&&(e=this.at(0).get("id"),jStoreApp.filter.changeCity(e)),o.each(this.models,function(e){e.checkActive()}),this},getJson:function(e){return{id:e.get("id"),name:e.get("name"),address:e.get("address"),active:e.get("active")}},getList:function(e){var r=this,s=[];return e?o.each(e,function(e){var t=r.get(e);t&&s.push(r.getJson(t))}):o.each(this.models,function(e){s.push(r.getJson(e))}),s},isCity:function(e){return!("string"!=typeof e||!this.get(e))},getActiveCity:function(){var t={};return o.every(this.models,function(e){return!e.get("active")||!(t={id:e.get("id"),name:e.get("name"),address:e.get("address"),active:e.get("active")})}),t}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(2),r(4),r(6)],void 0===(o=function(e,t,r){return t.Model.extend({defaults:{name:"",showName:"",surName:"",phone:"",email:"",cardNumber:"",wallets:!1,canHaveBonuses:!1,authorized:!1},initialize:function(e){if(!e){var t=JSON.parse(r.getItem("User","{}"));t=this.prepareFields(t),this.set(t),this.upAnalytics()}this.upCanHaveBonuses(),this.set("urlPersonal",jStoreApp.restaurant.documentRoot()+"#!/personal"),this.set("urlRegister",jStoreApp.restaurant.documentRoot()+"#!/register"),this.set("urlLogOut",jStoreApp.restaurant.documentRoot()+"#!/logout"),this.set("urlLogIn",jStoreApp.restaurant.documentRoot()+"#!/auth"),this.set("urlRememberPass",jStoreApp.restaurant.documentRoot()+"#!/rememberPass"),this.set("urlPersonal",jStoreApp.restaurant.documentRoot()+"#!/personal"),this.set("urlPersonalEdit",jStoreApp.restaurant.documentRoot()+"#!/personal/edit"),jStoreApp.restaurant.on("change:canPayDiscount",this.upCanHaveBonuses,this),this.on("change:authorized",this.upCanHaveBonuses,this)},upAnalytics:function(){this.get("authorized")&&jStoreApp.ga("set","&uid",this.get("phone"))},upBonusesCountProcess:!1,upBonusesCount:function(){var t=this;this.canHaveBonuses()&&!t.upBonusesCountProcess&&(t.upBonusesCountProcess=!0,e.ajax({url:jStoreApp.restaurant.getUrl("UserBonuses"),data:{id:jStoreApp.restaurant.get("id"),customerId:this.get("id"),lang:window.jStoreAppConfig.lang},success:function(e){e&&e.success&&t.set("wallets",e.customerLoyality.wallets),t.upBonusesCountProcess=!1},error:function(){t.upBonusesCountProcess=!1,t.set("wallets",!1)}}))},upData:function(e){r.setItem("User",JSON.stringify(e)),e=this.prepareFields(e),this.set(e),this.upAnalytics()},getName:function(){return this.get("name")},getPhone:function(){return this.get("phone")},getId:function(){return this.get("authorized")?this.get("id"):null},getEmail:function(){return this.get("email")},getCardNumber:function(){return this.get("cardNumber")},upCanHaveBonuses:function(){this.get("authorized")&&!1===this.get("wallets")&&(this.set("canHaveBonuses",jStoreApp.restaurant.canPayDiscount()),this.upBonusesCount())},canHaveBonuses:function(){return this.get("canHaveBonuses")},getWallets:function(){return this.get("wallets")},setMarketingSource:function(e){this.set("orderMarketingSource",e)},getMarketingSource:function(){return this.get("orderMarketingSource")},prepareFields:function(e){return(e=e||{}).showName="",e.name?e.showName=e.name+(e.surName?" "+e.surName:""):e.email?e.showName=e.mail:e.phone&&(e.showName=e.phone),e.phone&&(e.orderPhone=e.phone),e.cardNumber||(e.cardNumber=""),e.id||(e.id=jStoreApp.uuid()),e.wallets=!1,e},logout:function(){this.upData(this.defaults)},isAuthorised:function(){return this.get("authorized")},toPersonal:function(){location.href=this.get("urlPersonal")},toLogIn:function(){location.href=this.get("urlLogIn")}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4),r(6),r(3)],void 0===(o=function(e,n,s){return e.Model.extend({defaults:{category_id:"",item_id:"",city_id:"",terminal_id:"",city_default:!0,terminal_default:!0,page:null,popup:!1,discounts:0,tags:[],pageParams:!1},initialize:function(){var e="string"==typeof n.getItem("city_id","")?n.getItem("city_id",""):"",t="string"==typeof n.getItem("terminal_id","")?n.getItem("terminal_id",""):"",r=e.length<=0,s=t.length<=0;if(window.jStoreAppConfig.terminalId&&(t=window.jStoreAppConfig.terminalId),window.jStoreAppConfig.cityId&&(e=window.jStoreAppConfig.cityId),!t.length){var o=window.jStoreApp.restaurant.get("terminalIikoId");"string"==typeof o&&o.length&&(t=o)}if(!e.length){var a=window.jStoreApp.restaurant.get("cityId");"string"==typeof a&&a.length&&(e=a)}this.set("city_id",e),this.set("terminal_id",t),this.set("city_default",r),this.set("terminal_default",s),this.bind("change:category_id",this.changeSection,this)},changeSection:function(){this.set("tags",[],{silent:!0}),jStoreApp.attachEvent("categoryIdChanged",this.attributes)},changeCity:function(r,e,t){e=void 0!==e&&e,t=void 0===t?"default":t;var s=this,o=!1;jStoreApp.DeliveryTerminals.every(function(e){var t=e.get("cities");return!Array.isArray(t)||-1===t.indexOf(r)||(o=e.id,s.get("terminal_id")!==e.id)}),o&&(e||s.get("terminal_id")!==o)&&s.changeTerminal(o,e,t),e&&n.setItem("city_id",r);var a={};this.get("city_default")!==!e&&(a.city_default=!e),this.get("city_source")!==t&&(a.city_source=t),this.get("city_id")!==r&&(a.city_id=r),s.set(a),jStoreApp.attachEvent("cityIdChanged",s.attributes)},changeTerminal:function(e,t,r){r=void 0===r?"default":r,(t=void 0!==t&&t)&&n.setItem("terminal_id",e);var s={};this.get("terminal_default")!==!t&&(s.terminal_default=!t),this.get("terminal_source")!==r&&(s.terminal_source=r),this.get("terminal_id")!==e&&(s.terminal_id=e),this.set(s),jStoreApp.attachEvent("terminalIdChanged",this.attributes)},hasTag:function(t){var r=!1;return s.each(this.get("tags"),function(e){e===t&&(r=!0)}),r}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4),r(3)],void 0===(o=function(e,n){return e.Model.extend({defaults:{specialOfferProductCode:"",offer:null,discount:0,specialOfferPrice:0,endDate:"",isTime:!1},init:function(e){var t=this;if(!e||!e.specialOfferProductCode)return jStoreApp.console("specialOfferProductCode for HappyHour is not set"),this;var r=jStoreApp.dbItems.findByCode(e.specialOfferProductCode);if(!r)return jStoreApp.console("Product for HappyHour not found"),this;var s=r.getOffer();if(r){var o,a=s.get("price"),n=jStoreApp.parseFloat(e.specialOfferPrice);e.endDate?o=jStoreApp.StringToDate(e.endDate):((o=jStoreApp.DateNow()).setMinutes(0),o.setHours(o.getHours()+1)),this.set({specialOfferProductCode:e.specialOfferProductCode,offer:s,discount:a-n,specialOfferPrice:n,endDate:o,isTime:o>jStoreApp.DateNow()}),setTimeout(function(){t.timeEnd()},o.getTime()-jStoreApp.DateNow().getTime())}return this},timeEnd:function(){this.set("isTime",!1)},isActive:function(){var r=!0,t=this.get("offer");if(!t)return!1;n.each(jStoreApp.cart.models,function(e){e.get("dbItem").get("id")===t.get("dbItem").get("id")&&(r=!1)});var s=t.get("dbItem").get("id");return n.every(jStoreApp.cart.availableFreeProducts,function(e){var t=jStoreApp.dbItems.findByCode(e.productCode);return!t||t.get("id")!==s||(r=!1)}),!!this.get("isTime")&&r},isTime:function(){var t=!1,e=this.get("offer");if(!e)return!1;var r=e.get("dbItem");return jStoreApp.cart.each(function(e){e.get("dbItem").get("id")===r.get("id")&&(t=!0)}),!!this.get("isTime")&&t},getProductId:function(){var e=this.get("offer");return!!e&&e.get("dbItem").get("id")},initialize:function(){var a=this;jStoreApp.addEvent(["onDiscountResponseTreatment",this,function(e){var t=a.getProductId(),r=!1;if(n.each(e,function(e){e.product&&t===e.product.get("id")&&(r=!0)}),!r&&a.isTime()){var s=jStoreApp.cart.getByHash(this.get("offer").getHash()),o=s?s.get("amount"):1;e.push({product:a.get("offer").get("dbItem"),discountSum:o*a.get("discount")})}}])}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4),r(3)],void 0===(o=function(e,i){return e.Model.extend({getPaymentTypes:function(){return[]},defaults:{city_id:null,terminal_id:null,name:"",phone:"",email:"",payment_type:null,delivery_type:"delivery",delivery_city:null,delivery_street:"",delivery_street_kladr_current:"",cardNumber:"",home:"",housing:"",apartment:"",entrance:"",floor:"",doorphone:"",date:"",date_delivery:"",date_takeaway:"",message:"",userAgreement:"N",bonusPay:"N",bonusPaySum:0,coupon:""},initialize:function(){this.newOrderId=jStoreApp.uuid()},storage:null,setEnvironment:function(e,r,s,t){var o=this;o.storage=e;var a=o.storage.getItem("order_fields");!1!==a&&""!==a||(a={}),a.bonusPay="N",a.userAgreement="N",o.storage.getItem("bonusPaySum")&&(a.bonusPaySum=o.storage.getItem("bonusPaySum"));var n=t.get("paymentTypesActive");!a.payment_type&&n.length&&(a.payment_type=n[0]),a.delivery_type=a.delivery_type?a.delivery_type:"delivery",t.get("canReceiveDelivery")||"delivery"!==a.delivery_type||(a.delivery_type="takeaway"),o.set(a),["phone","email","name","cardNumber"].every(function(e){function t(){""===o.get(e)&&!0===s.get("authorized")&&s.get(e)&&o.set(e,s.get(e))}return s.on("change:"+e,t),t(),!0}),this.on("change:delivery_type",function(e,t){r.set("terminal_set_in_order","takeaway"===t),r.set("city_set_in_order","delivery"===t)}),this.on("change:delivery_city",function(e,t){var r={},s=!1;i.each(["delivery_street","home","apartment","housing","entrance","floor","doorphone"],function(e){""!==o.get(e)&&(r[e]="",s=!0)}),s&&this.set(r)}),r.on("change:city_id",function(){var e=jStoreApp.DeliveryCities.getActiveCity();e.id!==o.get("city_id")&&o.set("delivery_city",e.id)},o),r.on("change:terminal_id",function(){o.storage.getItem("terminal_id")!==o.get("terminal_id")&&o.set("terminal_id",o.storage.getItem("terminal_id"))},o),o.on("change:terminal_id",function(e,t){r.changeTerminal(t,!0,"order")})},getFieldsValues:function(){return i.clone(this.attributes)},saveFields:function(){if(this.storage){var e=this.getFieldsValues();e.date_delivery="",e.date_takeaway="",e.coupon="",this.storage.setItem("order_fields",e)}}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(25),r(101),r(103),r(44),r(105),r(109),r(112),r(46),r(119),r(125),r(127),r(129),r(131),r(36),r(7),r(47),r(8),r(139),r(4),r(2),r(3),r(6)],void 0===(o=function(l,p,t,r,e,s,o,a,n,i,c,d,u,m,g,h,f,v,y,j,_,S){return y.Router.extend({actualRoute:{},execute:function(e,t,r){var s={};switch(r){case"searchEmpty":r="search",s={search:"",pageID:parseInt(t[0])?parseInt(t[0]):1};break;case"search":s={search:t[0],pageID:parseInt(t[1])?parseInt(t[1]):1}}this.actualRoute={page:r,arguments:s},e&&e.apply(this,t)},routes:{"!/order":"order","!/order/success/:id":"order_success","!/order/success":"order_success","!/order/check/:id":"order_check","!/order/error":"order_error","!/successPayment/:id":"order_success_payment","!/failPayment/:id":"order_error_payment","!/search/page-:pageID":"searchEmpty","!/search/:search/page-:pageID":"search","!/search/:search":"search","!/search/":"searchEmpty","!/search":"searchEmpty","!/personal/edit":"personalEdit","!/rememberPass":"remember_pass","!/register":"register","!/personal":"personal","!/logout":"logout","!/auth":"auth","!/cart":"cart","!/page-:pageID":"index","!/category/:categoryID/page-:pageID/:itemID":"show_item","!/category/:categoryID/page-:pageID":"change_category","!/category/:categoryID(/page-:pageID)/:itemID":"show_item","!/category/:categoryID(/page-:pageID)":"change_category","!/:categoryID/page-:pageID/:itemID":"show_item","!/:categoryID/page-:pageID":"change_category","!/:categoryID(/page-:pageID)/:itemID":"show_item","!/:categoryID(/page-:pageID)":"change_category","!/":"index","*path":"index"},searchEmpty:function(e){this.search("",e)},search:function(e,t){t=parseInt(t)?parseInt(t):1,e=e||"";var r=jStoreApp.filter.get("page");if(r&&"search"===r.pageName)return r.pageID=t,r.searchString=e,r.renderProducts(),!0;jStoreApp.filter.set("pageID",t),jStoreApp.filter.set("item_id",!1),jStoreApp.filter.set("category_id",!1),jStoreApp.ga("send","event",{eventCategory:"Menu",eventAction:"view"});var s=new v({searchString:e,pageID:t});jStoreApp.changePage(s,[{url:jStoreApp.restaurant.documentRoot()+"#!/search/"+e,title:jStoreApp.t("Search")}])},index:function(e){var t;(e=parseInt(e)?parseInt(e):1,window.jStoreAppConfig.defaultCategory)?this.change_category(window.jStoreAppConfig.defaultCategory):(jStoreApp.filter.set("pageID",e),jStoreApp.filter.set("category_id",!1),t=2===jStoreApp.restaurant.get("paginationType")?new h({model:jStoreApp.tree,detailLink:!1,setSeoData:!1,rootSection:"",className:"jstore-page-category-root",analyticsUse:!0,showTags:!0,tagsKey:"index"}):new m({model:jStoreApp.dbItems.getList({}),usePagination:!0,paginationType:jStoreApp.restaurant.get("paginationType"),pageItems:jStoreApp.restaurant.get("pageSize"),pageID:e,className:"jstore-page-category-root",detailLink:!1,setSeoData:!1,rootSection:"",analyticsUse:!0,analyticsList:jStoreApp.t("Menu"),title:!0,showTags:!0,tagsKey:"index"}),jStoreApp.ga("send","event",{eventCategory:"Menu",eventAction:"view"}),jStoreApp.changePage(t,[]))},change_category:function(e,t){t=parseInt(t)?parseInt(t):1,e=jStoreApp.tree.findId(decodeURIComponent(e)),jStoreApp.filter.set("pageID",t),jStoreApp.filter.set("item_id",!1);var r=jStoreApp.tree.get(e);if(e&&r){var s;jStoreApp.filter.set("category_id",e),jStoreApp.ga("send","event",{eventCategory:"Menu",eventAction:"view"});var o="jstore-page-category-"+r.get("translitirateName");r.getParents().every(function(e){var t=jStoreApp.tree.get(e);o+=" jstore-page-category-"+t.get("translitirateName")}),s=2===jStoreApp.restaurant.get("paginationType")?new h({model:new f([r.attributes]),detailLink:!0,setSeoData:!0,categoryID:e,analyticsUse:!0,className:o,showTags:!0,tagsKey:e}):new m({section:r,model:jStoreApp.dbItems.getList({categories:[e]}),usePagination:!0,paginationType:jStoreApp.restaurant.get("paginationType"),paginationUrlTemplate:r.getUrlPagination(),pagination:!0,pageItems:jStoreApp.restaurant.get("pageSize"),pageID:t,className:o,title:!0,showDescription:!0,detailLink:!0,setSeoData:!0,analyticsUse:!0,analyticsList:jStoreApp.t("Menu"),showSeoText:!0,showTags:!0,tagsKey:e}),jStoreApp.changePage(s,r.getTreeChain(),{categoryID:r})}else this.index()},show_item:function(e,t,r){if(t=parseInt(t)?parseInt(t):1,r=decodeURIComponent(r),e=decodeURIComponent(e),e=jStoreApp.tree.findId(e),r=jStoreApp.dbItems.findId(r,e),jStoreApp.filter.set("pageID",t),r&&e){var s=jStoreApp.dbItems.get(r),o=jStoreApp.tree.get(e);if(void 0!==s&&void 0!==o){var a="jstore-item-category-"+o.get("translitirateName");o.getParents().every(function(e){var t=jStoreApp.tree.get(e);a+=" jstore-item-category-"+t.get("translitirateName")}),a+=" jstore-item-"+s.get("translitirateName"),jStoreApp.filter.set("item_id",r);var n=null;if(n=!0===jStoreApp.restaurant.get("dedicatedPageForProduct")?new p({model:s,className:a}):(jStoreApp.filter.get("category_id")!=e&&this.change_category(e,t),new l({model:s,className:a,setSeoData:!0,isPage:!0,returnUrl:s.GetCategoryUrl(),showInPopUp:!0})),o){var i=o.getTreeChain();i.push(s.getTreeChain())}jStoreApp.changePage(n,i)}}else this.index()},order:function(){jStoreApp.filter.set("category_id",!1),jStoreApp.filter.set("item_id",!1),jStoreApp.ga("ec:setAction","checkout",{step:2}),jStoreApp.changePage(new n({model:jStoreApp.order,rest:jStoreApp.restaurant}),[{url:jStoreApp.restaurant.documentRoot()+"#!/order",title:jStoreApp.t("Place_order")}])},order_success:function(e){var t=new i({order_id:e,register_ga:!0});jStoreApp.changePage(t,[{url:jStoreApp.restaurant.documentRoot()+(e?"#!/check/"+e:"#!/success"),title:jStoreApp.t("Order_success")}])},order_error:function(){jStoreApp.changePage(new c,[{url:jStoreApp.restaurant.documentRoot()+"#!/error",title:jStoreApp.t("Order_error")}])},order_check:function(e){jStoreApp.filter.set("category_id",!1),jStoreApp.filter.set("item_id",!1),jStoreApp.changePage(new a({order_id:e}),[{url:jStoreApp.restaurant.documentRoot()+"#!/check/"+e,title:jStoreApp.t("Order_info")}])},order_success_payment:function(e){location.href=jStoreApp.restaurant.documentRoot()+"#!/order/check/"+e},order_error_payment:function(e){jStoreApp.filter.set("category_id",!1),jStoreApp.filter.set("item_id",!1),jStoreApp.changePage(new d({order_id:e}),[{url:jStoreApp.restaurant.documentRoot()+"#!/failPayment/"+e,title:jStoreApp.t("Order_error")}])},auth:function(){jStoreApp.filter.set("category_id",!1),jStoreApp.filter.set("item_id",!1);var e=new r({model:jStoreApp.user});jStoreApp.user.isAuthorised()?jStoreApp.user.toPersonal():jStoreApp.changePage(e,[{url:jStoreApp.restaurant.documentRoot()+"#!/auth",title:jStoreApp.t("Auth")}])},register:function(){jStoreApp.filter.set("category_id",!1),jStoreApp.filter.set("item_id",!1);var e=new t({model:jStoreApp.user});jStoreApp.changePage(e,[{url:jStoreApp.restaurant.documentRoot()+"#!/register",title:jStoreApp.t("Registration")}])},logout:function(){jStoreApp.user.logout(),this.index()},personal:function(){jStoreApp.user.isAuthorised()?(jStoreApp.filter.set("category_id",!1),jStoreApp.filter.set("item_id",!1),jStoreApp.changePage(new e({model:jStoreApp.user}),[{url:jStoreApp.restaurant.documentRoot()+"#!/personal",title:jStoreApp.t("Personal")}])):jStoreApp.user.toLogIn()},personalEdit:function(){jStoreApp.user.isAuthorised()?(jStoreApp.filter.set("category_id",!1),jStoreApp.filter.set("item_id",!1),jStoreApp.changePage(new s({model:jStoreApp.user}),[{url:jStoreApp.restaurant.documentRoot()+"#!/personal",title:jStoreApp.t("Personal")},{url:jStoreApp.restaurant.documentRoot()+"#!/personal/edit",title:jStoreApp.t("Edit")}])):jStoreApp.user.toLogIn()},cart:function(){jStoreApp.ga("ec:setAction","checkout",{step:1}),jStoreApp.ga("send","event",{eventCategory:"Cart",eventAction:"view"}),jStoreApp.changePage(new u({collection:jStoreApp.cart}),[{url:jStoreApp.restaurant.documentRoot()+"#!/cart",title:jStoreApp.t("Cart")}])},remember_pass:function(){jStoreApp.filter.set("category_id",!1),jStoreApp.filter.set("item_id",!1);var e=new o({model:jStoreApp.user});jStoreApp.user.isAuthorised()?jStoreApp.user.toPersonal():jStoreApp.changePage(e,[{url:jStoreApp.restaurant.documentRoot()+"#!/rememberPass",title:jStoreApp.t("Pass_recovery")}])}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(142),r(6),r(4),r(3)],void 0===(o=function(e,t,r,s){return r.Collection.extend({model:e,setup:function(){var e=jStoreApp.filter.get("terminal_id");return!this.isTerminal(e)&&0<this.length&&(e=this.at(0).get("id"),jStoreApp.filter.changeTerminal(e)),s.each(this.models,function(e){e.checkActive()}),this},getList:function(){var t=[];return s.each(this.models,function(e){t.push({id:e.get("id"),name:e.get("name"),address:e.get("address"),cities:e.get("cities"),active:e.get("active")})}),t},getCitiesList:function(){var e=this.getActiveTerminal();return jStoreApp.filter.get("terminal_default")&&e&&e.cities?jStoreApp.DeliveryCities.getList(e.cities):jStoreApp.DeliveryCities.getList()},isTerminal:function(e){return!("string"!=typeof e||!this.get(e))},getActiveTerminal:function(){var t={};return s.every(this.models,function(e){return!e.get("active")||!(t={id:e.get("id"),name:e.get("name"),address:e.get("address"),cities:e.get("cities"),active:e.get("active")})}),t}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4),r(3),r(143),r(6)],void 0===(o=function(e,t,r,i){var l=e.Collection.extend({model:r,key:"tags-global",initialize:function(){var e=this;this.on("change:active",function(){if(e.key){var t=[];e.each(function(e){e.get("active")&&t.push(e.get("id"))}),i.setItem(e.key,t)}})},findTags:function(e){var s=this,r=!!e.categoryID&&e.categoryID,o=new l;o.key="tags-"+(e.key?e.key:"");var a=i.getItem(o.key,[]);if(o.push({id:"all",translitName:"all",className:"lsp-block-tags-filter-item lsp-js-tag-select lsp-block-tags-filter-all",name:jStoreApp.t("All"),active:-1!==a.indexOf("all")||0===a.length}),r)s.each(function(e){if(-1!==e.get("parentGroups").indexOf(r)){var t=e.toJSON();t.active=-1!==a.indexOf(e.get("id")),o.push(t)}});else if(e.searchItems.length){var n=[];e.searchItems.each(function(e){t.each(e.get("tags"),function(e){if(-1===n.indexOf(e.translitName)){n.push(e);var t=s.get(e.translitName);if(t){var r=t.toJSON();r.active=-1!==a.indexOf(t.get("id")),o.push(r)}}})})}return o},getIDs:function(){var t=[];return this.each(function(e){e.get("active")&&"all"!==e.get("id")&&t.push(e.get("id"))}),t},toggleTag:function(t){if("all"===t||1===jStoreApp.restaurant.get("tagsFilterType"))this.each(function(e){return e.set("active",e.get("id")===t,{silent:!0}),!0}),this.trigger("change:active");else{var e=this.get(t);e&&e.set("active",!e.get("active"))}return!0},forTemplate:function(){var t=[];return this.each(function(e){(e=e.attributes).active&&(totalTagActive=!1),t.push({name:e.name,translitName:e.translitName,className:e.className+(e.active?" lsp-block-tags-filter-status-active":"")})}),t}});return l}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4),r(2),r(3),r(6)],void 0===(o=function(e,p,c,s){return e.Model.extend({defaults:{canPayDiscount:!1,paymentIikoNet:!1,paymentTypesActive:!1,useGoogleAnalytics:!1,showGroupModifiersAsToggleButtons:!1,marketingSourceInfo:[],weightedGoodDefaultWeight:1,weightedGoodStep:.1,addressCompleteSystem:0},getCurrent:function(){return this},canPayDiscount:function(){return this.get("canPayDiscount")},showGroupModifiersAsToggleButtons:function(){return this.get("showGroupModifiersAsToggleButtons")},initialize:function(){var t=this,e=t.get("documentRoot"),r=t.get("siteAddress"),s=t.get("id"),o=window.jStoreAppConfig.server.url,a=t.get("paymentTypes"),n=[];c.each(a,function(e){if("INET"===e.code&&t.set("paymentIikoNet",e),0<window.jStoreAppConfig.activePayments.length&&-1===window.jStoreAppConfig.activePayments.indexOf(e.code))return!0;"CARD"!==e.code&&"CASH"!==e.code&&"ECARD"!==e.code&&"POL"!==e.code||n.push(e)}),n.sort(function(e,t){var r="CASH"===e.code?0:1,s="CASH"===t.code?0:1;return window.jStoreAppConfig.activePayments.length&&(r=window.jStoreAppConfig.activePayments.indexOf(e.code),s=window.jStoreAppConfig.activePayments.indexOf(t.code)),r-s});var i=!1;if((!t.get("paymentIikoNet")||1!==this.get("loyalitySystem")&&2!==this.get("loyalitySystem"))&&3!==this.get("loyalitySystem")||(i=!0),t.set("canPayDiscount",i),t.set("paymentTypesActive",n),e="string"==typeof window.jStoreAppConfig.urls.documentRoot?window.jStoreAppConfig.urls.documentRoot:e||"",r="string"==typeof window.jStoreAppConfig.urls.siteAddress?window.jStoreAppConfig.urls.siteAddress:r||"",e&&r)t.set("documentRoot",r+e);else{var l=location.href;location.hash&&(l=l.replace(new RegExp(jStoreApp.escape(location.hash)),"")),t.set("documentRoot",l)}t.set("urls",p.extend({imageDir:"//deliverywigetimages.iiko.ru/Content/User/"+s,CheckCreate:o+"/Orders/CheckCreate/"+s,CalculateLoyalityDiscounts:o+"/Orders/CalculateLoyalityDiscounts/"+s,addOrder:o+"/Orders/AddOrder/"+s,checkOrder:o+"/Orders/Info/"+s,failOrder:o+"/Orders/FailInfo/"+s,UserRegister:o+"/Customer/Register/"+s,UserRememberPass:o+"/Customer/GenerateNewPassord/"+s,UserUpdate:o+"/Customer/Update/"+s,UserAuth:o+"/Customer/Login/"+s,UserOrders:o+"/Orders/History/"+s,UserBonuses:o+"/Customer/CalculateUserBalance",Streets:o+"/Nomenclature/Streets/"+s,clientOrder:e+"#!/order",clientCart:e+"#!/cart"},window.jStoreAppConfig.server),{silent:!0})},needUserAgrement:function(){return!jStoreApp.user.isAuthorised()&&this.get("useUserAgreement")},documentRoot:function(){return this.get("documentRoot")},getUrl:function(e){return this.get("urls")[e]},getTerminals:function(){var t=[],r=!0;return c.each(this.get("deliveryTerminals"),function(e){t.push({id:e.iikoId,name:e.name,checked:r}),r=!1}),t},getTerminalsCount:function(){return this.get("deliveryTerminals").length},getPhoneFormat:function(){var e=parseInt(this.get("abonentPhoneCodeLength")),t="";switch(e<=0&&(e=7),e){case 7:t="999 99 99";break;case 6:t="99 99 99";break;case 5:t="999 99";break;default:t=new Array(1+this.get("cityOrOperatorCodeLength")).join("9")}return("0"!==this.get("phoneCode")?"+":"")+this.get("phoneCode")+" ("+new Array(1+this.get("cityOrOperatorCodeLength")).join("9")+") "+t},checkPhoneFormat:function(e){return e.replace(/[^0-9]/g,"").length===this.getPhoneFormat().replace(/[^0-9]/g,"").length},getUtmMarketing:function(){var t=s.getItem("utm_source",""),e=this.get("marketingSourceInfo"),r=!1;return t&&e.length&&c.every(e,function(e){return e.utmSource!==t||(t=e.id,!(r=!0))}),r?t:""}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(5),r(11),r(10),r(12),r(8),r(9),r(13),r(14),r(15),r(16),r(17),r(18),r(19),r(7),r(20),r(29),r(30),r(35),r(4),r(2),r(6),r(3),r(144),r(40)],void 0===(o=function(e,t,r,s,o,a,n,i,l,p,c,d,u,m,g,h,f,v,y,j,_,S){var b=e.extend({el:"body",elContent:"#lsp-block-content",oldView:!1,initialize:function(){var t=this;b.__super__.initialize.apply(this,arguments),jStoreApp.changePage=function(e){t.changePage(e)},jStoreApp.setSeoData=function(e){t.setSeoData.call(e)}},renderProcess:function(){this.childViews=[],this.elContent=j(this.elContent),(jStoreApp.contentPage=this).elContent&&this.elContent.length&&"N"!==this.elContent.data("render")&&this.elContent.html("")},initWidgetsDone:function(){this.elContent&&this.elContent.length&&"N"!==this.elContent.data("render")&&y.history.start(),jStoreApp.attachEvent("ready")},changePage:function(e,t,r){if(m.removeAll(),jStoreApp.filter.set("terminal_set_in_order",!1),jStoreApp.filter.set("city_set_in_order",!1),t=void 0===t?[]:t,r=void 0===r?{}:r,!1!==jStoreApp.filter.get("pageParams")&&jStoreApp.filter.set("pageParams",!1),e&&(!this.oldView||this.oldView.cid!==e.cid))if(e.showInPopUp)this.oldView||jStoreApp.main.index(),new m({returnUrl:e.returnUrl}).render(e);else{jStoreApp.crumbs.reset(t),e.render(),this.elContent.empty().append(e.$el);var s=this.oldView&&this.oldView.pageName?this.oldView.pageName:"",o=e.pageName?e.pageName:"";if(this.oldView&&this.oldView.cid!==e.cid&&(this.oldView.undelegateEvents(),this.oldView.$el.removeData().unbind(),this.oldView.remove(),jStoreApp.user.off(null,null,this.oldView),jStoreApp.cart.off(null,null,this.oldView),jStoreApp.filter.off(null,null,this.oldView),y.View.prototype.remove.call(this.oldView)),this.oldView=e,jStoreApp.pageParams=r,jStoreApp.filter.set("page",e),!this.elContent||1!==this.elContent.length||"N"===this.elContent.data("render"))return;this.setSeoData.call(e),jStoreApp.attachEvent("pageChanged",[{oldPage:s,newPage:o,pageParams:r}])}},setSeoData:function(){if(this.setSeoData){j("title").html(this.getSeoTitle());var e=j('meta[name="keywords"]');if(0<e.length)e.attr("content",this.getSeoKeywords());else{var t=j("<meta />");t.attr("name","keywords"),t.attr("content",this.getSeoKeywords()),j("head").append(t)}var r=j('meta[name="description"]');if(0<r.length)r.attr("content",this.getSeoDescription());else{var s=j("<meta />");s.attr("name","description"),s.attr("content",this.getSeoDescription()),j("head").append(s)}jStoreApp.ga("send","pageview",{page:location.href,title:this.getSeoTitle()})}}});return b}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4),r(2),r(3)],void 0===(o=function(e,p,d){var u=d.clone(e.Events);u.pageParams={};var o={};return u.addEvent=function(e){var t,r,s=null;3===e.length?(t=e[0],s=e[1],r=e[2]):2===e.length&&(t=e[0],r=e[1]),"function"==typeof r&&(Array.isArray(o[t])||(o[t]=[]),o[t].push({_call:s,_func:r}))},u.attachEvent=function(e,t){var r=[];return t=t||[],o[e]&&d.each(o[e],function(e){r.push(e._func.apply(e._call,t))}),r},u.initEvents=function(e){d.each(e,function(e){u.addEvent(e)}),e.push=u.addEvent},u.StartTime=new Date,u.DateNow=function(){var e=(new Date).getTime()-this.StartTime.getTime(),t=this.restaurant.get("currentTime"),r=this.StringToDate(t);return new Date(r.getTime()+e)},u.StringToDate=function(e){return new Date(parseInt(e.substring(6,10)),parseInt(e.substring(3,5))-1,parseInt(e.substring(0,2)),parseInt(e.substring(11,13)),parseInt(e.substring(14,16)),parseInt(e.substring(17,19)))},u.stringToDate2=function(e){return new Date(parseInt(e.substring(0,4)),parseInt(e.substring(5,7))-1,parseInt(e.substring(8,10)),e.substring(11,13)?parseInt(e.substring(11,13)):0,e.substring(14,16)?parseInt(e.substring(14,16)):0,e.substring(17,19)?parseInt(e.substring(17,19)):0)},u.uuid=function(){var e,t,r="";for(e=0;e<32;e++)t=16*Math.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(r+="-"),r+=(12==e?4:16==e?3&t|8:t).toString(16);return r},u.formatDateTime=function(e){return this.formatDate(e)+" "+this.formatTime(e)},u.formatTime=function(e){var t=e.getHours();t<10&&(t="0"+t);var r=e.getMinutes();r<10&&(r="0"+r);var s=e.getSeconds();return s<10&&(s="0"+s),t+":"+r+":"+s},u.formatDate=function(e){var t=e.getDate();t<10&&(t="0"+t);var r=e.getMonth()+1;return r<10&&(r="0"+r),e.getFullYear()+"-"+r+"-"+t},u.declination=function(e,t){t=t||["rod","solid","im"],1<e&&e<2&&(e=2);var r=(e=parseInt(e))%100;return t[r=!(11<=r&&r<=14)&&(r%=10)<5?2<r?2:r:0]},u.getAllGroups=function(e,s){s=s||1;var o=this,a=[];return d.each(e,function(e){e.level=s;var t=e.customProperties,r={};Array.isArray(t)&&t.every(function(e){return r[e.key]=e.value,!0}),e.properties=r,a.push(e),a=a.concat(o.getAllGroups(e.childs,s+1))}),a},u.fixMath=function(e,t){return void 0===t&&(t=2),Number(e.toFixed(t))},u.parseFloat=function(e){return this.fixMath(parseFloat(e))},u.ecIncluded=!1,u.ga=function(){u.restaurant.get("useGoogleAnalytics")&&"function"==typeof window.ga&&(this.ecIncluded||(window.ga("require","ec"),window.ga("set","&cu","RUB"),this.ecIncluded=!0),window.ga.apply(window.ga,arguments))},u.isGUID=function(e){return new RegExp(/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i).test(e)},u.pagination=function(){p("<ul >")},u.console=function(e){console&&"function"==typeof console.log&&console.log(e)},u.loadCart=function(o,e,a){e.length&&d.each(e,function(e){var t=a.get(e.dbItem);if(t){var r={dbItem:t,amount:e.amount?e.amount:1,initModifiers:e.modifiers};if(e.modifiers&&e.modifiers.length){var s=!0;d.every(e.modifiers,function(e){return!!a.get(e.id)||(s=!1)}),s&&o.push(r)}else o.push(r)}})},u.saveCart=function(e,t){var r=[];e.each(function(e){var t={};e.eachModifiers(function(e){0<e.get("amount")&&(t[e.get("id")]=e.get("amount"))}),r.push({dbItem:e.get("dbItem").get("id"),amount:e.get("amount"),modifiers:t})}),t.setItem("Cart",JSON.stringify(r))},u.lastSendDiscountString="",u.discountFetch=function(t,r,s,o,a){var n=this,e={userName:o.get("name"),userPhone:o.get("phone"),marketingSource:o.get("marketing_source_select")&&"_OTHER_"!==o.get("marketing_source_select")?o.get("marketing_source_select"):o.get("marketing_source"),orderId:o.newOrderId,personsCount:1,coupon:o.get("coupon"),date:!1};if(e.userName||(e.userName=u.t("visitor")),e.date||(e.date=n.DateNow(),e.date.setMinutes(e.date.getMinutes()+60)),e.marketingSource||(e.marketingSource=t.getUtmMarketing()),!1!==e.userPhone&&""!==e.userPhone||""===t.get("emptyCustomerPhone")||(e.userPhone=t.get("emptyCustomerPhone")),t.canPayDiscount()&&!1!==e.userPhone&&""!==e.userPhone){var i={restaraunt:t.get("id"),deliveryTerminalId:o.get("terminal_id")?o.get("terminal_id"):a.get("terminal_id"),coupon:e.coupon,order:{id:e.orderId,phone:e.userPhone,address:{street:"",home:"",apartment:"",housing:"",entrance:"",floor:"",doorphone:"",city:"",cityId:o.get("city_id")?o.get("city_id"):a.get("city_id")},date:!1,items:r.forOrder(),personsCount:e.personsCount,marketingSource:e.marketingSource,isSelfService:"delivery"!==o.get("delivery_type")},customer:{id:s.getId(),name:e.userName,phone:e.userPhone}},l=JSON.stringify(i);0!==n.lastSendDiscountString.localeCompare(l)&&(n.lastSendDiscountString=l,i.order.date=u.formatDateTime(e.date),p.ajax({url:u.restaurant.getUrl("CalculateLoyalityDiscounts"),type:"post",data:{json:JSON.stringify(i),lang:window.jStoreAppConfig.lang},dataType:"json",success:function(e){e&&e.success?n.discountResponseTreatment(e.data,t,r,s,o,a):n.discountResponseTreatment({discountInfo:[],availableFreeProducts:[]},t,r,s,o,a)},error:function(){n.discountResponseTreatment({discountInfo:[],availableFreeProducts:[]},t,r,s,o,a)}}))}else n.discountResponseTreatment({discountInfo:[],availableFreeProducts:[]},t,r,s,o,a)},u.discountResponseTreatment=function(e,t,r,s,o,a){r.availablePayments=[],r.discountOffers=[],r.upSaleProducts=[],r.upSaleProductsCodes=[];var n=[],i=[],l=[],p=[],c=0;3===t.get("loyalitySystem")?(e.loyatyResult&&d.each(e.loyatyResult.programResults,function(e){d.each(e.discounts,function(e){var t;e.orderItemId?t=u.dbItems.get(e.orderItemId):e.productCode&&(t=u.dbItems.findByCode(e.productCode)),t&&(e.discountSum?e.discountSum=parseFloat(e.discountSum):e.discountSum=0,r.discountOffers.push({product:t,discountSum:e.discountSum}))}),d.each(e.upsales,function(e){d.each(e.productCodes,function(e){var t=u.dbItems.findByCode(e);t&&-1===p.indexOf(e)&&(p.push(e),l.push(t))})}),d.each(e.freeProducts,function(e){d.each(e.productCodes,function(e){-1===i.indexOf(e)&&(i.push(e),n.push({productCode:e}))})})}),(s.isAuthorised()||t.get("payByLoyalityWithoutRegistration"))&&e.availablePayments&&d.each(e.availablePayments,function(e){d.each(e.walletInfos,function(e){c+=u.parseFloat(e.maxSum)})})):((s.isAuthorised()||t.get("payByLoyalityWithoutRegistration"))&&(e.maxPaymentSum||(e.maxPaymentSum=0),c=u.parseFloat(e.maxPaymentSum)),d.each(e.discountInfo,function(e){e.details&&e.details.length&&d.each(e.details,function(e){var t=u.dbItems.findByCode(e.productCode);t&&(e.discountSum?e.discountSum=parseFloat(e.discountSum):e.discountSum=0,r.discountOffers.push({product:t,discountSum:e.discountSum}))})}),n=e.availableFreeProducts?e.availableFreeProducts:[]),u.attachEvent("onDiscountResponseTreatment",[r.discountOffers]),r.discountSum=0,d.each(r.discountOffers,function(e){r.discountSum+=e.discountSum}),r.availablePayments=e.availablePayments,r.availableFreeProducts=n,r.upSaleProductsCodes=p,r.upSaleProducts=l,c=u.fixMath(c),u.restaurant.canPayDiscount()?o.get("bonusPaySum")!==c&&o.set("bonusPaySum",c):0!==o.get("bonusPaySum")&&o.set("bonusPaySum",0),jStoreStorage.setItem("bonusPaySum",c),jStoreStorage.setItem("discountSum",r.discountSum),jStoreStorage.setItem("availableFreeProducts",JSON.stringify(r.availableFreeProducts)),a.set("discounts",a.get("discounts")+1)},u.escape=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},u}.apply(t,s))||(e.exports=o)},function(e,t,r){var s={"./base":27,"./base.js":27,"./en":48,"./en.js":48,"./ru":49,"./ru.js":49,"./ua":50,"./ua.js":50};function o(e){var t=a(e);return r(t)}function a(e){if(r.o(s,e))return s[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}o.keys=function(){return Object.keys(s)},o.resolve=a,(e.exports=o).id=24},function(e,t,r){var s,o;s=[r(60),r(33),r(2),r(3)],void 0===(o=function(e,t,r,s){"use strict";var o=t.extend({isPage:!1,needDetail:!1,closeAfterToCartSuccess:!0,templateType:"itemPopUp",templateSelectorDefault:"#lsp-template-item-popup",templateDefault:e,idOnInitialize:"lsp-block-items-popup",initialize:function(){o.__super__.initialize.apply(this,arguments),0<this.offer.get("amount")&&this.offer.setCount(this.offer.get("amount"))},renderProcess:function(){if(o.__super__.renderProcess.apply(this,arguments)){this.isPage&&jStoreApp.setSeoData(this)}},afterToCartFail:function(){},afterToCartSuccess:function(){this.closeAfterToCartSuccess&&this.remove()}});return o}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(2)],void 0===(o=function(k){var x,e=navigator.userAgent,C=/iphone/i.test(e),T=/chrome/i.test(e),I=/android/i.test(e);k.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},k.fn.extend({caret:function(e,t){var r;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((r=this.createTextRange()).collapse(!0),r.moveEnd("character",t),r.moveStart("character",e),r.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),e=0-r.duplicate().moveStart("character",-1e5),t=e+r.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,o){var y,j,_,S,b,A,w;if(!t&&0<this.length){var e=k(this[0]).data(k.mask.dataName);return e?e():void 0}return o=k.extend({autoclear:k.mask.autoclear,placeholder:k.mask.placeholder,completed:null},o),y=k.mask.definitions,j=[],_=A=t.length,S=null,k.each(t.split(""),function(e,t){"?"==t?(A--,_=e):y[t]?(j.push(new RegExp(y[t])),null===S&&(S=j.length-1),e<_&&(b=j.length-1)):j.push(null)}),this.trigger("unmask").each(function(){var n=k(this),l=k.map(t.split(""),function(e,t){if("?"!=e)return y[e]?d(t):e}),r=l.join(""),a=n.val();function p(){if(o.completed){for(var e=S;e<=b;e++)if(j[e]&&l[e]===d(e))return;o.completed.call(n)}}function d(e){return e<o.placeholder.length?o.placeholder.charAt(e):o.placeholder.charAt(0)}function u(e){for(;++e<A&&!j[e];);return e}function m(e,t){var r,s;if(!(e<0)){for(r=e,s=u(t);r<A;r++)if(j[r]){if(!(s<A&&j[r].test(l[s])))break;l[r]=l[s],l[s]=d(s),s=u(s)}f(),n.caret(Math.max(S,e))}}function g(e){v(),n.val()!=a&&n.change()}function h(e,t){var r;for(r=e;r<t&&r<A;r++)j[r]&&(l[r]=d(r))}function f(){n.val(l.join(""))}function s(e){var t=-1;for(i=0,pos=0;i<A;i++)if(j[i]){for(l[i]=d(i);pos++<e.length;)if(c=e.charAt(pos-1),j[i].test(c)){l[i]=c,t=i;break}if(pos>e.length){h(i+1,A);break}}else l[i]===e.charAt(pos)&&pos++,i<_&&(t=i);return t}function v(e){var t=s(n.val());return e?f():t+1<_?o.autoclear||l.join("")===r?(n.val()&&n.val(""),h(0,A)):f():(f(),n.val(n.val().substring(0,t+1))),_?void 0:S}n.data(k.mask.dataName,function(){return k.map(l,function(e,t){return j[t]&&e!=d(t)?e:null}).join("")}),n.one("unmask",function(){n.off(".mask").removeData(k.mask.dataName)}).on("focus.mask",function(){var e;n.prop("readonly")||(clearTimeout(x),a=n.val(),e=v(),x=setTimeout(function(){n.get(0)===document.activeElement&&(f(),e==t.replace("?","").length?n.caret(0,e):n.caret(e))},10))}).on("click.mask",function(){if(!n.prop("readonly")){var e=s(n.val());n.caret().begin>e+1&&n.caret(e+1)}}).on("blur.mask",g).on("keydown.mask",function(e){if(!n.prop("readonly")){var t,r,s,o=e.which||e.keyCode;w=n.val(),8===o||46===o||C&&127===o?(r=(t=n.caret()).begin,(s=t.end)-r==0&&(r=46!==o?function(e){for(;0<=--e&&!j[e];);return e}(r):s=u(r-1),s=46===o?u(s):s),h(r,s),m(r,s-1),e.preventDefault()):13===o?g.call(this,e):27===o&&(n.val(a),n.caret(0,v()),e.preventDefault())}}).on("keypress.mask",function(e){if(!n.prop("readonly")){var t,r,s,o=e.which||e.keyCode,a=n.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||o<32)&&o&&13!==o){if(a.end-a.begin!=0&&(h(a.begin,a.end),m(a.begin,a.end-1)),(t=u(a.begin-1))<A&&(r=String.fromCharCode(o),j[t].test(r))){if(!function(e){var t,r,s,o;for(r=d(t=e);t<A;t++)if(j[t]){if(s=u(t),o=l[t],l[t]=r,!(s<A&&j[s].test(o)))break;r=o}}(t),l[t]=r,f(),s=u(t),I){setTimeout(function(){k.proxy(k.fn.caret,n,s)()},0)}else n.caret(s);a.begin<=b&&p()}e.preventDefault()}}}).on("input.mask paste.mask",function(){n.prop("readonly")||setTimeout(function(){var e=v(!0);n.caret(e),p()},0)}),T&&I&&n.off("input.mask").on("input.mask",function(e){var t=n.val(),r=n.caret();if(w&&w.length&&w.length>t.length){for(v(!0);0<r.begin&&!j[r.begin-1];)r.begin--;if(0===r.begin)for(;r.begin<S&&!j[r.begin];)r.begin++;n.caret(r.begin,r.begin)}else{for(v(!0);r.begin<A&&!j[r.begin];)r.begin++;n.caret(r.begin,r.begin)}p()}),v()})}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4),r(3)],void 0===(o=function(e,o){return e.Model.extend({defaults:{},initialize:function(e){var r=this,s={};Array.isArray(e)||(e=[]),window.jStoreAppConfig.loc&&o.each(window.jStoreAppConfig.loc,function(e,t){s[t]=e});o.each(e,function(e){s[e.key]=e.value}),o.each(s,function(e,t){r.set(t,e)})},t:function(e,t){var r=this.get(e);return void 0!==t&&o.each(t,function(e,t){t="%"+t+"%",r=r.replace(t,e)}),void 0===r?"":r}})}.apply(t,s))||(e.exports=o)},,function(e,t,r){var s,o;s=[r(4),r(3),r(88)],void 0===(o=function(e,r,t){return e.Collection.extend({model:t,initialize:function(e,t){t=t||{},this.bind("change:cost",this.upCost,this),e.every(function(e){return e.group=void 0!==t.group&&t.group,e.name=e.dbModifier.get("name"),e.price=e.dbModifier.get("price"),e.energyAmount=e.dbModifier.get("energyAmount"),e.fatAmount=e.dbModifier.get("fatAmount"),e.fiberAmount=e.dbModifier.get("fiberAmount"),e.carbohydrateAmount=e.dbModifier.get("carbohydrateAmount"),e.weight=e.dbModifier.get("weight"),!0}),this.cost=0},ready:function(){this.upCost()},upCost:function(){var t=0;r.each(this.models,function(e){t+=e.get("cost")}),this.cost=jStoreApp.fixMath(t)},getCost:function(){return this.cost}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(29),r(4),r(3)],void 0===(o=function(n,e,i){return e.Model.extend({defaults:{error:""},childType:"modifier",initialize:function(e){var r=this,s=[];if(e.childModifiers&&e.childModifiers.length)i.each(e.childModifiers,function(e){var t=jStoreApp.dbItems.get(e.modifierId);t&&s.push({id:e.modifierId,dbModifier:t,maxAmount:e.maxAmount,minAmount:e.minAmount,defaultAmount:e.defaultAmount,type:r.childType})});else{var t=jStoreApp.dbItems.getByGroupID(e.modifierId);i.each(t,function(e){var t=jStoreApp.dbItems.get(e.id);t&&(e.type=r.childType,e.dbModifier=t,s.push(e))})}var o=new n(s,{group:this});this.listenTo(o,"change:cost",this.upCost),this.listenTo(o,"change:amount",this.validateModifier),o.ready();var a=jStoreApp.tree.get(e.modifierId);a&&this.set("name",a.get("name")),this.set({id:e.modifierId,childModifiers:o}),this.upCost(),this.afterInitialise()},afterInitialise:function(){},validateModifier:function(){var e=this.getConfig();return e.minAmount>e.amount?(1===e.maxAmount?this.set("error",jStoreApp.t("low_quantity_for_1_elem",{groupName:this.get("name")})):this.set("error",jStoreApp.t("low_quantity")),!1):e.maxAmount<e.amount?(this.set("error",jStoreApp.t("too_much_quantity")),!1):(this.get("error")&&this.set("error",""),!0)},getConfig:function(){return{amount:this.getAmount(),minAmount:this.get("minAmount"),maxAmount:this.get("maxAmount")}},getAmount:function(){var t=0;return i.each(this.get("childModifiers").models,function(e){t+=e.get("amount")?e.get("amount"):0}),t},reduceCount:function(s,o){return i.each(this.get("childModifiers").models,function(e){var t=e.get("amount"),r=e.get("id");0!==s&&0!==t&&r!==o&&(s<=t?(e.set("amount",t-s),s=0):(e.set("amount",s-t),s-=t))}),0===s},upCost:function(){this.set("cost",this.get("childModifiers").getCost())},getCost:function(){return this.get("cost")}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(5),r(2),r(3),r(32),r(70)],void 0===(o=function(e,t,r,s,o){var a=e.extend({templateDefault:o,templateType:"cart",CartItem:s,bonusSum:!1,discountSum:!1,initialize:function(){a.__super__.initialize.apply(this,arguments),this.listenTo(this.collection,"add remove reset",this.render),this.listenTo(this.collection,"change",this.update),this.listenTo(jStoreApp.filter,"change:discounts",this.update),this.listenTo(jStoreApp.filter,"change:pageParams",this.update),this.listenTo(jStoreApp.order,"change:bonusPay change:bonusPaySum",this.update)},getTemplateValues:function(){var e=this.collection.getTotal(),t=0,r=0,s=0,o=0,a=0;return this.collection.each(function(e){t+=e.get("carbohydrateAmount")*e.get("amount"),r+=e.get("energyAmount")*e.get("amount"),s+=e.get("fatAmount")*e.get("amount"),o+=e.get("fiberAmount")*e.get("amount"),a+=e.get("weight")*e.get("amount")}),{costWithoutDiscount:jStoreApp.fixMath(e.cost),discountSum:jStoreApp.fixMath(e.discountSum),bonusSum:jStoreApp.fixMath(e.bonusSum),deliverySum:jStoreApp.fixMath(e.deliverySum),totalCost:jStoreApp.fixMath(e.cost-e.discountSum-e.bonusSum+e.deliverySum),totalItems:jStoreApp.fixMath(e.items),carbohydrateAmount:jStoreApp.fixMath(t),energyAmount:jStoreApp.fixMath(r),fatAmount:jStoreApp.fixMath(s),fiberAmount:jStoreApp.fixMath(o),weight:jStoreApp.fixMath(a,3),user:jStoreApp.user.attributes,urls:{order:jStoreApp.restaurant.getUrl("clientOrder"),cart:jStoreApp.restaurant.getUrl("clientCart")}}},renderProcess:function(){var s=this,e=this.collection.getTotal();this.$el.empty().append(this.template(this.getTemplateValues()));var o=this.$el.find(".lsp-cart-items-list");return o.length&&r.each(o,function(r){(r=t(r)).empty(),s.collection.each(function(e){var t=new s.CartItem({model:e,parentView:s,templateSelectorDefault:o.data("template")?"#"+o.data("template"):null});r.append(t.render().$el),s.childViews.push(t)})}),0<e.items&&this.$(".lsp-cart-hidden").css("display","block"),this.update(),this},update:function(){var e=this.getTemplateValues();this.$(".jstore-js-cart-total-value").html(e.totalCost),this.$(".jstore-js-cart-total-count").html(e.totalItems),this.$(".jstore-js-cart-total-count-name").html(jStoreApp.declination(e.totalItems,[jStoreApp.t("goods_5"),jStoreApp.t("goods_1"),jStoreApp.t("goods_2")])),this.$(".jstore-cart-order-sum").toggleClass("lsp-js-hidden",!(e.discountSum||e.bonusSum)),this.$(".jstore-js-cart-order-sum-value").html(e.costWithoutDiscount),this.$(".jstore-cart-discount").toggleClass("lsp-js-hidden",!e.discountSum),this.$(".jstore-js-cart-discount-value").html(e.discountSum),this.$(".jstore-cart-delivery").toggleClass("lsp-js-hidden",!e.deliverySum),this.$(".jstore-js-cart-delivery-value").html(e.deliverySum),this.$(".jstore-cart-bonus").toggleClass("lsp-js-hidden",!(0<e.bonusSum&&jStoreApp.restaurant.canPayDiscount())),this.$(".jstore-js-cart-bonus-value").html(e.bonusSum)}});return a}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(5),r(2),r(3),r(58),r(59),r(25),r(7)],void 0===(o=function(e,s,o,t,a,r,n){var i=e.extend({template:null,templateDefault:t,templateType:"cartItem",className:"lsp-block-cart-item",modifierCont:null,templateModifier:null,events:{"click .lsp-js-item-plus":"cart_plus","click .lsp-js-item-minus":"cart_minus","click .lsp-js-item-delete":"cart_delete","click .lsp-js-item-show":"show_popup"},initialize:function(){i.__super__.initialize.apply(this,arguments),this.dbItem=this.model.get("dbItem"),this.listenTo(this.model,"change:amount change:cost change:discount change:balance change:not_active_message",this.update),this.listenTo(this.model,"change:active change:priceChanged",this.render)},renderProcess:function(){var r=this,e=r.model.get("dbItem");this.$el.html(r.template({name:e.get("name"),types:r.getTypes(),typesTail:r.getTypesTail(),amount:r.model.get("amount"),price:r.model.get("cost"),discount:r.model.get("discount"),active:r.model.get("active"),not_active_message:r.model.get("not_active_message"),description:e.getDesc(),smallImageUrl:e.get("smallImageUrl"),mediumImageUrl:e.get("mediumImageUrl"),largeImageUrl:e.get("largeImageUrl"),priceChanged:r.model.get("priceChanged"),useBalanceForSell:e.get("useBalanceForSell")}));function t(e){var t=r.model.parseValue(s(this).val());0<=t?r.model.set("amount",t):e.preventDefault()}return r.$("[name=count]").change(t).keypress(function(e){48<=e.keyCode&&e.keyCode<=57||!0===r.model.get("dbItem").get("useBalanceForSell")&&46===e.keyCode||e.preventDefault()}).keyup(t),r.modifierCont=r.$el.find(".lsp-js-cart-modifiers, .lsp-js-cart-modifers"),r.modifierCont.data("template")?r.templateModifier=o.template(s("#"+r.modifierCont.data("template")).html()):r.templateModifier=o.template(a),r.renderModifiers(),r.update(),this},renderModifiers:function(){var t=this;t.modifierCont.empty(),t.model.eachModifiers(function(e){"modifier"===e.get("type")&&0!==e.get("amount")&&t.modifierCont.append(t.templateModifier({name:e.get("name"),amount:e.get("amount")}))}),t.$(".lsp-js-modifier-tail").html(t.getTypesTail())},getTypes:function(){var t=[];return o.each(this.model.get("typeModifiers"),function(e){e.get("childModifiers").each(function(e){e.get("amount")&&t.push({name:e.get("name"),amount:e.get("amount")})})}),t},getTypesTail:function(){var t="";return o.each(this.getTypes(),function(e){t+=", "+e.name}),t},cart_plus:function(e){e.preventDefault(),this.model.amountPlus(),this.model.upInfo()},cart_minus:function(e){e.preventDefault(),this.model.get("amount")<=this.model.get("dbItem").get("defaultCountStep")?jStoreApp.cart.remove(this.model):(this.model.amountMinus(this.model.get("amount")),this.model.upInfo())},cart_delete:function(e){jStoreApp.cart.remove(this.model),e.preventDefault()},show_popup:function(){this.dbItem&&this.dbItem.isActive()&&(new n).render(new r({model:this.dbItem,offer:this.model.getCopy()}))},update:function(){var e=this,t=e.model.get("amount"),r=e.model.get("balance"),s=e.model.get("cost"),o=e.model.get("discount");e.model.get("priceChanged"),e.model.get("active");e.$el.toggleClass("lsp-block-cart-item-disabled",!e.model.get("active")),e.$("[name=count]").val(t),e.$(".lsp-js-cart-item-total-price").html(t*s),t*s<=o?e.$(".lsp-block-cart-item-discount").html(jStoreApp.t("gift")):o&&e.$(".lsp-block-cart-item-discount").html(jStoreApp.t("discount")),e.$(".lsp-block-cart-item-discount").toggleClass("lsp-js-hidden",0===o),e.$(".lsp-js-price").html(s),0<r&&r<=t?(e.$(".lsp-js-item-plus").addClass("jstore-out-of-stock"),e.$(".lsp-js-help-info").html(jStoreApp.t("cart_item_out_of_stock_balance",{balance:r,amount:jStoreApp.t(e.model.get("dbItem").get("useBalanceForSell")?"amount_kg":"amount")})),e.$el.addClass("jstore-cart-item-stock-max")):(e.$(".lsp-js-item-plus").removeClass("jstore-out-of-stock"),e.$el.removeClass("jstore-cart-item-stock-max")),e.$(".lsp-js-help-info").html(e.model.get("not_active_message")),e.renderModifiers()}});return i}.apply(t,s))||(e.exports=o)},function(e,t,h){var r,s;r=[h(5),h(39),h(62),h(64),h(3),h(2),h(40)],void 0===(s=function(e,c,d,u,m,g){"use strict";var s=e.extend({pageName:"item",modifiers:null,offer:null,window:null,setSeoData:!1,showDetailLink:!0,modifiersNotSet:!0,tags:null,searchString:"",templateType:"catalogItem",initialize:function(e){var t=this;if(s.__super__.initialize.apply(this,arguments),t.offer||(t.offer=this.model.getOffer()),!t.offer.get("dbItem").get("modifiers").length&&!t.offer.get("dbItem").get("groupModifiers").length){var r=function(){var e=jStoreApp.cart.getByHash(t.offer.getHash());e&&(t.stopListening(t.offer),t.offer=e,t.listenTo(t.offer,"change remove",t.change),t.change())};this.listenTo(jStoreApp.cart,"add",function(){r()}),r()}return t.analyticItemIndex=t.analyticItemIndex(),t.choseTemplate(),t.listenTo(t.offer,"change remove",t.change),t},getNameAndDesc:function(){var e=this.model.get("name"),t=this.model.get("description");if(this.searchString){var r=new RegExp(jStoreApp.escape(this.searchString),"ig"),s=t.match(r);s&&s.length&&(t=t.replace(r,"<span class='jstore-tag jsore-search-part'>"+s[0]+"</span>")),(s=e.match(r))&&s.length&&(e=e.replace(r,"<span class='jstore-tag jsore-search-part'>"+s[0]+"</span>"))}return{name:e,description:t}},renderProcess:function(){var r=this,e=this.getNameAndDesc();this.$el.empty().append(this.template({id:this.model.get("id"),name:e.name,url:this.model.get("url"),description:e.description,smallImageUrl:this.model.get("smallImageUrl"),mediumImageUrl:this.model.get("mediumImageUrl"),largeImageUrl:this.model.get("largeImageUrl"),count:this.offer.get("count"),balance:this.offer.get("balance"),cartCount:this.offer.getCartCount(),canAdd:this.offer.validateModifiers(),cost:this.offer.getCost(),fiberAmount:this.offer.get("fiberAmount"),fatAmount:this.offer.get("fatAmount"),carbohydrateAmount:this.offer.get("carbohydrateAmount"),energyAmount:this.offer.get("energyAmount"),weight:this.offer.get("weight"),categoryUrl:this.model.get("categoryUrl"),tags:this.model.getTags(this.tags),seoText:this.model.get("seoText"),isDetailPage:jStoreApp.filter.get("item_id")===this.model.get("id"),useBalanceForSell:this.model.get("useBalanceForSell")}));var t=r.$(".js-share");t.length&&h(69)("https://yastatic.net/share2/share.js",function(e){e&&e.share2&&e.share2(t[0],{content:{url:r.model.get("url"),title:r.model.get("name"),description:r.model.get("description"),image:"https:"+r.model.get("largeImageUrl")}})});var s=this.offer.get("groupModifiers"),o=this.offer.get("typeModifiers"),a=this.offer.get("modifiers"),n=r.$el.find(".lsp-js-modifiers-container"),i=r.$el.find(".lsp-js-types-container");n.length&&(a.length||s.length)?(a.length&&m.each(a.models,function(e){var t=new c({model:e});n.append(t.render().$el),r.childViews.push(t)}),m.each(s,function(e){var t=new d({model:e});n.append(t.render().$el),r.childViews.push(t)}),r.modifiersNotSet=!1):(0===s.length&&0===a.length&&(r.modifiersNotSet=!1),r.$(".lsp-js-modifiers-block").hide()),i.length&&o.length?m.each(o,function(e){var t=new u({model:e});i.append(t.render().$el),r.childViews.push(t)}):r.$(".lsp-js-typeModifiers-block").hide(),this.analyticsUse&&!this.analyticsUsed&&(jStoreApp.ga("ec:addImpression",{id:this.model.get("id"),name:this.model.get("name"),type:"view",brand:"",variant:"",category:this.analyticsCategory,list:this.analyticsList,position:this.analyticItemIndex}),this.analyticsUsed=!0);function l(){var e=r.offer.parseValue(g(this).val());e&&r.offer.set("count",e)}this.$("[name=count],[data-jstore-value=count]").change(l).keyup(l),this.$("[name=count],[data-jstore-value=count]").keyup(function(e){13==e.keyCode&&r.addToCart()});function p(){if(g(this).val()){var e=r.offer.parseValue(g(this).val());e?r.toCart(!1,e):r.offer.deleteFromCart(0,!0)}}return this.$("[name=cartCount],[data-jstore-value=cartCount]").change(p).keyup(p),this.$("[name=cartCount],[data-jstore-value=cartCount]").keyup(function(e){if(13==e.keyCode){var t=r.offer.parseValue(g(this).val());t?r.toCart(!1,t):r.offer.deleteFromCart(0,!0)}}),this},change:function(){var t=this,e=this.offer.get("balance"),r=this.getNameAndDesc();this.updateFields({id:this.model.get("id"),name:r.name,url:this.model.get("url"),description:r.description,smallImageUrl:this.model.get("smallImageUrl"),mediumImageUrl:this.model.get("mediumImageUrl"),largeImageUrl:this.model.get("largeImageUrl"),count:this.offer.get("count"),cartCount:this.offer.getCartCount(),canAdd:this.offer.validateModifiers(),cost:this.offer.getCost(),price:jStoreApp.fixMath(t.offer.get("count")*t.offer.getCost()),amount:t.offer.get("amount"),balance:e,fiberAmount:this.offer.get("fiberAmount"),fatAmount:this.offer.get("fatAmount"),carbohydrateAmount:this.offer.get("carbohydrateAmount"),energyAmount:this.offer.get("energyAmount"),weight:jStoreApp.fixMath(1e3*this.offer.get("weight")),categoryUrl:this.model.get("categoryUrl"),tags:this.model.getTags(t.tags),seoText:this.model.get("seoText"),isDetailPage:jStoreApp.filter.get("item_id")===this.model.get("id")}),this.offer.get("not_active_message")?this.$(".jstore-js-addToCart").attr("title",this.offer.get("not_active_message")):this.$(".jstore-js-addToCart").attr("title",""),0<e&&e<=this.offer.get("count")?t.$(".lsp-js-popup-item-plus").addClass("jstore-out-of-stock").attr("title",jStoreApp.t("cart_item_out_of_stock_balance",{balance:e,amount:jStoreApp.t(this.model.get("useBalanceForSell")?"amount_kg":"amount")})):t.$(".lsp-js-popup-item-plus").removeClass("jstore-out-of-stock").attr("title",""),t.$("em.lsp-js-popup-total-count, .lsp-js-item-count-value").html(t.offer.get("count")),t.$(".lsp-js-item-price-value, .lsp-js-item-price-value").html(t.offer.getCost()),t.$(".lsp-js-item-total-price-value, .lsp-js-popup-total-price").html(jStoreApp.fixMath(t.offer.get("count")*t.offer.getCost())),t.$(".lsp-js-item-weight-value").html(jStoreApp.fixMath(1e3*t.offer.get("weight"))),t.$(".lsp-js-item-energyAmount-value").html(t.offer.get("energyAmount")),t.$(".lsp-js-item-fatAmount-value").html(t.offer.get("fatAmount")),t.$(".lsp-js-item-fiberAmount-value").html(t.offer.get("fiberAmount")),t.$(".lsp-js-item-carbohydrateAmount-value").html(t.offer.get("carbohydrateAmount")),t.$("[name=count]").each(function(){var e=g(this);t.offer.parseValue(e.val())!==t.offer.get("count")&&e.val(t.offer.get("count"))})},toCart:function(e,t){var r=this;if(0===r.offer.get("balance"))return!1;if(void 0===t){t=r.offer.get("count");var s=r.$("[name=count]");1===s.length&&0<r.offer.parseValue(s.val())&&(t=r.offer.parseValue(s.val()))}r.modifiersNotSet||!r.offer.addToCart(t,{analyticsList:r.analyticsList,analyticsCategory:r.analyticsCategory,upToCart:e})?r.afterToCartFail():r.afterToCartSuccess()},afterToCartFail:function(){this.showPopUp()},afterToCartSuccess:function(){},showPopUp:function(){return this},analyticsUse:!1,analyticsUsed:!1,analyticItemIndex:function(){return 1},analyticsCategory:"",analyticsList:"",getSeoTitle:function(){return""},getSeoDescription:function(){return""},getSeoKeywords:function(){return""},registerClick:function(){jStoreApp.ga("ec:addProduct",{id:this.model.get("id"),name:this.model.get("name"),category:this.analyticsCategory,position:this.analyticItemIndex}),jStoreApp.ga("ec:setAction","click",{list:this.analyticsList})},events:{"click .jstore-js-addToCart":"eventAddToCart","click .jstore-js-putToCart":"eventPutToCart","click .jstore-js-deleteFromCart":"eventDeleteFromCart","click .jstore-js-detailLink":"eventShowItem","click .jstore-js-countPlus":"eventCountPlus","click .jstore-js-countMinus":"eventCountMinus","click .jstore-js-amountPlus":"eventAmountPlus","click .jstore-js-amountMinus":"eventAmountMinus","click .lsp-js-tocart":"eventAddToCart","click .lsp-js-popup-tocart":"eventPutToCart","click .lsp-js-fromcart":"eventDeleteFromCart","click .jstore-js-put-to-cart":"eventPutToCart","click .lsp-js-item-tag-select":"tagSelect","click .lsp-js-detail-link":"eventShowItem","click .lsp-js-item-minus":"eventCountMinus","click .lsp-js-popup-item-minus":"eventCountMinus","click .lsp-js-item-plus":"eventCountPlus","click .lsp-js-popup-item-plus":"eventCountPlus","click .js-type-class-change":"type_change","click .jstore-js-get-from-cart":"eventDeleteFromCart"},eventPutToCart:function(e){e.preventDefault(),this.toCart(!1)},eventAddToCart:function(e){e.preventDefault(),this.toCart(!0)},eventDeleteFromCart:function(e){e.preventDefault(),this.offer.deleteFromCart()},eventAmountPlus:function(e){e.preventDefault(),this.toCart(!0,1)},eventAmountMinus:function(e){e.preventDefault(),this.offer.deleteFromCart()},eventShowItem:function(e){this.registerClick(),!1===this.showDetailLink&&(e.preventDefault(),this.showPopUp())},eventCountMinus:function(e){return e.preventDefault(),this.offer.countMinus()},eventCountPlus:function(e){return e.preventDefault(),this.offer.countPlus()},tagSelect:function(e){e.preventDefault(),e.stopPropagation();var t=g(e.target);if(t.hasClass("lsp-js-item-tag-select")||(t=t.closest(".lsp-js-item-tag-select")),this.tags&&1===t.length){var r=t.data("id");this.tags.toggleTag(r)}},type_change:function(e){e.preventDefault();var t=this,r=g(e.target),s=this.offer.get("typeGroupModifiers"),o=r.data("id");s&&m.each(s.get("childModifiers").models,function(e){o===e.get("id")&&(e.setAmount(1),t.render())})}});return s}.apply(t,r))||(e.exports=s)},function(e,t,r){var s,o;s=[r(81),r(33),r(7),r(25)],void 0===(o=function(e,t,r,s){"use strict";return t.extend({className:"lsp-block-item",templateSelectorDefault:"#lsp-template-menu-item",templateDefault:e,showPopUp:function(){this.registerClick();var e=jStoreApp.filter.get("category_id");if(e&&this.model.inCategory([e]))return location.href=this.model.get("url"),!0;(new r).render(new s({model:this.model}))}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(30)],void 0===(o=function(e){return e.extend({defaults:{error:"",needDetail:!1},childType:"type",afterInitialise:function(){var e=this.get("childModifiers"),t=!1;e.every(function(e){return!e.get("amount")||!(t=!0)}),!t&&e.models[0]&&(e.models[0].setAmount(1),this.set("needDetail",!0))},upCost:function(){this.get("childModifiers").getCost();this.set("cost",this.get("childModifiers").getCost())}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(5),r(34),r(135),r(137),r(2),r(3)],void 0===(o=function(e,t,s,r,o,a){var n=e.extend({paginationPager:0,paginationLive:1,paginationNone:2,section:null,title:!1,subTitle:!1,childView:t,childViewContainer:".lsp-js-block-items",rootItem:!0,detailLink:!0,firstItem:!1,className:"",pageName:"items",templateType:"items",setSeoData:!1,analyticsUse:!0,showSeoText:!1,showDescription:!1,pageEnd:!1,showMessageIfEmpty:!1,tags:null,showTags:!1,tagsKey:"",paginationType:!1,usePagination:!1,pageItems:10,pageID:1,paginationUrlTemplate:"#!/page-:pageID",searchString:"",searchPage:!1,events:{"click .lsp-js-tag-select":"tagSelect","click .lsp-js-item-tag-select":"tagSelect"},tagSelect:function(e){e.preventDefault(),e.stopPropagation();var t=o(e.target);if(t.hasClass("lsp-js-tag-select")||(t=t.closest(".lsp-js-tag-select")),1===t.length){var r=t.data("id");this.pageID=1,this.tags.toggleTag(r)}},analyticItemIndex:function(){return 1},getSeoTitle:function(){return this.section?this.section.getSeoTitle():""},getSeoDescription:function(){return this.section?this.section.getSeoDescription():""},getSeoKeywords:function(){return this.section?this.section.getSeoKeywords():""},analyticsCategory:"",analyticsList:"",templateSelectorDefault:"#lsp-template-items-list",templateDefault:r,initialize:function(){n.__super__.initialize.apply(this,arguments),this.analyticsList=jStoreApp.t("Menu"),this.$el.addClass("lsp-block-items-list"),this.rootItem&&this.$el.attr("id","lsp-block-items-list"),this.pageItems||(this.pageItems=3),this.parentView||this.listenTo(this.model,"reset",this.render)},renderProcess:function(){var t=this;t.pageEnd=!1,this.showTags&&(t.tags=jStoreApp.dbTags.findTags({searchItems:this.model,key:t.tagsKey}),this.listenTo(this.tags,"change:active",this.render));var e=t.model.getItems({tags:t.showTags&&t.tags?t.tags.getIDs():[]});if(this.$el.html(this.template({section:{id:this.section?this.section.get("id"):"",title:!1===this.title?"":this.title&&!0!==this.title?this.title:this.section?this.section.get("name"):jStoreApp.t("Menu"),showTags:this.showTags&&1<this.tags.length,tags:this.tags.forTemplate(),firstItem:this.firstItem,rootItem:this.rootItem,showDescription:this.showDescription,description:this.section?this.section.get("description"):"",seoText:this.section?this.section.get("seoText"):"",showSeoText:this.showSeoText,searchPage:this.searchPage,searchString:this.searchString,showEmptyMessage:this.showMessageIfEmpty&&0===e.length},usePagination:this.paginationType===this.paginationPager,totalTag:this.tags.get("all")})),t.childCont=this.$(this.childViewContainer),e.length&&1===t.childCont.length){if(t.usePagination&&t.paginationType===t.paginationPager){var r=e.length;r<t.pageItems*(t.pageID-1)&&(location.href=t.paginationUrlTemplate.replace(":pageID","1")),e=t.model.getItems({usePagination:!0,pageItems:t.pageItems,pageID:t.pageID,tags:t.showTags&&t.tags?t.tags.getIDs():[]}),t.$(".js-pagination").each(function(){var e=new s({el:this,parentView:t,pageItems:t.pageItems,pageID:t.pageID,itemsCount:r,paginationUrlTemplate:t.paginationUrlTemplate}).render();t.childViews.push(e)})}else t.usePagination&&t.paginationType===t.paginationLive&&(e=t.model.getItems({usePagination:!0,pageItems:t.pageItems*t.pageID,pageID:1,tags:t.showTags&&t.tags?t.tags.getIDs():[]}),t.paginationLiveScrollEvent=function(){t.paginationLiveScroll()},o(window).scroll(t.paginationLiveScrollEvent));t.initItems(e),t.paginationType===t.paginationLive&&t.paginationLiveScroll()}return this},initItems:function(e){var r=this;e.every(function(e){var t=new r.childView({tags:r.tags,parentView:r,model:e,showDetailLink:r.detailLink,analyticsUse:r.analyticsUse,analyticItemIndex:r.analyticItemIndex,analyticsCategory:r.analyticsCategory,analyticsList:r.analyticsList,searchString:r.searchString}).render();return r.childViews.push(t),r.childCont.append(t.$el),!0})},paginationLiveScrollEvent:null,paginationLiveScroll:function(){var e=this;if(!e.pageEnd)for(var t=o(window);this.$el.is(":visible")&&t.scrollTop()+t.height()>e.childCont.offset().top+e.childCont.height()-100;){e.pageID++;var r=e.model.getItems({usePagination:!0,pageItems:e.pageItems?e.pageItems:3,pageID:e.pageID,tags:e.showTags&&e.tags?e.tags.getIDs():[]});if(!r||!r.length){e.pageEnd=!0;break}e.initItems(r)}},remove:function(){return this.usePagination&&this.paginationType===this.paginationLive&&o(window).off("scroll",this.paginationLiveScrollEvent),n.__super__.remove.apply(this,arguments)}});return n}.apply(t,s))||(e.exports=o)},,function(e,t){e.exports='<div class="jstore-tag lsp-block-userinfo-inner">\r\n    <div class="jstore-tag lsp-block-userinfo-appeal"><%= jStoreApp.t(\'Hello\')%>, <a href="<%= urlPersonal %>" class="jstore-tag lsp-block-userinfo-username"><%= showName %></a>!</div>\r\n    <div class="jstore-tag lsp-block-userinfo-button-cont">\r\n        <a class="jstore-tag lsp-button lsp-button-red lsp-js-logout" href="<%= urlLogOut %>"><%= jStoreApp.t(\'Out\')%></a>\r\n    </div>\r\n</div>'},function(e,t,r){var s,o;s=[r(61),r(4),r(2),r(3)],void 0===(o=function(t,e,r,s){return e.View.extend({template:null,className:"jstore-tag lsp-modifier-item",events:{"click .lsp-js-modifier-minus":"modifierMinus","click .lsp-js-modifier-plus":"modifierPlus"},initialize:function(){var e=r("#lsp-template-popup-modifier");e.length?this.template=s.template(e.html()):this.template=s.template(t),this.model.on("change",this.item_update,this)},modifierMinus:function(e){e.preventDefault();var t=parseInt(this.model.get("amount"));1<=t&&t--,this.model.setAmount(t)&&this.item_update()},modifierPlus:function(e){e.preventDefault();var t=parseInt(this.model.get("amount"));t++,this.model.setAmount(t)&&this.item_update()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.item_update(),this},item_update:function(){return this.$(".lsp-js-modifier-amount").html(this.model.get("amount")),this.$(".lsp-js-modifier-summ-value").html(jStoreApp.fixMath(this.model.get("amount")*this.model.getPrice())),this.$(".lsp-js-modifer-error").html(this.model.get("error")),this.model.get("error")?this.$el.addClass("lsp-modifier-with-error"):this.$el.removeClass("lsp-modifier-with-error"),this}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(2),r(68)],void 0===(o=function(e){var i;(i=e).fn.unveil=function(e,t){var r,s=i(window),o=1<window.devicePixelRatio?"data-src-retina":"data-src",a=this;function n(){var e=a.filter(function(){return i(this).visible(!0,!0)});r=e.trigger("unveil"),a=a.not(r)}return this.one("unveil",function(){var e=this.getAttribute(o);(e=e||this.getAttribute("data-src"))&&(this.setAttribute("src",e),"function"==typeof t&&t.call(this))}),s.on("scroll.unveil resize.unveil lookup.unveil",n),n(),i(document).trigger("scroll.unveil"),this}}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(34),r(5),r(82),r(2),r(3),r(42)],void 0===(o=function(o,e,t,r,s){var a=e.extend({templateType:"itemsFilter",limit:null,categories:[],items:[],tags:[],showLastPurchases:!1,menuItems:[],getSliderDefaultConfig:function(){return r.extend(a.__super__.getSliderDefaultConfig.apply(this,arguments),{autoplay:!1,slidesToShow:3,slidesToScroll:3})},templateDefault:t,pushItem:function(e){(!this.limit||this.limit>this.menuItems.length)&&this.menuItems.push(e)},initialize:function(){a.__super__.initialize.apply(this,arguments),this.menuItems=[];var r=this,e=this.$el.data("category");e&&(r.categories=e.split(";")),r.categories.length&&jStoreApp.dbItems.each(function(e){e.inCategory(r.categories)&&r.pushItem(e)}),r.items.length&&s.each(r.items,function(e){var t=jStoreApp.dbItems.get(e);t&&r.pushItem(t)}),r.tags.length&&jStoreApp.dbItems.each(function(t){s.every(r.tags,function(e){return!t.hasTag(e)||(r.pushItem(t),!1)})}),this.showLastPurchases&&s.each(jStoreApp.lastPurchases,function(e){var t=jStoreApp.dbItems.get(e);t&&r.pushItem(t)})},calculateHash:function(){if(!this.menuItems.length)return"";var t=[];return this.menuItems.every(function(e){return t.push(e.get("id")),!0}),t.join(",")},renderProcess:function(){var r=this;if(r.menuItems.length){this.$el.empty().append(this.template());var s=r.$el.find(".lsp-js-items");r.menuItems.every(function(e){var t=new o({parentView:r,model:e,showDetailLink:!1});return t.render(),r.childViews.push(t),s.append(t.$el),!0}),r.sliderItem=s}else this.$el.empty().hide();return this}});return a}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o,a;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){"use strict";o=[r(2)],void 0===(a="function"==typeof(s=function(p){"use strict";var n=window.Slick||{};(n=function(){function e(e,t){var r,s=this;s.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:p(e),appendDots:p(e),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function e(t,r){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(r+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},s.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},p.extend(s,s.initials),s.activeBreakpoint=null,s.animType=null,s.animProp=null,s.breakpoints=[],s.breakpointSettings=[],s.cssTransitions=!1,s.hidden="hidden",s.paused=!1,s.positionProp=null,s.respondTo=null,s.rowCount=1,s.shouldClick=!0,s.$slider=p(e),s.$slidesCache=null,s.transformType=null,s.transitionType=null,s.visibilityChange="visibilitychange",s.windowWidth=0,s.windowTimer=null,r=p(e).data("slick")||{},s.options=p.extend({},s.defaults,r,t),s.currentSlide=s.options.initialSlide,s.originalSettings=s.options,"undefined"!=typeof document.mozHidden?(s.hidden="mozHidden",s.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(s.hidden="webkitHidden",s.visibilityChange="webkitvisibilitychange"),s.autoPlay=p.proxy(s.autoPlay,s),s.autoPlayClear=p.proxy(s.autoPlayClear,s),s.changeSlide=p.proxy(s.changeSlide,s),s.clickHandler=p.proxy(s.clickHandler,s),s.selectHandler=p.proxy(s.selectHandler,s),s.setPosition=p.proxy(s.setPosition,s),s.swipeHandler=p.proxy(s.swipeHandler,s),s.dragHandler=p.proxy(s.dragHandler,s),s.keyHandler=p.proxy(s.keyHandler,s),s.autoPlayIterator=p.proxy(s.autoPlayIterator,s),s.instanceUid=o++,s.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,s.registerBreakpoints(),s.init(!0),s.checkResponsive(!0)}var o=0;return e}()).prototype.addSlide=n.prototype.slickAdd=function(e,t,r){var s=this;if("boolean"==typeof t)r=t,t=null;else if(0>t||t>=s.slideCount)return!1;s.unload(),"number"==typeof t?0===t&&0===s.$slides.length?p(e).appendTo(s.$slideTrack):r?p(e).insertBefore(s.$slides.eq(t)):p(e).insertAfter(s.$slides.eq(t)):r===!0?p(e).prependTo(s.$slideTrack):p(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,t){p(t).attr("data-slick-index",e)}),s.$slidesCache=s.$slides,s.reinit()},n.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},n.prototype.animateSlide=function(e,t){var r={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(e=-e),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,t):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,t):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),p({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function e(t){t=Math.ceil(t),s.options.vertical===!1?(r[s.animType]="translate("+t+"px, 0px)",s.$slideTrack.css(r)):(r[s.animType]="translate(0px,"+t+"px)",s.$slideTrack.css(r))},complete:function e(){t&&t.call()}})):(s.applyTransition(),e=Math.ceil(e),r[s.animType]=s.options.vertical===!1?"translate3d("+e+"px, 0px, 0px)":"translate3d(0px,"+e+"px, 0px)",s.$slideTrack.css(r),t&&setTimeout(function(){s.disableTransition(),t.call()},s.options.speed))},n.prototype.asNavFor=function(t){var e=this,r=e.options.asNavFor;r&&null!==r&&(r=p(r).not(e.$slider)),null!==r&&"object"==i(r)&&r.each(function(){var e=p(this).slick("getSlick");e.unslicked||e.slideHandler(t,!0)})},n.prototype.applyTransition=function(e){var t=this,r={};r[t.transitionType]=t.options.fade===!1?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(r):t.$slides.eq(e).css(r)},n.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&e.paused!==!0&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},n.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},n.prototype.autoPlayIterator=function(){var e=this;e.options.infinite===!1?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(0===e.currentSlide-1&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},n.prototype.buildArrows=function(){var e=this;e.options.arrows===!0&&(e.$prevArrow=p(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=p(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),e.options.infinite!==!0&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},n.prototype.buildDots=function(){var e,t,r=this;if(r.options.dots===!0&&r.slideCount>r.options.slidesToShow){for(t='<ul class="'+r.options.dotsClass+'">',e=0;e<=r.getDotCount();e+=1){t+="<li>"+r.options.customPaging.call(this,r,e)+"</li>"}t+="</ul>",r.$dots=p(t).appendTo(r.options.appendDots),r.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},n.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){p(t).attr("data-slick-index",e).data("originalStyling",p(t).attr("style")||"")}),e.$slidesCache=e.$slides,e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?p('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),(e.options.centerMode===!0||e.options.swipeToSlide===!0)&&(e.options.slidesToScroll=1),p("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.options.draggable===!0&&e.$list.addClass("draggable")},n.prototype.buildRows=function(){var e,t,r,s,o,a,n,i=this;if(s=document.createDocumentFragment(),a=i.$slider.children(),i.options.rows>1){for(n=i.options.slidesPerRow*i.options.rows,o=Math.ceil(a.length/n),e=0;o>e;e++){var l=document.createElement("div");for(t=0;t<i.options.rows;t++){var p=document.createElement("div");for(r=0;r<i.options.slidesPerRow;r++){var c=e*n+(t*i.options.slidesPerRow+r);a.get(c)&&p.appendChild(a.get(c))}l.appendChild(p)}s.appendChild(l)}i.$slider.html(s),i.$slider.children().children().children().css({width:100/i.options.slidesPerRow+"%",display:"inline-block"})}},n.prototype.checkResponsive=function(e,t){var r,s,o,a=this,n=!1,i=a.$slider.width(),l=window.innerWidth||p(window).width();if("window"===a.respondTo?o=l:"slider"===a.respondTo?o=i:"min"===a.respondTo&&(o=Math.min(l,i)),a.options.responsive&&a.options.responsive.length&&null!==a.options.responsive){s=null;for(r in a.breakpoints){a.breakpoints.hasOwnProperty(r)&&(a.originalSettings.mobileFirst===!1?o<a.breakpoints[r]&&(s=a.breakpoints[r]):o>a.breakpoints[r]&&(s=a.breakpoints[r]))}null!==s?null!==a.activeBreakpoint?(s!==a.activeBreakpoint||t)&&(a.activeBreakpoint=s,"unslick"===a.breakpointSettings[s]?a.unslick(s):(a.options=p.extend({},a.originalSettings,a.breakpointSettings[s]),e===!0&&(a.currentSlide=a.options.initialSlide),a.refresh(e)),n=s):(a.activeBreakpoint=s,"unslick"===a.breakpointSettings[s]?a.unslick(s):(a.options=p.extend({},a.originalSettings,a.breakpointSettings[s]),e===!0&&(a.currentSlide=a.options.initialSlide),a.refresh(e)),n=s):null!==a.activeBreakpoint&&(a.activeBreakpoint=null,a.options=a.originalSettings,e===!0&&(a.currentSlide=a.options.initialSlide),a.refresh(e),n=s),e||n===!1||a.$slider.trigger("breakpoint",[a,n])}},n.prototype.changeSlide=function(e,t){var r,s,o,a=this,n=p(e.target);switch(n.is("a")&&e.preventDefault(),n.is("li")||(n=n.closest("li")),o=0!==a.slideCount%a.options.slidesToScroll,r=o?0:(a.slideCount-a.currentSlide)%a.options.slidesToScroll,e.data.message){case"previous":s=0===r?a.options.slidesToScroll:a.options.slidesToShow-r,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide-s,!1,t);break;case"next":s=0===r?a.options.slidesToScroll:r,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide+s,!1,t);break;case"index":var i=0===e.data.index?0:e.data.index||n.index()*a.options.slidesToScroll;a.slideHandler(a.checkNavigable(i),!1,t),n.children().trigger("focus");break;default:return}},n.prototype.checkNavigable=function(e){var t,r,s=this;if(t=s.getNavigableIndexes(),r=0,e>t[t.length-1])e=t[t.length-1];else for(var o in t){if(e<t[o]){e=r;break}r=t[o]}return e},n.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(p("li",e.$dots).off("click.slick",e.changeSlide),e.options.pauseOnDotsHover===!0&&e.options.autoplay===!0&&p("li",e.$dots).off("mouseenter.slick",p.proxy(e.setPaused,e,!0)).off("mouseleave.slick",p.proxy(e.setPaused,e,!1))),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide)),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),p(document).off(e.visibilityChange,e.visibility),e.$list.off("mouseenter.slick",p.proxy(e.setPaused,e,!0)),e.$list.off("mouseleave.slick",p.proxy(e.setPaused,e,!1)),e.options.accessibility===!0&&e.$list.off("keydown.slick",e.keyHandler),e.options.focusOnSelect===!0&&p(e.$slideTrack).children().off("click.slick",e.selectHandler),p(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),p(window).off("resize.slick.slick-"+e.instanceUid,e.resize),p("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),p(window).off("load.slick.slick-"+e.instanceUid,e.setPosition),p(document).off("ready.slick.slick-"+e.instanceUid,e.setPosition)},n.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>1&&(e=t.$slides.children().children(),e.removeAttr("style"),t.$slider.html(e))},n.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},n.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),p(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.options.arrows===!0&&(t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove())),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){p(this).attr("style",p(this).data("originalStyling"))}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},n.prototype.disableTransition=function(e){var t=this,r={};r[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(r):t.$slides.eq(e).css(r)},n.prototype.fadeSlide=function(e,t){var r=this;r.cssTransitions===!1?(r.$slides.eq(e).css({zIndex:r.options.zIndex}),r.$slides.eq(e).animate({opacity:1},r.options.speed,r.options.easing,t)):(r.applyTransition(e),r.$slides.eq(e).css({opacity:1,zIndex:r.options.zIndex}),t&&setTimeout(function(){r.disableTransition(e),t.call()},r.options.speed))},n.prototype.fadeSlideOut=function(e){var t=this;t.cssTransitions===!1?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},n.prototype.filterSlides=n.prototype.slickFilter=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},n.prototype.getCurrent=n.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},n.prototype.getDotCount=function(){var e=this,t=0,r=0,s=0;if(e.options.infinite===!0)for(;t<e.slideCount;){++s,t=r+e.options.slidesToShow,r+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow}else if(e.options.centerMode===!0)s=e.slideCount;else for(;t<e.slideCount;){++s,t=r+e.options.slidesToShow,r+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow}return s-1},n.prototype.getLeft=function(e){var t,r,s,o=this,a=0;return o.slideOffset=0,r=o.$slides.first().outerHeight(!0),o.options.infinite===!0?(o.slideCount>o.options.slidesToShow&&(o.slideOffset=-1*o.slideWidth*o.options.slidesToShow,a=-1*r*o.options.slidesToShow),0!==o.slideCount%o.options.slidesToScroll&&e+o.options.slidesToScroll>o.slideCount&&o.slideCount>o.options.slidesToShow&&(e>o.slideCount?(o.slideOffset=-1*(o.options.slidesToShow-(e-o.slideCount))*o.slideWidth,a=-1*(o.options.slidesToShow-(e-o.slideCount))*r):(o.slideOffset=-1*o.slideCount%o.options.slidesToScroll*o.slideWidth,a=-1*o.slideCount%o.options.slidesToScroll*r))):e+o.options.slidesToShow>o.slideCount&&(o.slideOffset=(e+o.options.slidesToShow-o.slideCount)*o.slideWidth,a=(e+o.options.slidesToShow-o.slideCount)*r),o.slideCount<=o.options.slidesToShow&&(o.slideOffset=0,a=0),o.options.centerMode===!0&&o.options.infinite===!0?o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)-o.slideWidth:o.options.centerMode===!0&&(o.slideOffset=0,o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)),t=o.options.vertical===!1?-1*e*o.slideWidth+o.slideOffset:-1*e*r+a,o.options.variableWidth===!0&&(s=o.slideCount<=o.options.slidesToShow||o.options.infinite===!1?o.$slideTrack.children(".slick-slide").eq(e):o.$slideTrack.children(".slick-slide").eq(e+o.options.slidesToShow),t=s[0]?-1*s[0].offsetLeft:0,o.options.centerMode===!0&&(s=o.options.infinite===!1?o.$slideTrack.children(".slick-slide").eq(e):o.$slideTrack.children(".slick-slide").eq(e+o.options.slidesToShow+1),t=s[0]?-1*s[0].offsetLeft:0,t+=(o.$list.width()-s.outerWidth())/2)),t},n.prototype.getOption=n.prototype.slickGetOption=function(e){var t=this;return t.options[e]},n.prototype.getNavigableIndexes=function(){var e,t=this,r=0,s=0,o=[];for(t.options.infinite===!1?e=t.slideCount:(r=-1*t.options.slidesToScroll,s=-1*t.options.slidesToScroll,e=2*t.slideCount);e>r;){o.push(r),r=s+t.options.slidesToScroll,s+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow}return o},n.prototype.getSlick=function(){return this},n.prototype.getSlideCount=function(){var e,r,s,o=this;return s=o.options.centerMode===!0?o.slideWidth*Math.floor(o.options.slidesToShow/2):0,o.options.swipeToSlide===!0?(o.$slideTrack.find(".slick-slide").each(function(e,t){return t.offsetLeft-s+p(t).outerWidth()/2>-1*o.swipeLeft?(r=t,!1):void 0}),e=Math.abs(p(r).attr("data-slick-index")-o.currentSlide)||1):o.options.slidesToScroll},n.prototype.goTo=n.prototype.slickGoTo=function(e,t){var r=this;r.changeSlide({data:{message:"index",index:parseInt(e)}},t)},n.prototype.init=function(e){var t=this;p(t.$slider).hasClass("slick-initialized")||(p(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots()),e&&t.$slider.trigger("init",[t]),t.options.accessibility===!0&&t.initADA()},n.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},n.prototype.initDotEvents=function(){var e=this;e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&p("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),e.options.dots===!0&&e.options.pauseOnDotsHover===!0&&e.options.autoplay===!0&&p("li",e.$dots).on("mouseenter.slick",p.proxy(e.setPaused,e,!0)).on("mouseleave.slick",p.proxy(e.setPaused,e,!1))},n.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),p(document).on(e.visibilityChange,p.proxy(e.visibility,e)),e.$list.on("mouseenter.slick",p.proxy(e.setPaused,e,!0)),e.$list.on("mouseleave.slick",p.proxy(e.setPaused,e,!1)),e.options.accessibility===!0&&e.$list.on("keydown.slick",e.keyHandler),e.options.focusOnSelect===!0&&p(e.$slideTrack).children().on("click.slick",e.selectHandler),p(window).on("orientationchange.slick.slick-"+e.instanceUid,p.proxy(e.orientationChange,e)),p(window).on("resize.slick.slick-"+e.instanceUid,p.proxy(e.resize,e)),p("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),p(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),p(document).on("ready.slick.slick-"+e.instanceUid,e.setPosition)},n.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),e.options.autoplay===!0&&e.autoPlay()},n.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:"next"}}))},n.prototype.lazyLoad=function(){function e(e){p("img[data-lazy]",e).each(function(){var e=p(this),t=p(this).attr("data-lazy"),r=document.createElement("img");r.onload=function(){e.animate({opacity:0},100,function(){e.attr("src",t).animate({opacity:1},200,function(){e.removeAttr("data-lazy").removeClass("slick-loading")})})},r.src=t})}var t,r,s,o,a=this;a.options.centerMode===!0?a.options.infinite===!0?(s=a.currentSlide+(a.options.slidesToShow/2+1),o=s+a.options.slidesToShow+2):(s=Math.max(0,a.currentSlide-(a.options.slidesToShow/2+1)),o=2+(a.options.slidesToShow/2+1)+a.currentSlide):(s=a.options.infinite?a.options.slidesToShow+a.currentSlide:a.currentSlide,o=s+a.options.slidesToShow,a.options.fade===!0&&(s>0&&s--,o<=a.slideCount&&o++)),t=a.$slider.find(".slick-slide").slice(s,o),e(t),a.slideCount<=a.options.slidesToShow?(r=a.$slider.find(".slick-slide"),e(r)):a.currentSlide>=a.slideCount-a.options.slidesToShow?(r=a.$slider.find(".slick-cloned").slice(0,a.options.slidesToShow),e(r)):0===a.currentSlide&&(r=a.$slider.find(".slick-cloned").slice(-1*a.options.slidesToShow),e(r))},n.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},n.prototype.next=n.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},n.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},n.prototype.pause=n.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},n.prototype.play=n.prototype.slickPlay=function(){var e=this;e.paused=!1,e.autoPlay()},n.prototype.postSlide=function(e){var t=this;t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay===!0&&t.paused===!1&&t.autoPlay(),t.options.accessibility===!0&&t.initADA()},n.prototype.prev=n.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},n.prototype.preventDefault=function(e){e.preventDefault()},n.prototype.progressiveLazyLoad=function(){var e,t,r=this;e=p("img[data-lazy]",r.$slider).length,e>0&&(t=p("img[data-lazy]",r.$slider).first(),t.attr("src",t.attr("data-lazy")).removeClass("slick-loading").load(function(){t.removeAttr("data-lazy"),r.progressiveLazyLoad(),r.options.adaptiveHeight===!0&&r.setPosition()}).error(function(){t.removeAttr("data-lazy"),r.progressiveLazyLoad()}))},n.prototype.refresh=function(e){var t=this,r=t.currentSlide;t.destroy(!0),p.extend(t,t.initials,{currentSlide:r}),t.init(),e||t.changeSlide({data:{message:"index",index:r}},!1)},n.prototype.registerBreakpoints=function(){var e,t,r,s=this,o=s.options.responsive||null;if("array"===p.type(o)&&o.length){s.respondTo=s.options.respondTo||"window";for(e in o){if(r=s.breakpoints.length-1,t=o[e].breakpoint,o.hasOwnProperty(e)){for(;r>=0;){s.breakpoints[r]&&s.breakpoints[r]===t&&s.breakpoints.splice(r,1),r--}s.breakpoints.push(t),s.breakpointSettings[t]=o[e].settings}}s.breakpoints.sort(function(e,t){return s.options.mobileFirst?e-t:t-e})}},n.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.checkResponsive(!1,!0),e.options.focusOnSelect===!0&&p(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses(0),e.setPosition(),e.$slider.trigger("reInit",[e]),e.options.autoplay===!0&&e.focusHandler()},n.prototype.resize=function(){var e=this;p(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=p(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},n.prototype.removeSlide=n.prototype.slickRemove=function(e,t,r){var s=this;return"boolean"==typeof e?(t=e,e=t===!0?0:s.slideCount-1):e=t===!0?--e:e,s.slideCount<1||0>e||e>s.slideCount-1?!1:(s.unload(),r===!0?s.$slideTrack.children().remove():s.$slideTrack.children(this.options.slide).eq(e).remove(),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slidesCache=s.$slides,s.reinit(),void 0)},n.prototype.setCSS=function(e){var t,r,s=this,o={};s.options.rtl===!0&&(e=-e),t="left"==s.positionProp?Math.ceil(e)+"px":"0px",r="top"==s.positionProp?Math.ceil(e)+"px":"0px",o[s.positionProp]=e,s.transformsEnabled===!1?s.$slideTrack.css(o):(o={},s.cssTransitions===!1?(o[s.animType]="translate("+t+", "+r+")",s.$slideTrack.css(o)):(o[s.animType]="translate3d("+t+", "+r+", 0px)",s.$slideTrack.css(o)))},n.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},n.prototype.setFade=function(){var r,s=this;s.$slides.each(function(e,t){r=-1*s.slideWidth*e,s.options.rtl===!0?p(t).css({position:"relative",right:r,top:0,zIndex:s.options.zIndex-2,opacity:0}):p(t).css({position:"relative",left:r,top:0,zIndex:s.options.zIndex-2,opacity:0})}),s.$slides.eq(s.currentSlide).css({zIndex:s.options.zIndex-1,opacity:1})},n.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},n.prototype.setOption=n.prototype.slickSetOption=function(e,t,r){var s,o,a=this;if("responsive"===e&&"array"===p.type(t))for(o in t){if("array"!==p.type(a.options.responsive))a.options.responsive=[t[o]];else{for(s=a.options.responsive.length-1;s>=0;){a.options.responsive[s].breakpoint===t[o].breakpoint&&a.options.responsive.splice(s,1),s--}a.options.responsive.push(t[o])}}else a.options[e]=t;r===!0&&(a.unload(),a.reinit())},n.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},n.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&e.animType!==!1},n.prototype.setSlideClasses=function(e){var t,r,s,o,a=this;r=a.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),a.$slides.eq(e).addClass("slick-current"),a.options.centerMode===!0?(t=Math.floor(a.options.slidesToShow/2),a.options.infinite===!0&&(e>=t&&e<=a.slideCount-1-t?a.$slides.slice(e-t,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(s=a.options.slidesToShow+e,r.slice(s-t+1,s+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?r.eq(r.length-1-a.options.slidesToShow).addClass("slick-center"):e===a.slideCount-1&&r.eq(a.options.slidesToShow).addClass("slick-center")),a.$slides.eq(e).addClass("slick-center")):e>=0&&e<=a.slideCount-a.options.slidesToShow?a.$slides.slice(e,e+a.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):r.length<=a.options.slidesToShow?r.addClass("slick-active").attr("aria-hidden","false"):(o=a.slideCount%a.options.slidesToShow,s=a.options.infinite===!0?a.options.slidesToShow+e:e,a.options.slidesToShow==a.options.slidesToScroll&&a.slideCount-e<a.options.slidesToShow?r.slice(s-(a.options.slidesToShow-o),s+o).addClass("slick-active").attr("aria-hidden","false"):r.slice(s,s+a.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===a.options.lazyLoad&&a.lazyLoad()},n.prototype.setupInfinite=function(){var e,t,r,s=this;if(s.options.fade===!0&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(t=null,s.slideCount>s.options.slidesToShow)){for(r=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-r;e-=1){t=e-1,p(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned")}for(e=0;r>e;e+=1){t=e,p(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned")}s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){p(this).attr("id","")})}},n.prototype.setPaused=function(e){var t=this;t.options.autoplay===!0&&t.options.pauseOnHover===!0&&(t.paused=e,e?t.autoPlayClear():t.autoPlay())},n.prototype.selectHandler=function(e){var t=this,r=p(e.target).is(".slick-slide")?p(e.target):p(e.target).parents(".slick-slide"),s=parseInt(r.attr("data-slick-index"));return s||(s=0),t.slideCount<=t.options.slidesToShow?(t.setSlideClasses(s),t.asNavFor(s),void 0):(t.slideHandler(s),void 0)},n.prototype.slideHandler=function(e,t,r){var s,o,a,n,i=null,l=this;return t=t||!1,l.animating===!0&&l.options.waitForAnimate===!0||l.options.fade===!0&&l.currentSlide===e||l.slideCount<=l.options.slidesToShow?void 0:(t===!1&&l.asNavFor(e),s=e,i=l.getLeft(s),n=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?n:l.swipeLeft,l.options.infinite===!1&&l.options.centerMode===!1&&(0>e||e>l.getDotCount()*l.options.slidesToScroll)?(l.options.fade===!1&&(s=l.currentSlide,r!==!0?l.animateSlide(n,function(){l.postSlide(s)}):l.postSlide(s)),void 0):l.options.infinite===!1&&l.options.centerMode===!0&&(0>e||e>l.slideCount-l.options.slidesToScroll)?(l.options.fade===!1&&(s=l.currentSlide,r!==!0?l.animateSlide(n,function(){l.postSlide(s)}):l.postSlide(s)),void 0):(l.options.autoplay===!0&&clearInterval(l.autoPlayTimer),o=0>s?0!==l.slideCount%l.options.slidesToScroll?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+s:s>=l.slideCount?0!==l.slideCount%l.options.slidesToScroll?0:s-l.slideCount:s,l.animating=!0,l.$slider.trigger("beforeChange",[l,l.currentSlide,o]),a=l.currentSlide,l.currentSlide=o,l.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),l.options.fade===!0?(r!==!0?(l.fadeSlideOut(a),l.fadeSlide(o,function(){l.postSlide(o)})):l.postSlide(o),l.animateHeight(),void 0):(r!==!0?l.animateSlide(i,function(){l.postSlide(o)}):l.postSlide(o),void 0)))},n.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},n.prototype.swipeDirection=function(){var e,t,r,s,o=this;return e=o.touchObject.startX-o.touchObject.curX,t=o.touchObject.startY-o.touchObject.curY,r=Math.atan2(t,e),s=Math.round(180*r/Math.PI),0>s&&(s=360-Math.abs(s)),45>=s&&s>=0?o.options.rtl===!1?"left":"right":360>=s&&s>=315?o.options.rtl===!1?"left":"right":s>=135&&225>=s?o.options.rtl===!1?"right":"left":o.options.verticalSwiping===!0?s>=35&&135>=s?"left":"right":"vertical"},n.prototype.swipeEnd=function(){var e,t=this;if(t.dragging=!1,t.shouldClick=t.touchObject.swipeLength>10?!1:!0,void 0===t.touchObject.curX)return!1;if(t.touchObject.edgeHit===!0&&t.$slider.trigger("edge",[t,t.swipeDirection()]),t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.slideHandler(e),t.currentDirection=0,t.touchObject={},t.$slider.trigger("swipe",[t,"left"]);break;case"right":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.slideHandler(e),t.currentDirection=1,t.touchObject={},t.$slider.trigger("swipe",[t,"right"])}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},n.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},n.prototype.swipeMove=function(e){var t,r,s,o,a,n=this;return a=void 0!==e.originalEvent?e.originalEvent.touches:null,!n.dragging||a&&1!==a.length?!1:(t=n.getLeft(n.currentSlide),n.touchObject.curX=void 0!==a?a[0].pageX:e.clientX,n.touchObject.curY=void 0!==a?a[0].pageY:e.clientY,n.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(n.touchObject.curX-n.touchObject.startX,2))),n.options.verticalSwiping===!0&&(n.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(n.touchObject.curY-n.touchObject.startY,2)))),r=n.swipeDirection(),"vertical"!==r?(void 0!==e.originalEvent&&n.touchObject.swipeLength>4&&e.preventDefault(),o=(n.options.rtl===!1?1:-1)*(n.touchObject.curX>n.touchObject.startX?1:-1),n.options.verticalSwiping===!0&&(o=n.touchObject.curY>n.touchObject.startY?1:-1),s=n.touchObject.swipeLength,n.touchObject.edgeHit=!1,n.options.infinite===!1&&(0===n.currentSlide&&"right"===r||n.currentSlide>=n.getDotCount()&&"left"===r)&&(s=n.touchObject.swipeLength*n.options.edgeFriction,n.touchObject.edgeHit=!0),n.swipeLeft=n.options.vertical===!1?t+s*o:t+s*(n.$list.height()/n.listWidth)*o,n.options.verticalSwiping===!0&&(n.swipeLeft=t+s*o),n.options.fade===!0||n.options.touchMove===!1?!1:n.animating===!0?(n.swipeLeft=null,!1):(n.setCSS(n.swipeLeft),void 0)):void 0)},n.prototype.swipeStart=function(e){var t,r=this;return 1!==r.touchObject.fingerCount||r.slideCount<=r.options.slidesToShow?(r.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),r.touchObject.startX=r.touchObject.curX=void 0!==t?t.pageX:e.clientX,r.touchObject.startY=r.touchObject.curY=void 0!==t?t.pageY:e.clientY,r.dragging=!0,void 0)},n.prototype.unfilterSlides=n.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},n.prototype.unload=function(){var e=this;p(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},n.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},n.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},n.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},n.prototype.visibility=function(){var e=this;document[e.hidden]?(e.paused=!0,e.autoPlayClear()):e.options.autoplay===!0&&(e.paused=!1,e.autoPlay())},n.prototype.initADA=function(){var t=this;t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),t.$slideTrack.attr("role","listbox"),t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(e){p(this).attr({role:"option","aria-describedby":"slick-slide"+t.instanceUid+e})}),null!==t.$dots&&t.$dots.attr("role","tablist").find("li").each(function(e){p(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+t.instanceUid+e,id:"slick-slide"+t.instanceUid+e})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),t.activateADA()},n.prototype.activateADA=function(){var e=this,t=e.$slider.find("*").is(":focus");e.$slideTrack.find(".slick-active").attr({"aria-hidden":"false",tabindex:"0"}).find("a, input, button, select").attr({tabindex:"0"}),t&&e.$slideTrack.find(".slick-active").focus()},n.prototype.focusHandler=function(){var r=this;r.$slider.on("focus.slick blur.slick","*",function(e){e.stopImmediatePropagation();var t=p(this);setTimeout(function(){r.isPlay&&(t.is(":focus")?(r.autoPlayClear(),r.paused=!0):(r.paused=!1,r.autoPlay()))},0)})},p.fn.slick=function(){var e,t=this,r=arguments[0],s=Array.prototype.slice.call(arguments,1),o=t.length,a=0;for(a;o>a;a++){if("object"==i(r)||"undefined"==typeof r?t[a].slick=new n(t[a],r):e=t[a].slick[r].apply(t[a].slick,s),"undefined"!=typeof e)return e}return t}})?s.apply(t,o):s)||(e.exports=a)}()},function(e,t,r){var s,o;s=[r(29),r(30),r(35),r(4),r(2),r(3)],void 0===(o=function(l,p,c,e,i,d){var r=e.Model.extend({defaults:{dbItem:null,active:!0,inCart:!1,cartItem:!1,price:0,cost:0,totalCost:0,amount:0,count:1,modifiers:null,typeModifiers:null,groupModifiers:null,needDetail:!1,discount:0,priceChanged:!1,terminalCost:!1,parent:null,balance:-1},initialize:function(){var t=this,e=t.get("dbItem"),r=e.attributes,s=[],o=[],a=[],n=this.get("initModifiers");d.each(r.modifiers,function(e){var t=jStoreApp.dbItems.get(e.modifierId);t&&s.push({id:e.modifierId,dbModifier:t,minAmount:e.minAmount,maxAmount:e.maxAmount,defaultAmount:e.defaultAmount,amount:e.amount?e.amount:0,type:"modifier"})}),(s=new l(s)).ready(),d.each(r.groupModifiers,function(e){var t,r=!1;jStoreApp.restaurant.showGroupModifiersAsToggleButtons()&&1===e.maxAmount&&1===e.minAmount?(t=new c(e),r=!0):t=new p(e),0!==t.get("childModifiers").models.length&&(r?a.push(t):o.push(t))});var i=!1;d.every(a,function(e){return!e.get("needDetail")||!(i=!0)}),t.set({modifiers:s,typeModifiers:a,groupModifiers:o,needDetail:i,count:e.get("defaultCount"),step:e.get("defaultCountStep")}),t.eachModifiers(function(e){t.listenTo(e,"change:amount",t.upInfo)}),jStoreApp.filter.on("change:discounts",this.upInfo,this),t.listenTo(jStoreApp.filter,"change:terminal_id",this.upInfo),t.listenTo(e,"change",this.upInfo),n&&this.eachModifiers(function(e){n[e.get("id")]&&e.setAmount(n[e.get("id")])}),t.upInfo()},getCartCount:function(){var e=jStoreApp.cart.getByHash(this.getHash());return e?e.get("amount"):0},validateModifiers:function(){var t=!0;return this.get("modifiers").each(function(e){e.validateModifier()||(t=!1)}),d.each(this.get("groupModifiers"),function(e){e.validateModifier()||(t=!1)}),d.each(this.get("typeModifiers"),function(e){e.validateModifier()||(t=!1)}),t},getCost:function(){return this.get("cost")},upInfo:function(){var e=this,t=e.get("dbItem"),r=t.get("stopList"),s=-1,o=jStoreApp.filter.get("terminal_id"),a=t.get("price"),n=t.get("price"),i=t.get("active"),l=t.get("not_active_message"),p=e.get("amount")?e.get("amount"):1,c=e.get("discount"),d=e.get("terminalCost"),u=e.collection?e.collection.hasDiscount(t.get("code")):0,m=0,g=t.get("differentPricesOn"),h=t.get("weight"),f=t.get("fiberAmount"),v=t.get("fatAmount"),y=t.get("energyAmount"),j=t.get("carbohydrateAmount");(window.jStoreAppConfig.terminalId||jStoreApp.restaurant.get("terminalIikoId")||!jStoreApp.filter.get("terminal_default"))&&Array.isArray(g)&&(g.every(function(e){return e.terminalId===o&&(a=e.price),!0}),void 0!==r[o]&&(s=r[o])),this.eachModifiers(function(e){var t=e.get("amount");0<t&&(m+=e.getCost(),null!==h&&(h+=e.get("weight")*t),null!==f&&(f+=e.get("fiberAmount")*t),null!==v&&(v+=e.get("fatAmount")*t),null!==y&&(y+=e.get("energyAmount")*t))}),n=jStoreApp.fixMath(a),a=jStoreApp.fixMath(a+m);var _={};null!==h&&this.get("weight")!==jStoreApp.fixMath(h,3)&&(_.weight=jStoreApp.fixMath(h,3)),null!==f&&this.get("fiberAmount")!==jStoreApp.fixMath(f)&&(_.fiberAmount=jStoreApp.fixMath(f)),null!==v&&this.get("fatAmount")!==jStoreApp.fixMath(v)&&(_.fatAmount=jStoreApp.fixMath(v)),null!==y&&this.get("energyAmount")!==jStoreApp.fixMath(y)&&(_.energyAmount=jStoreApp.fixMath(y)),null!==j&&this.get("carbohydrateAmount")!==jStoreApp.fixMath(j)&&(_.carbohydrateAmount=jStoreApp.fixMath(j)),this.get("modifiersCost")!==jStoreApp.fixMath(m)&&(_.modifiersCost=jStoreApp.fixMath(m)),this.get("price")!==n&&(_.price=jStoreApp.fixMath(a)),this.get("cost")!==a&&(_.cost=jStoreApp.fixMath(a)),this.get("balance")!==s&&(_.balance=s),c!==u&&(_.discount=u),0===s?(i=!1,l=1<jStoreApp.DeliveryTerminals.length?jStoreApp.t("cart_item_out_of_stock_rest"):jStoreApp.t("cart_item_out_of_stock")):0<s&&s<=p&&(l=jStoreApp.t("cart_item_out_of_stock_balance",{balance:s,amount:jStoreApp.t(t.get("useBalanceForSell")?"amount_kg":"amount")}),s<p&&(p=s,_.amount=p));var S=!1;d!==o&&(!1!==d&&a>this.get("cost")&&(S=!0),this.get("priceChanged")!==S&&(_.priceChanged=S,l=jStoreApp.t("cart_item_price_changed"))),this.get("active")!==i&&(_.active=i),this.get("not_active_message")!==l&&(_.not_active_message=l),this.collection&&"function"==typeof this.collection.onUpdate&&this.collection.onUpdate(this,_),d!=o&&(_.terminalCost=o);var b={};for(var A in _)if(_.hasOwnProperty(A)){b[A]=_[A],this.set(_);break}return this},eachModifiers:function(t){var r=this;this.get("modifiers").each(function(e){t.apply(r,arguments)}),d.each(this.get("groupModifiers"),function(e){e.get("childModifiers").each(function(e){t.apply(r,arguments)})}),d.each(this.get("typeModifiers"),function(e){e.get("childModifiers").each(function(e){t.apply(r,arguments)})})},getHash:function(){var t=[];return this.eachModifiers(function(e){t.push(e.get("id")+"-"+e.get("amount"))}),this.get("dbItem").get("id")+(t.length?"#"+t.join("--"):"")},addToCart:function(e,t){if(0===this.get("balance"))return!1;if(t=i.extend({upToCart:!1,analyticsList:jStoreApp.t("Menu"),analyticsCategory:jStoreApp.t("Menu"),analyticsAction:jStoreApp.t("Menu")},t||{}),this.validateModifiers()){e=e||1;var r=this.get("parent"),s={};if(this.eachModifiers(function(e){s[e.get("id")]=e.get("amount")}),r)return r.eachModifiers(function(e){0<=s[e.get("id")]&&e.set({amount:s[e.get("id")]},{silent:!0})}),r.eachModifiers(function(e){e.trigger("change",e)}),r.addToCart(e,t);var o=jStoreApp.cart.getByHash(this.getHash());if(o)t.upToCart&&(e=o.get("amount")+e),o.setAmount(e);else{var a={dbItem:this.get("dbItem"),initModifiers:{},amount:jStoreApp.fixMath(e)};this.eachModifiers(function(e){a.initModifiers[e.get("id")]=e.get("amount")}),jStoreApp.cart.add(a),this.upInfo()}this.setAmount(e);var n=jStoreApp.tree.get(jStoreApp.filter.get("category_id"));return jStoreApp.ga("ec:addProduct",{id:this.get("id"),name:this.get("name"),category:n?jStoreApp.tree.getCategoryTextTree(n.get("id")):"",price:this.get("cost"),quantity:e}),jStoreApp.ga("ec:setAction","add",{list:t.analyticsList}),jStoreApp.ga("send","event",{eventCategory:t.analyticsCategory,eventAction:t.analyticsAction}),!0}return!1},setAmount:function(e){(-1===this.get("balance")||0<this.get("balance")&&this.get("balance")>=e||this.get("amount")>e)&&this.set("amount",jStoreApp.fixMath(e))},setCount:function(e){return 0<e&&(-1===this.get("balance")||0<this.get("balance")&&this.get("balance")>=e||this.get("count")>e)&&this.set("count",jStoreApp.fixMath(e)),!1},countMinus:function(){return this.setCount(jStoreApp.fixMath(this.get("count")-this.get("step")))},countPlus:function(){return this.setCount(jStoreApp.fixMath(this.get("count")+this.get("step")))},amountMinus:function(){return this.setAmount(jStoreApp.fixMath(this.get("amount")-this.get("step")))},amountPlus:function(){return this.setAmount(jStoreApp.fixMath(this.get("amount")+this.get("step")))},parseValue:function(e){return(!0===this.get("dbItem").get("useBalanceForSell")?parseFloat:parseInt)(e)},getCopy:function(){var t={dbItem:this.get("dbItem"),parent:this,amount:this.get("amount"),initModifiers:{}};return this.eachModifiers(function(e){t.initModifiers[e.get("id")]=e.get("amount")}),new r(t)},deleteFromCart:function(e,t){var r=jStoreApp.cart.getByHash(this.getHash());return e=e||1,!!r&&((e=r.get("amount")-e)<=0||t?(r.set({count:1,amount:0}),jStoreApp.cart.remove(r),e=0):(r.set("amount",jStoreApp.fixMath(e)),r.upInfo()),this.set("amount",jStoreApp.fixMath(e)),!0)}});return r}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(5),r(94),r(45),r(3),r(2),r(26)],void 0===(o=function(e,t,r,s,o){var a=e.extend({templateDefault:t,templateSelectorDefault:"#lsp-template-auth",className:"lsp-block-auth",pageName:"userAuth",templateType:"userAuth",setSeoData:!0,getSeoTitle:function(){return jStoreApp.t("Auth")},getSeoDescription:function(){return""},getSeoKeywords:function(){return""},userLoginType:null,events:{"click .lsp-js-submit":"onSubmit","click .lsp-js-logout":"onLogOut"},initialize:function(){1===jStoreApp.restaurant.get("userLoginType")?this.formFields={phone:{type:"phone",required:!0},password:{type:"text",required:!0}}:this.formFields={email:{type:"text",required:!0},password:{type:"text",required:!0}},a.__super__.initialize.apply(this,arguments);var t=this;t.templateCode=s.template(r),t.userLoginType=jStoreApp.restaurant.get("userLoginType"),this.$el.keyup(function(e){13===e.keyCode&&t.submit()})},onSubmit:function(e){e.preventDefault(),this.submit()},submit:function(){var t=this;if(this.validateFormFields()){var e=this.getFormFieldsValues(),r={password:e.password,restaraunt:jStoreApp.restaurant.get("id")};1===t.userLoginType?r.phone=e.phone:r.email=e.email,o.ajax({url:jStoreApp.restaurant.getUrl("UserAuth"),type:"post",async:!1,dataType:"json",data:{json:JSON.stringify(r),lang:window.jStoreAppConfig.lang},success:function(e){e.shouldValidatePhone&&!e.customer?t.$el.empty().append(t.templateCode({urls:{urlLogIn:jStoreApp.user.get("urlLogIn"),urlRememberPass:jStoreApp.user.get("urlRememberPass")}})):t.validateFormAnswer(e)&&(e.customer.authorized=!0,jStoreApp.user.upData(e.customer),jStoreApp.ga("send","event",{eventCategory:"Login",eventAction:"Yes"}),t.successAuth())},error:function(){t.showErrorMessage(jStoreApp.t("common_error"))}})}},onLogOut:function(e){e.preventDefault(),jStoreApp.user.logout()},renderProcess:function(){this.$el.empty().append(this.template({userLoginType:this.userLoginType,urls:{urlRememberPass:jStoreApp.user.get("urlRememberPass"),urlRegister:jStoreApp.user.get("urlRegister")}})),1===this.userLoginType&&(this.input_phone=this.$('input[name="phone"]'),this.input_phone.mask(jStoreApp.restaurant.getPhoneFormat(),{placeholder:"_"}))},successAuth:function(){jStoreApp.user.toPersonal()}});return a}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-form lsp-form-confirm-code">\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Registration\')%></h1>\r\n    <p class="jstore-tag "><%= jStoreApp.t(\'Enter_sms_code\')%></p>\r\n    <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-common-cont lsp-form-error-common-mess"></div>\r\n    <label class="jstore-tag label-row lsp-js-form-field-phoneValidationCode">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'phoneValidationCode\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="phoneValidationCode" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row">\r\n        <div class="jstore-tag label-row-field "><span class="jstore-tag lsp-button lsp-js-submit-code"><%= jStoreApp.t(\'Register\')%></span></div>\r\n    </label>\r\n</div>'},function(e,t,r){var s,o;s=[r(114),r(5),r(115),r(10),r(2),r(3)],void 0===(o=function(e,t,n,i,r,m){return t.extend({order_id:null,register_ga:!1,templateType:"checkOrder",templateSelectorDefault:"#lsp-template-check-order",templateDefault:e,pageName:"checkOrder",setSeoData:!0,getSeoTitle:function(){return jStoreApp.t("Order_status_check")},className:"lsp-block-check-order",events:{"click .lsp-js-submit":"render"},renderProcess:function(){var a=this;return a.$el.empty(),a.order_id?r.ajax({url:jStoreApp.restaurant.getUrl("checkOrder")+"/"+a.order_id,data:{lang:window.jStoreAppConfig.lang},type:"get",dataType:"json",success:function(e){a.register_ga&&a.ga(e.info);var t=a.prepareOrderInfo(e.info);a.$el.append(a.template(t));var r=a.$(".jstore-order-items");if(r.length){var o=new i;m.each(e.info.items,function(e){var s=jStoreApp.dbItems.get(e.id);void 0!==s&&(m.each(e.modifiers,function(t){var r="modifier";m.every(s.get("typeModifiers"),function(e){return e.get("childModifiers").every(function(e){return t.id!==e.get("id")||!(r="type")}),!0}),t.type=r}),o.add({itemId:s.get("id"),name:s.get("name"),category_id:s.getCategory()?s.getCategory().get("id"):null,code:s.get("code"),modifiers:e.modifiers,price:e.sum/e.amount,amount:e.amount}))});var s=new n({el:r[0],model:o,parentView:a,bonusSum:t.discountSum,discountSum:0}).render();a.childViews.push(s)}}}):a.$el.append(a.template({id:null,number:null,customerName:null,customerPhone:null,addressString:null,sum:null,giveChange:null,status:"Received"})),this},prepareOrderInfo:function(a){var e=jStoreApp.DateNow(),t=0,r=0,n=null,s=jStoreApp.restaurant.get("showStatusTracker"),o=parseFloat(jStoreStorage.getItem("successOrderSum",0));m.each(a.payments,function(e){"INET"===e.paymentType.code&&(t+=e.sum),"CASH"===e.paymentType.code&&(r+=e.sum)});var i=[],l=jStoreApp.DateNow();l.setHours(0,0,0,0);var p=!0,c=0;m.each([{time:"confirmTime",status:"Received"},{time:"printTime",status:"In progress"},{time:null,status:"Ready"},{time:"sendTime",status:"On the way"},{time:"actualTime",status:"Delivered"},{time:"cancelTime",status:"Cancel"}],function(e){var t,r="";if(e.time&&null!==a[e.time]){var s=jStoreApp.stringToDate2(a[e.time]);if(s){var o=new Date(s);r=l<o?jStoreApp.formatTime(o):jStoreApp.formatDateTime(o)}}"Unconfirmed"===a.status&&"Received"===e.status||a.status===e.status?(t="Delivered"===e.status?"complete":"active",p=!1):t=p?"complete":"wait","Cancel"===e.status?n=r||null:(r&&c++,i.push({id:e.status,date:r,status:t}))});var d="";a.deliveryDate&&null===a.actualTime&&(d=jStoreApp.formatTime(new Date(jStoreApp.stringToDate2(a.deliveryDate))));var u=[];return a.address&&m.each(["city","street","home","housing","apartment","entrance","floor","doorphone"],function(e){a.address[e]&&u.push(jStoreApp.t("Address_item_"+e+"_before")+a.address[e]+jStoreApp.t("Address_item_"+e+"_after"))}),{id:this.order_id,number:a.number,status:a.status,sum:o,discountSum:t,upDate:jStoreApp.formatDateTime(e),giveChange:o<r?r:0,urls:{checkOrder:jStoreApp.restaurant.documentRoot()+"#!/order/check/"+this.order_id},orderInfo:a,statuses:i,statusesLength:c,deliveryTime:d,cancelTime:n,customer:a.customer,address:a.address,addressString:u.join(", "),customerPhone:a.customer?a.customer.phone:"",customerName:a.customer?a.customer.name+(a.customer.surName?" "+a.customer.surName:""):"",showStatusTracker:s}},ga:function(e){e.items&&m.each(e.items,function(e){var t=jStoreApp.dbItems.get(e.id);if(t){var r=jStoreApp.tree.get(t.get("parentGroup"));jStoreApp.ga("ec:addProduct",{id:e.id,name:e.name,category:r?jStoreApp.tree.getCategoryTextTree(r.get("id")):"",price:e.sum/e.amount,quantity:e.amount})}}),jStoreApp.ga("ec:setAction","purchase",{id:e.orderId,affiliation:"DeliveryWidget",revenue:e.sum,list:jStoreApp.t("Menu")}),jStoreApp.ga("send","event",{eventCategory:"Checkout",eventAction:"Success"})}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(5),r(36),r(2),r(3),r(138)],void 0===(o=function(e,i,l,p,t){var r=e.extend({idOnInitialize:"lsp-block-items-list",categoryID:"00000000-0000-0000-0000-000000000000",tagsKey:"",tags:null,showTags:!1,model:null,detailLink:!1,searchString:!1,template:null,templateDefault:t,templateType:"categories",pageName:"category",setSeoData:!1,_analyticItemIndex:1,analyticsUse:!1,analyticItemIndex:null,analyticsCategory:"",events:{"click .lsp-js-tag-select":"tagSelect"},tagSelect:function(e){if(!this.showTags)return!0;var t=l(e.target);if(t.hasClass("lsp-js-tag-select")||(t=t.closest(".lsp-js-tag-select")),1===t.length){var r=t.data("id");this.tags.toggleTag(r)}},getSeoTitle:function(){return this.model&&1===this.model.length?this.model.models[0].getSeoTitle():jStoreApp.t("Menu")},getSeoDescription:function(){return this.model&&1===this.model.length?this.model.models[0].getSeoDescription():""},getSeoKeywords:function(){return this.model&&1===this.model.length?this.model.models[0].getSeoKeywords():""},initialize:function(){r.__super__.initialize.apply(this,arguments);var e=this;this.analyticsCategory=jStoreApp.tree.getCategoryTextTree(this.categoryID),this.rootCategory=jStoreApp.tree.get(this.categoryID),this.parentView||this.listenTo(jStoreApp.filter,"change:terminal_id",e.render);e.analyticItemIndex=function(){return e._analyticItemIndex++}},renderProcess:function(){var s=this,o=!0,a=!1,n=this.rootCategory?this.rootCategory.get("level"):1,i=0;this._analyticItemIndex=1;var e=jStoreApp.dbItems.getList({searchString:this.searchString});this.showTags&&(s.tags=jStoreApp.dbTags.findTags({searchItems:e,categoryID:"00000000-0000-0000-0000-000000000000"!==this.categoryID&&this.categoryID,key:s.tagsKey}),this.listenTo(this.tags,"change:active",this.render));var l=e.getList({tags:s.tags.length?s.tags.getIDs():null});return this.renderTemplate({title:jStoreApp.t("Menu"),showTags:1<s.tags.length,tags:s.tags.forTemplate(),showEmptyMessage:0===l.length,totalTag:s.tags.get("all")}),l.length&&this.model.each(function(e){if(e.get("isIncludedInMenu")&&e.get("level")===n){i--;var t,r=s.renderModel({collection:l,section:e,level:1,showTags:!1,rootItem:o,tags:s.tags,firstItem:o,lastItem:0===i,showDescription:e.get("id")===s.categoryID,description:e.get("description"),seoText:e.get("seoText"),showSeoText:e.get("id")===s.categoryID});if(0<r.length)for(o=!1,t=0;t<r.length;t++)a=a?(a.after(r[t].$el),r[t].$el):(s.$el.append(r[t].$el),r[t].$(".lsp-js-block-items").last())}}),this},renderModel:function(r){var s=this,t=[],o=[],e=(r=l.extend({level:1,showTags:!1,firstItem:!1,lastItem:!1,showSeoText:!1,seoText:"",showDescription:!1,description:""},r)).section.get("id"),a=r.collection.getList({categoryID:e});if(p.each(r.section.getChildModels(),function(e){if(e.get("isIncludedInMenu")){var t=s.renderModel({collection:r.collection,section:e,level:r.level+1,tags:r.tags,showTags:!1,firstItem:!1,showSeoText:!1});0<t.length&&p.each(t,function(e){o.push(e)})}}),0===o.length&&0===a.length)return[];var n=new i({parentView:s,section:r.section,model:a,className:(1<r.level?"lsp-block-items-list-child":"")+" lsp-block-items-list-level-"+r.level,title:r.section.get("name"),rootItem:r.rootItem,detailLink:s.detailLink,showTags:r.showTags,firstItem:r.firstItem,showSeoText:r.showSeoText,tags:r.tags,showDescription:r.showDescription,description:r.description,seoText:r.seoText,listenTags:1===r.level,analyticsUse:s.analyticsUse,analyticItemIndex:s.analyticItemIndex,analyticsCategory:s.analyticsCategory,analyticsList:jStoreApp.t("Menu"),searchString:s.searchString});return n.render(),s.childViews.push(n),t.push(n),o.length&&p.each(o,function(e){t.push(e)}),t}});return r}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(27)],void 0===(o=function(e){return e.extend({defaults:{card_num:"Discount card number",energy_sum:"Nutritional value",takeaway_date:"Pick up time",delivery_date:"Delivery time",CURR:"USD",Order_sum:"Amount",Discount:"Discount",Bonus_pay:"Bonus payment",Total:"Total",Make_order:"Place the order",cart_top_1:'You\'ve added <span class="jstore-tag lsp-block-cart-total jstore-js-cart-total-count">%totalItems%</span> <span class="jstore-js-cart-total-count-name">%goods%</span> to <a class="jstore-tag" href="%urlsCart%">cart</a>',cart_top_2:'Your order <span class="jstore-tag lsp-block-cart-total jstore-js-cart-total-count">%totalItems%</span> <span class="jstore-js-cart-total-count-name">%goods%</span></span>',goods_1:"item",goods_2:"item",goods_5:"items",gift:"gift!",discount:"discount!",amount:"pcs.",amount_kg:"kg.",Cart:"Cart",Cost:"Amount",Quantity:"Number",Name_Structure:"Name/Content",Order_Sum:"Amount",Order_N:"Order №",Order_Accepted:"Order is placed at the restaurant",Order_Status:"Order status",Order_NF:"Order not found",Order_NEW:"Order confirmed",by_Date:"(status on %upDate%)",up_Status:"Refresh order status",order_Added:"Your order is processed successfully!",order_num:"Number of the order",Select_city:"Choose the city",Checkout_Error:"Order placing error",fail_mess:'<p class="jstore-tag">The problem has occured while processing the payment, although the order is placed at the restaurant. Please, wait for a call or make the call to the restaurant by yourself<b>%deliveryServicePhone%</b></p>',Gift_2u:"A gift for you!",Get:"Get it!",Catch_moment:"Go for it!",Left:"Left",seconds:"seconds",To_cart:"Order",PCS:"pcs.",PCS_KG:"kg.",Proteins:"Protein",Gram:"g.",Fats:"Fats",Carbohydrates:"Carbohydrates",Nutritional_value:"Nutritional value",Weight:"Weigh",CCal:"Ccal.",Additional_ing:"Additional ingridients",min:"min.",max:"max.",Order_Making:"Placing the order",Order_Making_mess:'<p class="jstore-tag">Your order is being processed...</p>',Also_test:"Also you may try",Your_city:"Your city",Is_your_city:"Is your city",Your_orders:"Your orders:",by_summ:"at the amount of",You_havet_ordered:"You haven't ordered anything yet",Hello:"Hello!",Out:"Exit",Hello_:"Hello!",Comein:"Enter",Register:"Register",Pass_Rec:"Recover password",Email:"e-mail",Recovery:"Recover",Registration:"Registration",Forgot_pass:"Forgot the password?",Phone:"Phone",Password:"Password",Password_confirm:"Password confirmation",name:"Name",Your_name:"Your name",Contact_phone:"Contact number",Payment:"Payment",Surr:"Prepare the odd",order_bonus:'I have <span class="jstore-tag lsp-js-maxPaymentSum">%maxPaymentSum%</span> <span class="jstore-tag lsp-js-maxPaymentSumText">%maxPaymentSumText%</span> and I\'d like to pay the part of the order with it.',City:"City",Street:"Street",Home:"House",Housing:"bld./block",Apartment:"Appartments",Entrance:"Entrance",Floor:"Floor",DoorPhone:"Intercom",Delivery:"Delivery",Terminal:"Restaurant",Parson_count:"Number of persons",Where_found:"Where do you know us from?",Other_source:"Another source",Order_comment:"Comment on the order",user_Agree:'I agree to <a class="jstore-tag" href="%userAgreementUrl%" target="_blank">user agreement</a>',Send:"Send",Error:"Error",order_error:'<p class="jstore-tag">Placing the order has failed. Please contact the delivery service by phone <strong class="jstore-tag">%deliveryServicePhone%</strong>.</p>',Auth:"Authentication",Personal:"Account",Your_bonuses:"Your bonuses",info_loading:"information is loading",Change:"Change",Pass_now:"Current password",New_pass:"New order",Pass_confirm:"Password confirmation",Cancel:"Cancel",Save:"Save",required:"THe field is obligatory",email_not_valid:"E-mail is not correct",phone_is_incorrect:"phone number is not correct",common_error:"Widget error, try later",pass_not_match:"Password mismatch",pass_sended:"New password has been sent to your e-mail.",empty_cart:"Your cart is empty",field_is_long:"Field lenght should not exceed %len% symbols",pyment_sum_is_to_low:"Odd amount is less than the order amount",city_is_not_found:"Specified city is not in the list",need_userAgreement_confirm:"To place the order you should accept the user agreement",need_userAgreementRegister_confirm:"To registration on the web site you should accept the user agreement",visitor:"Guest",low_quantity:"The amount given is insufficient",low_quantity_for_1_elem:"Choose the %groupName%",too_much_quantity:"Too many ingridients",Place_order:"Placing the order",Order_info:"Order information",Order_success:"The order is successfully placed",Order_error:"Error while placing the order",Order_status_deliveryDate:"Planned delivery time",Order_status_actualTime:"Delivered",Order_status_cancelTime:"Cancelled",Order_status_confirmTime:"Order confirmed",Order_status_printTime:"Sent to production",Order_status_sendTime:"Driver is on the way",Order_status_Unconfirmed:"Unconfirmed",Order_status_Delivered:"Delivered",Order_status_Received:"Received","Order_status_In progress":"In progress",Order_status_Ready:"Ready","Order_status_On the way":"On the way",Order_status_Active:"Active",Order_status_short_Unconfirmed:"Unconfirmed",Order_status_short_Received:"Received","Order_status_short_In progress":"In progress",Order_status_short_Ready:"Ready","Order_status_short_On the way":"On the way",Order_status_short_Delivered:"Delivered",Order_status_short_Active:"Actual status",Order_Status_Canceled:"Order canceled",Change_by:"Change from",OrderCart:"Order list",Edit:"Edit",Pass_recovery:"Password recovery",As_soon_As:"As soon as possible",Menu:"Menu",Order_status_check:"Order status check",hour_5:"hours",hour_1:"hour",hour_2:"hours",minute_5:"minutes",minute_1:"minute",minute_2:"minutes",second_5:"seconds",second_1:"second",second_2:"seconds",All:"All",bonus_Bonus_5:"bonuses",bonus_Bonus_1:"bonus",bonus_Bonus_2:"bonuses",bonus_Money_5:"USD",bonus_Money_1:"USD",bonus_Money_2:"USD",bonus_Product_5:"pc.",bonus_Product_1:"pc.",bonus_Product_2:"pc.",Delivery_to_House:"Home delivery",Take_from_Rest:"Pick up",Personal_section:"Personal page",Personal_Edit:"Personal page. Edit account",Delivered:"Delivered",User_Registration:"User registration",Your_terminal:"Restaurant",Chose_Your_terminal:"Chose Restaurant",Address_item_city_before:"c. ",Address_item_city_after:"",Address_item_street_before:"",Address_item_street_after:" str.",Address_item_home_before:"",Address_item_home_after:"",Address_item_housing_before:"housing ",Address_item_housing_after:"",Address_item_apartment_before:"ap. ",Address_item_apartment_after:"",Address_item_entrance_before:"ent.",Address_item_entrance_after:"",Address_item_floor_before:"",Address_item_floor_after:" fl.",Address_item_doorphone_before:'doorphone "',Address_item_doorphone_after:'"',Address:"Address",Order_customerName:"Client name",Order_customerPhone:"Phone",cart_item_unActive:"Product is not available in the selected restaurant",cart_item_price_changed:"Price has been changed",has_forbiden_pay_category:"The order contains items prohibited for online payment: %forbiddenItems%",Enter_sms_code:"To complete registration, enter a code we have sent to your phone",phoneValidationCode:"Code",Page_make_order:"Place the order",Post_code:"Post code",Post_address:"Address",Order_card_details:"Enter your card details for payment",pyment_card_not_set:"You have't pass a card details",Bonus_balances:"Your bonuses:",Order_delivery:"The cost of the order will include shipping for the amount of: %summ% %curr%",Order_delivery_continue:"Confirm and continue",Delivery_pay:"Delivery",coupon:"Coupon",Search:"Search",Search_btn:"Search",Products_not_found:"Nothing found",cart_item_out_of_stock:"The product is out of stock",cart_item_out_of_stock_rest:"The product is out of stock in the selected restaurant",cart_item_out_of_stock_balance:"Available for purchase only %balance% %amount%"}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(27)],void 0===(o=function(e){return e.extend({defaults:{card_num:"Номер скидочной карты",energy_sum:"Пищевая ценность",takeaway_date:"Время самовывоза",delivery_date:"Время доставки",CURR:"руб.",Order_sum:"Сумма заказа",Discount:"Скидка",Bonus_pay:"Оплата бонусами",Total:"Итого",Make_order:"Оформить заказ",cart_top_1:"У вас в <a class='jstore-tag' href='%urlsCart%'>корзине</a> <span class='jstore-tag lsp-block-cart-total jstore-js-cart-total-count'>%totalItems%</span> <span class='jstore-tag lsp-block-cart-total-name jstore-js-cart-total-count-name'>%goods%</span>",cart_top_2:"У вас в корзине <span class='jstore-tag lsp-block-cart-total jstore-js-cart-total-count'>%totalItems%</span> <span class='jstore-js-cart-total-count-name'>%goods%</span></span>",goods_1:"товар",goods_2:"товара",goods_5:"товаров",gift:"подарок!",discount:"скидка!",amount:"шт.",amount_kg:"кг.",Cart:"Корзина",Cost:"Стоимость",Quantity:"Количество",Name_Structure:"Название/Состав",Order_Sum:"Сумма заказа",Order_N:"Заказ №",Order_Accepted:"Заказ принят рестораном",Order_Status:"Статус заказа",Order_NF:"Заказ не найден",Order_NEW:"Заказ принят",by_Date:"(по состоянию на %upDate%)",up_Status:"Обновить статус заказа",order_Added:"Ваш заказ успешно обработан!",order_num:"Номер заказа",Select_city:"Выберите город",Checkout_Error:"Ошибка при оформлении заказа",fail_mess:"<p class='jstore-tag'>Произошла проблема при оплате, но мы передали Ваш заказ в ресторан. Ожидайте звонка или позвоните сами по телефону <b>%deliveryServicePhone%</b></p>",Gift_2u:"Вам подарок!",Get:"Получить!",Catch_moment:"Лови момент!",Left:"Осталось",seconds:"секунд",To_cart:"В корзину",PCS:"шт.",PCS_KG:"кг.",Proteins:"Белки",Gram:"г.",Fats:"Жиры",Carbohydrates:"Углеводы",Nutritional_value:"Пищевая ценность",Weight:"Вес",CCal:"Ккал.",Additional_ing:"Дополнительные ингредиенты",min:"мин.",max:"макс.",Order_Making:"Оформление заказа",Order_Making_mess:"<p class='jstore-tag'>Ваш заказ оформляется...</p>",Also_test:"Также попробуйте",Your_city:"Ваш город",Is_your_city:"Ваш город",Your_orders:"Ваши заказы:",by_summ:"на сумму",You_havet_ordered:"Пока вы ничего не заказали",Hello:"Здравствуйте",Out:"Выйти",Hello_:"Здравствуйте!",Comein:"Войти",Register:"Зарегистрироваться",Pass_Rec:"Восстановление пароля",Email:"Электронная почта",Recovery:"Восстановить",Registration:"Регистрация",Forgot_pass:"Забыли пароль?",Phone:"Телефон",Password:"Пароль",Password_confirm:"Подтверждение пароля",name:"Имя",Your_name:"Ваше имя",Contact_phone:"Контактный телефон",Payment:"Оплата",Surr:"Сдача с",order_bonus:"У меня есть <span class='jstore-tag lsp-js-maxPaymentSum'>%maxPaymentSum%</span> <span class='jstore-tag lsp-js-maxPaymentSumText'>%maxPaymentSumText%</span> и я хочу ими оплатить часть заказа.",City:"Город",Street:"Улица",Home:"Дом",Housing:"Корпус/строение",Apartment:"Квартира",Entrance:"Подъезд",Floor:"Этаж",DoorPhone:"Домофон",Delivery:"Доставка",Terminal:"Ресторан",Parson_count:"Количество персон",Where_found:"Откуда Вы о нас узнали",Other_source:"Другой источник",Order_comment:"Комментарий к заказу",user_Agree:"я согласен с <a class='jstore-tag' href='%userAgreementUrl%' target='_blank'>пользовательским соглашением</a>",Send:"Отправить",Error:"Ошибка",order_error:"<p class='jstore-tag'>Не удалось отправить заказ в ресторан, пожалуйста позвоните в службу доставки по телефону <strong class='jstore-tag'>%deliveryServicePhone%</strong>.</p>",Auth:"Авторизация",Personal:"Личный кабинет",Your_bonuses:"Ваши бонусы",info_loading:"информация загружается",Change:"Изменить",Pass_now:"Текущий пароль",New_pass:"Новый пароль",Pass_confirm:"Подтверждение пароля",Cancel:"Отмена",Save:"Сохранить",required:"Поле обязательно для заполнения",email_not_valid:"Email некорректен",phone_is_incorrect:"Телефон некорректен",common_error:"Ошибка виджета. Попробуйте позже",pass_not_match:"Пароли не совпадают",pass_sended:"На Ваш Email был выслан новый пароль.",empty_cart:"Ваша корзина пуста",field_is_long:"Длина поля не должна составлять более %len% символов",pyment_sum_is_to_low:"Сумма для сдачи меньше суммы заказа",city_is_not_found:"Указаный город не найден в системе",need_userAgreement_confirm:"Для совершения заказа Вы должны принять пользовательское соглашение",need_userAgreementRegister_confirm:"Для регистрации Вы должны принять пользовательское соглашение",visitor:"Посетитель",low_quantity:"Указанного количества недостаточно",low_quantity_for_1_elem:"Выберите %groupName%",too_much_quantity:"Слишком большое количество ингридиентов",Place_order:"Оформление заказа",Order_info:"Информация о заказе",Order_success:"Заказ успешно оформлен",Order_error:"Ошибка в оформлении заказа",Order_status_deliveryDate:"Планируемое время доставки",Order_status_Unconfirmed:"Ожидает подтверждения",Order_status_Received:"Получен","Order_status_In progress":"Готовится",Order_status_Ready:"Приготовлен","Order_status_On the way":"В пути",Order_status_Delivered:"Доставлен",Order_status_Active:"Текущий статус",Order_status_short_Unconfirmed:"Ожидает подтверждения",Order_status_short_Received:"Получен","Order_status_short_In progress":"Готовится",Order_status_short_Ready:"Приготовлен","Order_status_short_On the way":"В пути",Order_status_short_Delivered:"Доставлен",Order_status_short_Active:"Текущий статус",Order_Status_Canceled:"Заказ отменён",Change_by:"Сдача с",OrderCart:"Состав заказа",Edit:"Редактирование",Pass_recovery:"Восстановление пароля",As_soon_As:"Как можно раньше",Menu:"Меню",Order_status_check:"Проверка статуса заказа",hour_5:"часов",hour_1:"чaс",hour_2:"часа",minute_5:"минут",minute_1:"минута",minute_2:"минуты",second_5:"секунд",second_1:"секунда",second_2:"сукунды",All:"Все",bonus_Bonus_5:"бонусов",bonus_Bonus_1:"бонус",bonus_Bonus_2:"бонуса",bonus_Money_5:"руб.",bonus_Money_1:"руб.",bonus_Money_2:"руб.",bonus_Product_5:"шт.",bonus_Product_1:"шт.",bonus_Product_2:"шт.",Delivery_to_House:"Доставка на дом",Take_from_Rest:"Забрать из ресторана",Personal_section:"Персональный раздел",Personal_Edit:"Персональный раздел. Редактирование аккаунта",Delivered:"Доставлен",User_Registration:"Регистрация пользователя",Your_terminal:"Ресторан",Chose_Your_terminal:"Выберите ресторан",Address_item_city_before:"г. ",Address_item_city_after:"",Address_item_street_before:"ул. ",Address_item_street_after:"",Address_item_home_before:"д. ",Address_item_home_after:"",Address_item_housing_before:"стр. ",Address_item_housing_after:"",Address_item_apartment_before:"ап. ",Address_item_apartment_after:"",Address_item_entrance_before:"подъезд №",Address_item_entrance_after:"",Address_item_floor_before:"",Address_item_floor_after:" этаж",Address_item_doorphone_before:'домофон "',Address_item_doorphone_after:'"',Address:"Адрес",Order_customerName:"Имя клиента",Order_customerPhone:"Телефон",cart_item_unActive:"Товар не доступен в выбранном ресторане",cart_item_price_changed:"Цена на товар изменилась",has_forbiden_pay_category:"Заказ содержит товары, запрещённые для оплаты онлайн: %forbiddenItems%",Enter_sms_code:"Для завершения регистрации, введите код, присланный вам в sms",phoneValidationCode:"Код",Page_make_order:"Оформить заказ",Post_code:"Почтовый индекс",Post_address:"Адрес",Order_card_details:"Введите реквизиты карты для оплаты",pyment_card_not_set:"Вы не ввели реквизитов карты",Bonus_balances:"Бонусные балансы:",Order_delivery:"В стоимость заказа будет включена доставка на сумму: %summ% %curr%",Order_delivery_continue:"Подтвердить и продолжить",Delivery_pay:"Доставка",coupon:"Купон",Search:"Поиск",Search_btn:"Искать",Products_not_found:"Ничего не найдено",cart_item_out_of_stock:"Товара нет в наличии",cart_item_out_of_stock_rest:"Товара нет в наличии в выбранном ресторане",cart_item_out_of_stock_balance:"Доступно для покупки только %balance% %amount%"}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(27)],void 0===(o=function(e){return e.extend({defaults:{card_num:"Номер картки знижок",energy_sum:"Харчова цінність",takeaway_date:"Час самовивозу",delivery_date:"Час доставки",CURR:"грн.",Order_sum:"Сума замовлення",Discount:"Знижка",Bonus_pay:"Оплата бонусами",Total:"Разом",Make_order:"Оформити замовлення",cart_top_1:'У вас в <a class="jstore-tag" href="%urlsCart%">корзині</a> <span class="jstore-tag lsp-block-cart-total jstore-js-cart-total-count">%totalItems%</span> <span class="jstore-tag lsp-block-cart-total-name jstore-js-cart-total-count-name">%goods%</span>',cart_top_2:'У вас в кошику  <span class="jstore-tag lsp-block-cart-total jstore-js-cart-total-count">%totalItems%</span> <span class="jstore-js-cart-total-count-name">%goods%</span></span>',goods_1:"товар",goods_2:"товара",goods_5:"товарів",gift:"подарунок!",discount:"знижка!",amount:"од.",amount_kg:"кг.",Cart:"Кошик",Cost:"Вартість",Quantity:"Кількість",Name_Structure:"Назва/Склад",Order_Sum:"Сума замовлення",Order_N:"Замовлення №",Order_Accepted:"Замовлення прийняте рестораном",Order_Status:"Статус замовлення",Order_NF:"Замовлення не знайдене",Order_NEW:"Замовлення прийняте",by_Date:"(станом на %upDate%)",up_Status:"Оновити статус замовлення",order_Added:"Ваше замовлення успішно опрацьоване!",order_num:"Номер замовлення",Select_city:"Виберіть місто",Checkout_Error:"Помилка при оформленні замовлення",fail_mess:'<p class="jstore-tag">Виникла проблема при оплаті, але ми передали Ваше замовлення в ресторан. Очікуйте дзвінка або перетелефонуйте за номером <b>%deliveryServicePhone%</b></p>',Gift_2u:"Вам подарунок!",Get:"Отримати!",Catch_moment:"Лови момент!",Left:"Залишилось",seconds:"секунд",To_cart:"В кошик",PCS:"од.",PCS_KG:"кг.",Proteins:"Білки",Gram:"г.",Fats:"Жири",Carbohydrates:"Вуглеводи",Nutritional_value:"Харчова цінність",Weight:"Вага",CCal:"Ккал.",Additional_ing:"Додаткові інгредієнти",min:"мін.",max:"макс.",Order_Making:"Оформлення замовлення",Order_Making_mess:'<p class="jstore-tag">Ваше замовлення оформляється...</p>',Also_test:"Також спробуйте",Your_city:"Ваше місто",Is_your_city:"Ваше місто",Your_orders:"Ваші замовлення:",by_summ:"на суму",You_havet_ordered:"Поки ви нічого не замовили",Hello:"Доброго дня",Out:"Вийти",Hello_:"Доброго дня!",Comein:"Зайти",Register:"Зареєструватися",Pass_Rec:"Відновлення пароля",Email:"Електронна пошта",Recovery:"Відновити",Registration:"Реєстрація",Forgot_pass:"Забули пароль?",Phone:"Телефон",Password:"Пароль",Password_confirm:"Підтвердження паролю",name:"Ім'я",Your_name:"Ваше ім'я",Contact_phone:"Контактний телефон",Payment:"Оплата",Surr:"Решта з",order_bonus:'В мене є <span class="jstore-tag lsp-js-maxPaymentSum">%maxPaymentSum%</span> <span class="jstore-tag lsp-js-maxPaymentSumText">%maxPaymentSumText%</span> і я хочу оплатити ними частину замовлення.',City:"Місто",Street:"Вулиця",Home:"Будинок",Housing:"Корпус/будівля",Apartment:"Квартира",Entrance:"Під'їзд",Floor:"Поверх",DoorPhone:"Домофон",Delivery:"Доставка",Terminal:"Ресторан",Parson_count:"Кількість персон",Where_found:"Звідки Ви про нас взнали",Other_source:"Інше джерело",Order_comment:"Коментар до виклику",user_Agree:'я погоджуюсь з  <a class="jstore-tag" href="%userAgreementUrl%" target="_blank">угодою користувача</a>',Send:"Відправити",Error:"Помилка",order_error:'<p class="jstore-tag">Не вдалось відпрвити замовлення в ресторан, будь ласка перетелефонуйте в службу доставки  <strong class="jstore-tag">%deliveryServicePhone%</strong>.</p>',Auth:"Авторизація",Personal:"Особистий кабінет",Your_bonuses:"Ваші бонуси",info_loading:"інформація загружається",Change:"Змінити",Pass_now:"Поточний пароль",New_pass:"Новий пароль",Pass_confirm:"Підтвердження паролю",Cancel:"Відміна",Save:"Зберегти",required:"Поле обов'язкове для заповнення",email_not_valid:"Email некоректний",phone_is_incorrect:"Телефон некоректний",common_error:"Помилка віджету. Спробуйте пізніше",pass_not_match:"Паролі не співпадають",pass_sended:"На Ваш Email було відправлено новий пароль",empty_cart:"Ваш кошик пустий",field_is_long:"Довжина поля не повинна складати більше %len% символів",pyment_sum_is_to_low:"Сума для решти менша суми замовлення",city_is_not_found:"Вказане місто не знайдене в системі",need_userAgreement_confirm:"Для створення замовлення Ви повинні прийняти угоду користувача",need_userAgreementRegister_confirm:"Для реєстрації Вам потрібно прийняти угоду користувача",visitor:"Відвідувач",low_quantity:"Вказаної кількості недостатньо",low_quantity_for_1_elem:"Виберіть %groupName%",too_much_quantity:"Надто велика кількість інгредієнтів",Place_order:"Оформлення замовлення",Order_info:"Інформація про замовлення",Order_success:"Замовлення успішно виконане",Order_error:"Помилка в оформленні замовлення",Order_status_deliveryDate:"Запланований час доставки",Order_status_Unconfirmed:"Очікує підтвердження",Order_status_Received:"Отриманий","Order_status_In progress":"Готується",Order_status_Ready:"Приготований","Order_status_On the way":"В дорозі",Order_status_Delivered:"Доставлений",Order_status_Active:"Поточний статус",Order_status_short_Unconfirmed:"Очікує підтвердження",Order_status_short_Received:"Отримане","Order_status_short_In progress":"Готується",Order_status_short_Ready:"Приготований","Order_status_short_On the way":"В дорозі",Order_status_short_Delivered:"Доставлений",Order_status_short_Active:"Поточний статус",Order_Status_Canceled:"Замовлення відмінено",Change_by:"Решта з",OrderCart:"Склад замовлення",Edit:"Редагування",Pass_recovery:"Відновлення паролю",As_soon_As:"Як можна раніше",Menu:"Меню",Order_status_check:"Перевірка статусу замовлення",hour_5:"годин",hour_1:"година",hour_2:"години",minute_5:"хвилин",minute_1:"хвилина",minute_2:"хвилини",second_5:"секунд",second_1:"секунда",second_2:"секунди",All:"Усі",bonus_Bonus_5:"бонусів",bonus_Bonus_1:"бонус",bonus_Bonus_2:"бонусу",bonus_Money_5:"грн.",bonus_Money_1:"грн.",bonus_Money_2:"грн.",bonus_Product_5:"од.",bonus_Product_1:"од.",bonus_Product_2:"од.",Delivery_to_House:"Доставка додому",Take_from_Rest:"Забрати з ресторану",Personal_section:"Персональний розділ",Personal_Edit:"Персональний розділ. Редагування акаунту",Delivered:"Доставлено",User_Registration:"Реєстрація користувача",Your_terminal:"Ресторан",Chose_Your_terminal:"Виберіть ресторан",Address_item_city_before:"м.",Address_item_city_after:"",Address_item_street_before:"вул.",Address_item_street_after:"",Address_item_home_before:"д.",Address_item_home_after:"",Address_item_housing_before:"буд.",Address_item_housing_after:"",Address_item_apartment_before:"кв.",Address_item_apartment_after:"",Address_item_entrance_before:"під'їзд №",Address_item_entrance_after:"",Address_item_floor_before:"",Address_item_floor_after:" поверх ",Address_item_doorphone_before:'домофон "',Address_item_doorphone_after:'"',Address:"Адреса",Order_customerName:"Ім'я клієнта",Order_customerPhone:"Телефон",cart_item_unActive:"Товар не доступний в вибраному ресторані",cart_item_price_changed:"Ціна на товар змінилась",has_forbiden_pay_category:"Замовлення містить товари, які заборонені до онлайн оплати: %forbiddenItems%",Enter_sms_code:"Для завершення реєстрації, введіть код, відправлений Вам в sms",phoneValidationCode:"Код",Page_make_order:"Оформити замовлення",Post_code:"Поштовий індекс",Post_address:"Адреса",Order_card_details:"Введіть реквізити картки для оплати",pyment_card_not_set:"Ви не ввели реквізити картки",Bonus_balances:"Бонусні баланси:",Order_delivery:"У вартість замовлення буде включена доставка на суму: %summ% %curr%",Order_delivery_continue:"Підтвердити та продовжити",Delivery_pay:"Доставка",coupon:"Купон",Search:"Пошук",Search_btn:"Искать",Products_not_found:"Ничего не знайдено",cart_item_out_of_stock:"Товару немає в наявності",cart_item_out_of_stock_rest:"Товару немає в наявності в обраному ресторані",cart_item_out_of_stock_balance:"Доступно для покупки тільки %balance% %amount%"}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(38),r(52),r(4),r(2),r(3)],void 0===(o=function(e,t,r,s,o){return r.View.extend({events:{"click .lsp-js-logout":"onLogOut"},initialize:function(){this.$el.data("template-auth")?this.templateAuth=o.template(s("#"+this.$el.data("template-auth")).html()):this.templateAuth=o.template(e),this.$el.data("template-status")?this.templateNotAuth=o.template(s("#"+this.$el.data("template-status")).html()):this.templateNotAuth=o.template(t),this.model.on("change delete update reset",this.render,this)},render:function(){this.model.isAuthorised()?this.$el.empty().html(this.templateAuth(this.model.toJSON())):this.$el.empty().html(this.templateNotAuth(this.model.toJSON()))}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-block-userinfo-inner">\r\n    <div class="jstore-tag lsp-block-userinfo-appeal"><%= jStoreApp.t(\'Hello_\')%></div>\r\n    <a href="<%= urlLogIn %>" class="jstore-tag lsp-block-userinfo-goto-link"><%= jStoreApp.t(\'Comein\')%></a> <a href="<%= urlRegister %>" class="jstore-tag lsp-block-userinfo-goto-link"><%= jStoreApp.t(\'Register\')%></a>\r\n</div>'},function(e,t,r){var s,o;s=[r(5),r(54),r(55),r(7),r(2),r(3),r(6)],void 0===(o=function(e,t,r,s,o,a,n){var i=e.extend({templateDefault:t,events:{"click .lsp-js-changeCityForm":"changeCityForm","click .lsp-js-cityChange":"cityChange"},initialize:function(){return i.__super__.initialize.apply(this,arguments),this.listenTo(jStoreApp.DeliveryCities,"change",this.render),this.listenTo(jStoreApp.filter,"change:city_default change:city_set_in_order",this.render),this},renderProcess:function(){if(!jStoreApp.filter.get("city_default")){var e={activeCity:jStoreApp.DeliveryCities.getActiveCity(),possiblyCity:null};this.$el.empty().html(this.template(e)),jStoreApp.attachEvent("restInfoRendered",e)}},changeCityForm:function(e){e.preventDefault(),new s({}).render(new r({model:jStoreApp.restaurant}))},cityChange:function(e){e.preventDefault();var t=o(e.target).data("id");t&&jStoreApp.DeliveryCities.isCity(t)&&jStoreApp.filter.changeCity(t,!0)}});return i}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-block-restinfo-inner">\r\n    <div class="jstore-tag city-select-c">\r\n        <% if(activeCity){ %>\r\n            <%= jStoreApp.t(\'Your_city\')%>:&nbsp;&nbsp;<a class="jstore-tag cityName lsp-js-changeCityForm"><%= activeCity.name %></a>\r\n        <% }else{ %>\r\n            <%= jStoreApp.t(\'Is_your_city\')%> <%= possiblyCity.name %>? <a data-id="<%= possiblyCity.id %>" class="jstore-tag lsp-js-cityChange">Да</a> / <a class="jstore-tag lsp-js-changeCityForm">Нет</a>\r\n        <% } %>\r\n    </div>\r\n</div>'},function(e,t,r){var s,o;s=[r(56),r(5),r(6),r(2),r(3)],void 0===(o=function(e,t,r,s,o){return t.extend({templateType:"cityChange",templateSelectorDefault:"#lsp-template-city-change",templateDefault:e,idOnInitialize:"lsp-block-city-change",events:{"click .lsp-js-cityChange":"cityChange"},renderProcess:function(){return this.$el.empty().append(this.template({cities:jStoreApp.DeliveryTerminals.getCitiesList()})),this},cityChange:function(e){e.preventDefault();var t=s(e.target).data("id");t&&(jStoreApp.DeliveryCities.isCity(t)&&jStoreApp.filter.changeCity(t,!0),this.remove())}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag more">\r\n    <div class="jstore-tag info">\r\n        <div class="jstore-tag h1 title"><%= jStoreApp.t(\'Select_city\')%></div>\r\n        <div class="jstore-tag cityList">\r\n            <% _.each(cities, function(city){ %>\r\n            <span data-id="<%= city.id %>" class="jstore-tag lsp-js-cityChange cityItem"><%= city.name %></span>\r\n            <% }); %>\r\n        </div>\r\n    </div>\r\n    <div class="jstore-tag cf"></div>\r\n</div>'},function(e,t){e.exports='<div class="jstore-tag lsp-popup-cont lsp-js-popup-cont <%= innerClass %>">\r\n    <div class="jstore-tag lsp-popup-inner lsp-js-popup-inner"></div>\r\n    <span class="jstore-tag lsp-popup-cross lsp-js-popup-close"></span>\r\n</div>\r\n<span class="jstore-tag lsp-popup-placeholder lsp-js-popup-close"></span>'},function(e,t){e.exports='<div class="jstore-tag lsp-block-cart-item-row lsp-block-cart-item-row-name">\r\n    <b class="jstore-tag lsp-block-cart-item-name lsp-js-item-show"><%= name %><span class="lsp-js-modifier-tail"><%= typesTail %></span></b>\r\n    <span class="jstore-tag lsp-block-cart-item-discount <% if(discount === 0){%>lsp-js-hidden<%}%>">\r\n        <% if(discount >= (amount * price)){ %>\r\n        <%= jStoreApp.t(\'gift\')%>\r\n        <% }else if(discount){ %>\r\n        <%= jStoreApp.t(\'discount\')%>\r\n        <% } %>\r\n    </span>\r\n</div>\r\n<div class="jstore-tag lsp-block-cart-item-row lsp-block-cart-item-row-subname">\r\n    <em class="jstore-tag lsp-block-cart-item-amount-c">\r\n        <input class="jstore-tag lsp-block-cart-item-amount-c-count" name="count" value="<%= amount %>">\r\n        <em class="jstore-tag lap-block-cart-item-amount-c-type"><%= jStoreApp.t(useBalanceForSell ? \'amount_kg\' : \'amount\')%></em>\r\n    </em>\r\n    <strong class="jstore-tag lsp-block-cart-item-price-c">\r\n        <em class="jstore-tag lsp-block-cart-item-price-c-count lsp-js-price"><%= price %></em>\r\n        <em class="jstore-tag lsp-block-cart-item-price-c-type"><%= jStoreApp.getCurrency()%></em>\r\n    </strong>\r\n    <span class="jstore-tag lsp-block-cart-item-pmc">\r\n        <% if(active){ %>\r\n        <span class="jstore-tag lsp-button-minus lsp-button-minus lsp-js-item-minus">&#8211;</span>\r\n        <span class="jstore-tag lsp-button-plus lsp-js-item-plus">+</span>\r\n        <% }else{ %>\r\n        <span class="jstore-tag lsp-button-cross lsp-button-red lsp-js-item-delete">x</span>\r\n        <% } %>\r\n    </span>\r\n    <div class="jstore-tag lsp-block-cart-modifiers lsp-js-cart-modifiers"></div>\r\n</div>\r\n<div class="jstore-tag lsp-help-info lsp-js-help-info">\r\n<% if(!active){ %>\r\n    <%= not_active_message %>\r\n<% } else if(priceChanged){ %>\r\n    <%= jStoreApp.t(\'cart_item_price_changed\') %>\r\n<% } %>\r\n</div>'},function(e,t){e.exports='<span class="jstore-tag lsp-cart-item-modifier-c">\r\n    <span class="jstore-tag lsp-cart-item-modifier-c-amount"><%= amount %></span>\r\n    <span class="jstore-tag lsp-cart-item-modifier-c-dupl">x</span>\r\n    <span class="jstore-tag lsp-cart-item-modifier-c-name"><%= name %></span>\r\n</span>'},function(e,t){e.exports='<div class="jstore-tag lsp-popup-item-image-c">\r\n    <div class="jstore-tag lsp-popup-item-image">\r\n        <% if(tags.length){ %><div class="jstore-tag lsp-block-item-tags"><% _.each(tags, function(tag){ %>\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-block-item-tag lsp-block-item-tag-<%= tag.translitName %>" title="<%= tag.name %>"></span>\x3c!--\r\n        --\x3e<% }); %></div><% } %>\r\n        <img class="jstore-tag" title="<%= name %>"\r\n             data-jstore-src="largeImageUrl">\r\n    </div>\r\n</div>\r\n\r\n<div class="jstore-tag lsp-popup-item-description-block">\r\n    <div class="jstore-tag lsp-popup-item-name"\r\n         data-jstore-value="name"></div>\r\n    <div class="jstore-tag lsp-popup-item-description"\r\n        data-jstore-value="description"></div>\r\n    <div class="jstore-tag lsp-js-typeModifiers-block">\r\n        <div class="jstore-tag lsp-modifier-group lsp-js-types-container"></div>\r\n    </div>\r\n\r\n    <div class="jstore-tag lsp-popup-item-price-c">\r\n        <div class="jstore-tag lsp-popup-item-count-c">\r\n            <span class="jstore-tag lsp-button-minus lsp-js-popup-item-minus">&#8211;</span>\r\n            <input class="jstore-tag lsp-popup-count lsp-js-popup-total-count" name="count"\r\n                   data-jstore-value="count">\r\n            <span class="jstore-tag lsp-button-plus lsp-js-popup-item-plus">+</span>\r\n            <em class="jstore-tag lsp-popup-count-type"><%= jStoreApp.t(useBalanceForSell ? \'PCS_KG\' : \'PCS\')%></em>\r\n        </div>\r\n        <strong class="jstore-tag lsp-popup-price-total"\r\n                data-jstore-value="jStoreApp.fixMath(count * cost)"></strong> <em class="jstore-tag lsp-popup-price-total-valute"><%= jStoreApp.getCurrency()%></em>\r\n        <span class="jstore-tag lsp-popup-item-tocart-button lsp-button lsp-js-popup-tocart" data-jstore-class=\'{\r\n    "jstore-out-of-stock" : balance === 0\r\n}\'><%= jStoreApp.t(\'To_cart\')%></span>\r\n        <div class="jstore-tag jstore-share js-share" data-services="vkontakte,facebook,odnoklassniki,gplus,twitter"></div>\r\n    </div>\r\n\r\n    <div class="jstore-tag lsp-popup-energy-cont"\r\n         data-jstore-if="fiberAmount || fatAmount || carbohydrateAmount || carbohydrateAmount || energyAmount || weight">\r\n        <div class="jstore-tag lsp-popup-energy-title"><%= jStoreApp.t(\'energy_sum\') %>:</div>\r\n        <table class="jstore-tag lsp-popup-energy-table">\r\n            <tbody>\r\n                <tr class="jstore-tag lsp-detail-table-fiberAmount"\r\n                    data-jstore-if="fiberAmount">\r\n                    <td class="jstore-tag lsp-popup-table-property-name"><%= jStoreApp.t(\'Proteins\')%><span class="jstore-tag lsp-popup-table-property-enum">, <%= jStoreApp.t(\'Gram\')%></span></td>\r\n                    <td class="jstore-tag lsp-popup-table-property-value">\r\n                        <span class="jstore-tag lsp-popup-table-property-value lsp-js-item-fiberAmount-value"\r\n                              data-jstore-value="fiberAmount"></span>\r\n                    </td>\r\n                </tr>\r\n                <tr class="jstore-tag lsp-detail-table-fatAmount"\r\n                    data-jstore-if="fatAmount">\r\n                    <td class="jstore-tag lsp-popup-table-property-name"><%= jStoreApp.t(\'Fats\')%><span class="jstore-tag lsp-popup-table-property-enum">, <%= jStoreApp.t(\'Gram\')%></span></td>\r\n                    <td class="jstore-tag lsp-popup-table-property-value">\r\n                        <span class="jstore-tag lsp-popup-table-property-value lsp-js-item-fatAmount-value"\r\n                              data-jstore-value="fatAmount"></span>\r\n                    </td>\r\n                </tr>\r\n                <tr class="jstore-tag lsp-detail-table-carbohydrateAmount"\r\n                    data-jstore-if="carbohydrateAmount">\r\n                    <td class="jstore-tag lsp-popup-table-property-name"><%= jStoreApp.t(\'Carbohydrates\')%><span class="jstore-tag lsp-popup-table-property-enum">, <%= jStoreApp.t(\'Gram\')%></span></td>\r\n                    <td class="jstore-tag lsp-popup-table-property-value">\r\n                        <span class="jstore-tag lsp-popup-table-property-value  lsp-js-item-carbohydrateAmount-value"\r\n                              data-jstore-value="carbohydrateAmount"></span>\r\n                    </td>\r\n                </tr>\r\n                <tr class="jstore-tag lsp-detail-table-energyAmount"\r\n                    data-jstore-if="energyAmount">\r\n                    <td class="jstore-tag lsp-popup-table-property-name"><%= jStoreApp.t(\'Nutritional_value\')%><span class="jstore-tag lsp-popup-table-property-enum">, <%= jStoreApp.t(\'CCal\')%></span></td>\r\n                    <td class="jstore-tag lsp-popup-table-property-value">\r\n                        <span class="jstore-tag lsp-popup-table-property-value lsp-js-item-energyAmount-value"\r\n                              data-jstore-value="energyAmount"></span>\r\n                    </td>\r\n                </tr>\r\n                <tr class="jstore-tag lsp-detail-table-weight"\r\n                    data-jstore-if="weight">\r\n                    <td class="jstore-tag lsp-popup-table-property-name"><%= jStoreApp.t(\'Weight\')%><span class="jstore-tag lsp-popup-table-property-enum">, <%= jStoreApp.t(\'Gram\')%></span></td>\r\n                    <td class="jstore-tag lsp-popup-table-property-value">\r\n                        <span class="jstore-tag lsp-popup-table-property-value lsp-js-item-weight-value"\r\n                              data-jstore-value="weight"></span>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <div class="jstore-tag lsp-modifiers-container lsp-js-modifiers-block">\r\n        <div class="jstore-tag lsp-popup-modifier-title"><%= jStoreApp.t(\'Additional_ing\')%>:</div>\r\n        <div class="jstore-tag lsp-modifier-group lsp-js-modifiers-container"></div>\r\n    </div>\r\n\r\n    <div class="jstore-tag lsp-block-additional-text"\r\n         data-jstore-if="seoText"\r\n         data-jstore-value="seoText"\r\n        ></div>\r\n</div>'},function(e,t){e.exports='<span class="jstore-tag lsp-modifier-name-c">\r\n    <span class="jstore-tag lsp-modifier-name"><%= name %></span>\x3c!--\r\n    --\x3e<span class="jstore-tag lsp-modifer-minmax-c"><%\r\n        var minAmount = this.model.get(\'minAmount\');\r\n        if(minAmount > 0){\r\n        %><span class="jstore-tag lsp-modifier-minmax-delimeter">,</span><span class="jstore-tag lsp-modifer-min-c">\x3c!--\r\n            --\x3e<span class="jstore-tag lsp-modifier-minmax-title"><%= jStoreApp.t(\'min\')%></span>\x3c!--\r\n            --\x3e<span class="jstore-tag lsp-modifier-minmax-value"><%= minAmount %></span>\x3c!--\r\n        --\x3e</span><%\r\n        }\r\n        var maxAmount = this.model.get(\'maxAmount\');\r\n        if(maxAmount > 0){\r\n        %><span class="jstore-tag lsp-modifier-minmax-delimeter">,</span>\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-modifier-min-c">\x3c!--\r\n            --\x3e<span class="jstore-tag lsp-modifier-minmax-title"><%= jStoreApp.t(\'max\')%></span>\x3c!--\r\n            --\x3e<span class="jstore-tag lsp-modifier-minmax-value"><%= maxAmount %></span>\x3c!--\r\n        --\x3e</span><%\r\n        }\r\n    %></span>\x3c!--\r\n--\x3e</span>\x3c!--\r\n--\x3e<span class="jstore-tag lsp-modifer-desc">\x3c!--\r\n    --\x3e<span class="jstore-tag lsp-modifier-price-c">\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-modifier-price"><%= this.model.getPrice() %></span>\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-modifier-price-type"><%= jStoreApp.getCurrency()%></span>\x3c!--\r\n    --\x3e</span>\x3c!--\r\n    --\x3e<em class="jstore-tag lsp-modifier-amont-c">\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-button-minus lsp-js-modifier-minus">&#8211;</span>\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-js-modifier-amount lsp-modifier-amont"><%= amount %></span>\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-button-plus lsp-js-modifier-plus">+</span>\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-modifier-amont-type"><%= jStoreApp.t(\'PCS\')%></span>\x3c!--\r\n    --\x3e</em>\x3c!--\r\n    --\x3e<span class="jstore-tag lsp-modifier-summ-c">\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-js-modifier-summ-value lsp-modifier-summ-value"><%= jStoreApp.fixMath(amount * this.model.getPrice()) %></span>\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-modifier-summ-type"><%= jStoreApp.getCurrency()%></span>\x3c!--\r\n    --\x3e</span>\x3c!--\r\n--\x3e</span>\x3c!--\r\n--\x3e<% if(error){ %><span class="jstore-tag lsp-js-modifer-error lsp-modifer-error"><%= error %></span><% } %>'},function(e,t,r){var s,o;s=[r(39),r(63),r(4),r(2),r(3)],void 0===(o=function(s,e,t,r,o){return t.View.extend({template:null,tagName:"fieldset",className:"jstore-tag lsp-modifier-group",events:{},initialize:function(){this.model.on("change",this.item_update,this),this.template=o.template(e)},render:function(){var r=this,e=this.model.get("childModifiers");return this.$el.html(this.template(this.model.attributes)),o.each(e.models,function(e){var t=new s({model:e});r.$el.find(".lsp-modifer-group-items").append(t.render().$el)}),this.item_update(),this},item_update:function(){return this.$(".lsp-js-modifer-group-error").html(this.model.get("error")),this.model.get("error")?this.$el.addClass("lsp-modifier-group-error"):this.$el.removeClass("lsp-modifier-group-error"),this}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<legend class="jstore-tag lsp-modifer-group-title">\x3c!--\r\n    --\x3e<span class="jstore-tag lsp-modifier-group-title-text"><%= name %></span>\x3c!--\r\n    --\x3e<span class="jstore-tag lsp-modifer-group-minmax-c"><%\r\n        if(minAmount > 0){\r\n        %>\x3c!--\r\n            /--\x3e<% if( name ){ %><span class="jstore-tag lsp-modifer-group-minmax-delimeter">,</span><% } %>\x3c!--\r\n            --\x3e<span class="jstore-tag lsp-modifer-group-min-c">\x3c!--\r\n            --\x3e<span class="jstore-tag lsp-modifer-group-minmax-title"><%= jStoreApp.t(\'min\')%></span>\x3c!--\r\n            --\x3e<span class="jstore-tag lsp-modifer-group-minmax-value"><%= minAmount %></span>\x3c!--\r\n        --\x3e</span><%\r\n        }\r\n        if(maxAmount > 0){ %>\x3c!--\r\n            --\x3e<% if( name || minAmount > 0 ){ %><span class="jstore-tag lsp-modifer-group-minmax-delimeter">,</span><% } %>\x3c!--\r\n            --\x3e<span class="jstore-tag lsp-modifer-group-max-c">\x3c!--\r\n            --\x3e<span class="jstore-tag lsp-modifer-group-minmax-title"><%= jStoreApp.t(\'max\')%></span>\x3c!--\r\n            --\x3e<span class="jstore-tag lsp-modifer-group-minmax-value"><%= maxAmount %></span>\x3c!--\r\n        --\x3e</span><%\r\n        } %>\x3c!--\r\n    --\x3e</span>\r\n</legend>\r\n<div class="jstore-tag lsp-modifer-group-items-c <% if( error ){%>lsp-modifer-group-items-c-with-error<%} %>">\r\n    <div class="jstore-tag lsp-modifer-group-items"></div>\r\n    <div class="jstore-tag lsp-js-modifer-group-error lsp-modifer-group-error"><%= error %></div>\r\n</div>\r\n'},function(e,t,r){var s,o;s=[r(65),r(67),r(4),r(2),r(3)],void 0===(o=function(s,e,t,r,o){return t.View.extend({template:null,tagName:"fieldset",className:"jstore-tag lsp-type-modifier-group",events:{},initialize:function(){this.model.on("change",this.item_update,this),this.template=o.template(e)},render:function(){var r=this,e=this.model.get("childModifiers");return this.$el.html(this.template(this.model.attributes)),o.each(e.models,function(e){var t=new s({model:e});r.$el.find(".lsp-js-type-modifer-group-items").append(t.render().$el)}),this.item_update(),this},item_update:function(){return this.model.get("error")?this.$el.addClass("lsp-type-modifier-group-error"):this.$el.removeClass("lsp-type-modifier-group-error"),this.$(".lsp-js-modifer-group-error").html(this.model.get("error")),this}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(66),r(4),r(2),r(3)],void 0===(o=function(t,e,r,s){return e.View.extend({template:null,className:"jstore-tag lsp-type-modifier-item",events:{"click .lsp-js-modifier-minus":"modifierMinus","click .lsp-js-modifier-plus":"modifierPlus","click .lsp-js-modifier-set":"modifierSet"},initialize:function(){var e=r("#lsp-template-popup-type-modifier");e.length?this.template=s.template(e.html()):this.template=s.template(t),this.model.on("change",this.item_update,this)},modifierMinus:function(e){e.preventDefault();var t=parseInt(this.model.get("amount"));1<=t&&t--,this.model.setAmount(t)&&this.item_update()},modifierPlus:function(e){e.preventDefault();var t=parseInt(this.model.get("amount"));t++,this.model.setAmount(t)&&this.item_update()},modifierSet:function(){this.model.setAmount(1)&&this.item_update()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.item_update(),this},item_update:function(){return this.model.get("error")?this.$el.addClass("lsp-modifier-with-error"):this.$el.removeClass("lsp-modifier-with-error"),this.$(".lsp-js-modifer-group-error").html(this.model.get("error")),this.model.get("amount")?this.$(".lsp-js-modifier-set").addClass("lsp-button-red"):this.$(".lsp-js-modifier-set").removeClass("lsp-button-red"),this}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<span class="jstore-tag lsp-js-modifier-set lsp-button"><%= name %></span>'},function(e,t){e.exports='<legend class="jstore-tag lsp-type-modifer-group-title"><span class="jstore-tag lsp-type-modifier-group-title-text"><%= name %></span></legend>\r\n<div class="jstore-tag lsp-js-type-modifer-group-items-c lsp-type-modifer-group-items-c">\r\n    <div class="jstore-tag lsp-type-modifer-group-items lsp-js-type-modifer-group-items"></div>\r\n    <div class="jstore-tag lsp-js-modifer-group-error lsp-modifer-group-error"><%= error %></div>\r\n</div>\r\n'},function(e,t,r){var s,o;s=[r(2)],void 0===(o=function(e){var t,T;T=(t=e)(window),t.fn.visible=function(e,t,r){if(!(this.length<1)){var s=1<this.length?this.eq(0):this,o=s.get(0),a=T.width(),n=T.height(),i=(r=r||"both",!0!==t||o.offsetWidth*o.offsetHeight);if("function"==typeof o.getBoundingClientRect){var l=o.getBoundingClientRect(),p=0<=l.top&&l.top<n,c=0<l.bottom&&l.bottom<=n,d=0<=l.left&&l.left<a,u=0<l.right&&l.right<=a,m=e?p||c:p&&c,g=e?d||u:d&&u;if("both"===r)return i&&m&&g;if("vertical"===r)return i&&m;if("horizontal"===r)return i&&g}else{var h=T.scrollTop(),f=h+n,v=T.scrollLeft(),y=v+a,j=s.offset(),_=j.top,S=_+s.height(),b=j.left,A=b+s.width(),w=!0===e?S:_,k=!0===e?_:S,x=!0===e?A:b,C=!0===e?b:A;if("both"===r)return!!i&&k<=f&&h<=w&&C<=y&&v<=x;if("vertical"===r)return!!i&&k<=f&&h<=w;if("horizontal"===r)return!!i&&C<=y&&v<=x}}}}.apply(t,s))||(e.exports=o)},,function(e,t){e.exports='<div class="jstore-tag lsp-block-cart-inner">\r\n    <div class="jstore-tag lsp-info-message">\r\n        <%= jStoreApp.t( (totalItems ? \'cart_top_1\' : \'cart_top_2\'), {\r\n            \'totalItems\' : totalItems,\r\n            \'urlsCart\' : urls.cart,\r\n            \'goods\' : jStoreApp.declination(totalItems,[\r\n                jStoreApp.t(\'goods_5\'),\r\n                jStoreApp.t(\'goods_1\'),\r\n                jStoreApp.t(\'goods_2\')\r\n            ])\r\n        }) %>\r\n    </div>\r\n    <div class="jstore-tag ordered-left-block lsp-cart-items-list"></div>\r\n    <div class="jstore-tag lsp-info-message-bottom">\r\n        <div class="jstore-tag jstore-cart-order-sum <%if(!(discountSum || bonusSum)){%>lsp-js-hidden<%}%>">\r\n            <%= jStoreApp.t(\'Order_Sum\')%>: <span class="jstore-tag lsp-block-cart-sum lsp-block-cart-sum-item"><span class="jstore-js-cart-order-sum-value"><%= costWithoutDiscount %></span> <%= jStoreApp.getCurrency()%></span><br>\r\n        </div>\r\n        <div class="jstore-tag jstore-cart-discount <%if(!discountSum){%>lsp-js-hidden<%}%>">\r\n            <%= jStoreApp.t(\'Discount\')%>: <span class="jstore-tag lsp-block-cart-discount lsp-block-cart-sum-item"><span class="jstore-js-cart-discount-value"><%= discountSum %></span> <%= jStoreApp.getCurrency()%></span><br>\r\n        </div>\r\n        <div class="jstore-tag jstore-cart-bonus">\r\n            <%= jStoreApp.t(\'Bonus_pay\')%>: <span class="jstore-tag lsp-block-cart-bonus lsp-block-cart-sum-item"><span class="jstore-js-cart-bonus-value"><%= bonusSum %></span> <%= jStoreApp.getCurrency()%></span><br>\r\n        </div>\r\n        <div class="jstore-tag jstore-cart-delivery">\r\n            <%= jStoreApp.t(\'Delivery_pay\')%>: <span class="jstore-tag lsp-block-cart-bonus lsp-block-cart-sum-item"><span class="jstore-js-cart-delivery-value"><%= deliverySum %></span> <%= jStoreApp.getCurrency()%></span><br>\r\n        </div>\r\n        <div class="jstore-tag jstore-cart-total">\r\n            <%= jStoreApp.t(\'Total\')%>: <span class="jstore-tag lsp-block-cart-total"><span class="jstore-js-cart-total-value"><%= totalCost %></span> <%= jStoreApp.getCurrency()%></span><br>\r\n        </div>\r\n        <% if(totalItems){ %>\r\n        <div class="jstore-tag lsp-block-cart-order-button-cont"><a class="jstore-tag lsp-button" href="<%= urls.order %>"><%= jStoreApp.t(\'Make_order\')%></a></div>\r\n        <% } %>\r\n    </div>\r\n</div>\r\n'},function(e,t,r){var s,o;s=[r(5),r(2),r(72),r(73),r(3)],void 0===(o=function(e,t,r,o,a){var s=e.extend({templateType:"giftBlock",templateDefault:r,giftItems:[],events:{"click .lsp-js-submit":"addItems"},initialize:function(){s.__super__.initialize.apply(this,arguments),this.listenTo(jStoreApp.filter,"change:discounts",this.render),this.listenTo(jStoreApp.cart,"add remove",this.render)},renderProcess:function(){var r=this;if(r.giftItems=[],a.each(jStoreApp.cart.availableFreeProducts,function(e){var t=jStoreApp.dbItems.findByCode(e.productCode);t&&!jStoreApp.cart.inCart(t.get("id"))&&r.giftItems.push(t)}),r.giftItems.length){r.$el.empty().append(this.template());var s=r.$el.find(".lsp-block-js-gift-items");s.length&&a.each(r.giftItems,function(e){var t=new o({model:e});t.render(),s.append(t.$el),r.childViews.push(t)})}else r.$el.empty();return this},addItems:function(){this.giftItems&&a.each(this.giftItems,function(e){e.getOffer().addToCart(1,{upToCart:!0})})}});return s}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-block-gift-inner">\r\n    <div class="jstore-tag lsp-block-gift-title"><%= jStoreApp.t(\'Gift_2u\')%></div>\r\n    <div class="jstore-tag lsp-block-js-gift-items"></div>\r\n    <div class="jstore-tag lsp-block-gift-accept">\r\n        <span class="jstore-tag lsp-button lsp-js-submit"><%= jStoreApp.t(\'Get\')%></span>\r\n    </div>\r\n</div>\r\n'},function(e,t,r){var s,o;s=[r(5),r(74),r(7),r(25)],void 0===(o=function(e,t,r,s){return e.extend({templateType:"giftItem",templateDefault:t,events:{"click .lsp-js-popup":"show_popup"},renderProcess:function(){return this.$el.empty().append(this.template({id:this.model.get("id"),name:this.model.get("name"),description:this.model.getDesc(100),smallImageUrl:this.model.get("smallImageUrl"),mediumImageUrl:this.model.get("mediumImageUrl"),largeImageUrl:this.model.get("largeImageUrl"),cost:this.model.getOffer().getCost(),url:this.model.get("url")})),this},show_popup:function(e){e.preventDefault(),(new r).render(new s({model:this.model}))}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-block-gift-item">\r\n    <div class="jstore-tag lsp-block-gift-item-image-c"><img class="jstore-tag lsp-block-gift-item-image lsp-js-popup" src="<%= smallImageUrl %>"></div>\r\n    <div class="jstore-tag lsp-block-gift-item-name-c"><a class="jstore-tag lsp-block-gift-item-name lsp-js-popup" href="<%= url %>"><%= name %></a></div>\r\n    <div class="jstore-tag lsp-block-gift-item-desc"><%= description %></div>\r\n</div>\r\n'},function(e,t,r){var s,o;s=[r(5),r(76),r(2),r(3)],void 0===(o=function(e,t,i,l){var r=e.extend({templateDefault:t,templateType:"menuTree",exclude:"",rootLevel:1,initialize:function(e){r.__super__.initialize.apply(this,arguments),this.listenTo(jStoreApp.filter,"change:category_id",this.changeCategory),this.listenTo(jStoreApp.filter,"change:terminal_id",this.render),this.$el.data("exclude")&&(this.exclude=this.$el.data("exclude"))},renderProcess:function(){var t=this;return t.$el.empty(),this.model.each(function(e){e.get("level")===t.rootLevel&&t.renderItem(e,t.$el)}),t.changeCategory(),t},renderItem:function(e,t){var r=this;if((!r.exclude.length||-1===r.exclude.indexOf(e.get("id")))&&e.get("isIncludedInMenu")&&e.hasProducts()){var s=i("<li />",{class:"jstore-tag","data-id":e.get("id")}),o=e.getChildModels(),a=!1;l.every(o,function(e){return!e.get("isIncludedInMenu")||!(a=!0)}),s.append(r.template({id:e.get("id"),name:e.get("name"),url:e.get("url"),hasChilds:a}));var n=s.find(".lsp-js-menu-childs");a&&n.length&&l.each(o,function(e){e.get("isIncludedInMenu")&&r.renderItem(e,n)}),t.append(s)}},changeCategory:function(){var t=this,e=jStoreApp.filter.get("category_id"),r=t.model.get(e);r&&(t.$(".lsp-js-block-tree-item").removeClass("child-selected"),l.each(r.getParents(),function(e){t.$('.lsp-js-block-tree-item[data-id="'+e+'"]').addClass("child-selected")})),t.$(".lsp-js-block-tree-item").removeClass("selected"),t.$('.lsp-js-block-tree-item[data-id="'+e+'"]').addClass("selected"),jStoreApp.attachEvent("menuTreeRendered",{})}});return r}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<a href="<%= url %>" class="jstore-tag lsp-js-block-tree-item" data-id="<%= id %>"><%= name %></a>\r\n<% if(hasChilds){ %><ul class="jstore-tag lsp-js-menu-childs"></ul><% } %>'},function(e,t,r){var s,o;s=[r(5),r(25),r(7),r(78)],void 0===(o=function(e,t,r,s){var o=e.extend({templateType:"happyHour",templateDefault:s,template:null,countdown:!1,hours:0,minutes:60,seconds:0,events:{"click .lsp-js-tocart":"addToCart","click .lsp-js-item-show":"show_popup"},initialize:function(){o.__super__.initialize.apply(this,arguments);var e=this.model.get("offer");if(e){var t=e.get("dbItem");this.listenTo(t,"change:price change:active",this.render),this.listenTo(jStoreApp.cart,"add remove",this.render),this.listenTo(jStoreApp.filter,"change:discounts",this.render),this.listenTo(this.model,"change",this.render);var r=this.model.get("endDate").getTime()-jStoreApp.DateNow().getTime();this.hours=Math.floor(r/3600/1e3),this.minutes=Math.floor((r-3600*this.hours*1e3)/6e4),this.seconds=Math.floor(r/1e3%60)}},renderProcess:function(){var e=this;if(e.countdown&&(clearInterval(e.countdown),e.countdown=null),this.model.isActive()){var t=this.model.get("offer"),r=t.get("dbItem");this.$el.empty().append(this.template({product:{id:r.get("id"),name:r.get("name"),description:r.getDesc(),smallImageUrl:r.get("smallImageUrl"),mediumImageUrl:r.get("mediumImageUrl"),largeImageUrl:r.get("largeImageUrl"),cost:t.getCost(),specialOfferPrice:e.model.get("specialOfferPrice"),url:r.get("url")},hoursLeft:this.hours,hoursLeftText:jStoreApp.declination(this.hours,[jStoreApp.t("hour_5"),jStoreApp.t("hour_1"),jStoreApp.t("hour_2")]),minutesLeft:this.minutes,minutesLeftText:jStoreApp.declination(this.minutes,[jStoreApp.t("minute_5"),jStoreApp.t("minute_1"),jStoreApp.t("minute_2")]),secondsLeft:10<this.seconds?this.seconds:"0"+this.seconds,secondsLeftText:jStoreApp.declination(this.seconds,[jStoreApp.t("second_5"),jStoreApp.t("second_1"),jStoreApp.t("second_2")])})),this.countdown=setInterval(function(){e.renderTimer()},1e3)}else this.$el.empty();return this},renderTimer:function(){this.seconds--,this.seconds<0&&(this.seconds=59,this.minutes--),this.minutes<0&&(this.minutes=59,this.hours--,this.render()),this.$(".lsp-js-hours").html(this.hours),this.$(".lsp-js-minutes").html(this.minutes),this.$(".lsp-js-seconds").html(10<=this.seconds?this.seconds:"0"+this.seconds),this.$(".lsp-js-hours-text").html(jStoreApp.declination(this.hours,[jStoreApp.t("hour_5"),jStoreApp.t("hour_1"),jStoreApp.t("hour_2")])),this.$(".lsp-js-minutes-text").html(jStoreApp.declination(this.minutes,[jStoreApp.t("minute_5"),jStoreApp.t("minute_1"),jStoreApp.t("minute_2")])),this.$(".lsp-js-seconds-text").html(jStoreApp.declination(this.seconds,[jStoreApp.t("second_5"),jStoreApp.t("second_1"),jStoreApp.t("second_2")]))},addToCart:function(){return this.model.get("offer").addToCart()||this.show_popup(),this},show_popup:function(){var e=this.model.get("offer");e&&(new r).render(new t({model:e.get("dbItem")}))}});return o}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-block-hh-inner">\r\n    <div class="jstore-tag lsp-block-hh-title"><%= jStoreApp.t(\'Catch_moment\')%></div>\r\n    <div class="jstore-tag lsp-block-hh-product-title lsp-js-item-show"><%= product.name %></div>\r\n    <div class="jstore-tag lsp-block-hh-product-image lsp-js-item-show"><img src="<%= product.mediumImageUrl %>" /></div>\r\n    <div class="jstore-tag lsp-block-hh-product-desc"><%= product.description %></div>\r\n    <div class="jstore-tag lsp-block-hh-product-prices">\x3c!--\r\n        --\x3e<div class="jstore-tag lsp-block-hh-product-old-price"><%= product.cost %> <%= jStoreApp.getCurrency()%></div>\x3c!--\r\n        --\x3e<div class="jstore-tag lsp-block-hh-product-new-price"><%= product.specialOfferPrice %> <%= jStoreApp.getCurrency()%></div>\x3c!--\r\n    --\x3e</div>\r\n    <div class="jstore-tag lsp-block-hh-countdown-title"><%= jStoreApp.t(\'Left\')%></div>\r\n    <div class="jstore-tag lsp-block-hh-countdown-time">\x3c!--\r\n        --\x3e<%if(hoursLeft){ %><span class="jstore-tag lsp-block-hh-hours-item"><span class="jstore-tag lsp-js-hours lsp-block-hh-hours-item-row"><%= hoursLeft %></span><span class="jstore-tag lsp-js-hours-text lsp-block-hh-hours-item-row"><%= hoursLeftText %></span></span><% } %>\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-block-hh-hours-item"><span class="jstore-tag lsp-js-minutes lsp-block-hh-hours-item-row"><%= minutesLeft %></span><span class="jstore-tag lsp-js-minutes-text lsp-block-hh-hours-item-row"><%= minutesLeftText %></span></span>\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-block-hh-hours-item"><span class="jstore-tag lsp-js-seconds lsp-block-hh-hours-item-row"><%= secondsLeft %></span><span class="jstore-tag lsp-block-hh-hours-item-row"><%= jStoreApp.t(\'seconds\')%></span></span>\x3c!--\r\n    --\x3e</div>\r\n    <div class="jstore-tag lsp-block-hh-add-to-cart"><span class="jstore-tag lsp-button lsp-js-tocart"><%= jStoreApp.t(\'To_cart\')%></span></div>\r\n</div>'},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(80),__webpack_require__(2),__webpack_require__(4),__webpack_require__(3)],__WEBPACK_AMD_DEFINE_RESULT__=function(breadcrumbsTemplate,$,Backbone,_){return Backbone.View.extend({collection:null,defaultItems:[],initialize:function initialize(){this.defaultItems=[{url:"#!/",title:jStoreApp.t("Menu")}],this.template=_.template(breadcrumbsTemplate);var sInitData=this.$el.data("init");if("string"==typeof sInitData){var initData=eval(sInitData);Array.isArray(initData)&&(this.defaultItems=initData)}this.collection.on("reset",this.render,this)},render:function(){this.$el.empty().append(this.template({breadcrumbs:this.defaultItems.concat(this.collection.getArray())}))}})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(e,t){e.exports='<ul class="jstore-tag">\x3c!--\r\n    <% _.each(breadcrumbs, function(breadcrumb){ %>\r\n    --\x3e<li class="jstore-tag"><a class="jstore-tag" href="<%= breadcrumb.url %>"><%= breadcrumb.title %></a></li>\x3c!--\r\n    <% }); %>\r\n--\x3e</ul>'},function(e,t){e.exports='<div class="jstore-tag lsp-block-item-name">\r\n    <a href="<%= url %>" class="jstore-tag jstore-js-detailLink"><%= name %></a>\r\n</div>\r\n<div class="jstore-tag lsp-block-item-image">\r\n    <a class="jstore-tag lsp-block-item-image-link jstore-js-detailLink" href="<%= url %>">\r\n    <% if(tags.length){ %><div class="jstore-tag lsp-block-item-tags"><% _.each(tags, function(tag){ %>\x3c!--\r\n        --\x3e<span data-id="<%= tag.translitName %>" class="jstore-tag lsp-block-item-tag <%= tag.className %>" title="<%= tag.name %>"></span>\x3c!--\r\n    --\x3e<% }); %></div><% } %>\r\n    <img class="jstore-tag" title="<%= name %>"\r\n         data-jstore-src="mediumImageUrl">\r\n    </a>\r\n</div>\r\n<div class="jstore-tag lsp-block-item-description"\r\n     data-jstore-value="description"></div>\r\n<div class="jstore-tag lsp-block-item-price">\r\n    <span class="jstore-tag lsp-block-item-price-value"\r\n          data-jstore-value="price"></span> <span class="jstore-tag lsp-block-item-measurement"><%= jStoreApp.getCurrency()%></span>\r\n</div>\r\n<span class="jstore-tag lsp-block-item-add-to-cart jstore-js-addToCart lsp-button" data-jstore-class=\'{\r\n    "jstore-out-of-stock" : balance === 0 || (balance > 0 && balance <= amount)\r\n}\'><%= jStoreApp.t(\'To_cart\')%></span>\r\n'},function(e,t){e.exports='<div class="jstore-tag lsp-js-items"></div>'},function(e,t,r){var s,o;s=[r(41),r(84)],void 0===(o=function(e,t){var r=e.extend({templateType:"lastPurchases",showLastPurchases:!0,templateDefault:t,sliderUse:!0,initialize:function(){this.limit=0<jStoreApp.restaurant.get("lastPurchaseProductsCount")?jStoreApp.restaurant.get("lastPurchaseProductsCount"):null,r.__super__.initialize.apply(this,arguments)}});return r}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<h2 class="jstore-tag h1">Сейчас покупают</h2>\r\n<div class="jstore-tag lsp-js-items"></div>'},function(e,t,r){var s,o;s=[r(5),r(86),r(9),r(34),r(2),r(3),r(42)],void 0===(o=function(e,t,r,s,o,l){"use strict";var a=e.extend({templateDefault:t,templateType:"recommendationBlock",limit:null,events:{},initialize:function(e){var t=this;return a.__super__.initialize.apply(this,arguments),this.listenTo(jStoreApp.cart,"add",this.render),this.listenTo(jStoreApp.filter,"change:terminal_id",this.render),this.listenTo(jStoreApp.filter,"change:discounts",function(){this.items=t.upItems(),t.render()}),this},lastHash:"",items:[],upItems:function(){var a=jStoreApp.cart.getTotal(),n=[],i=[];return jStoreApp.cart.upSaleProducts.length?l.each(jStoreApp.cart.upSaleProducts,function(e){n.push({product:e,text:null,weight:0})}):jStoreApp.upsaleCollection&&l.each(jStoreApp.upsaleCollection,function(e,o){e&&l.each(e,function(e){var t=null,r=!1;switch(o){case"recommendIfCategoryAbsentItems":jStoreApp.cart.hasSectionProduct(e.checkedCategory)||(r=!0);break;case"recommendIfCategoryExistsItems":jStoreApp.cart.hasSectionProduct(e.checkedCategory)&&(r=!0);break;case"recommendIfProductAbsentItems":r=!0;break;case"recommendIfProductExistItems":jStoreApp.cart.inCart(e.checkedProduct)&&(r=!0);break;case"recommendIfSumInRangeUpsaleItems":(null===e.from||e.from<=a.cost)&&(null===e.to||e.to>a.cost)&&(r=!0)}if(r)if(e.recommendedProductId){if(!jStoreApp.cart.inCart(e.recommendedProductId)&&-1===i.indexOf(e.recommendedProductId)&&(i.push(e.recommendedProductId),(t=jStoreApp.dbItems.get(e.recommendedProductId))&&t.isActive())){var s=t.clone();s.set("description",e.text),n.push({product:s,text:null,weight:e.weight})}}else n.push({product:null,text:e.text,weight:e.weight})})}),n.length&&(n=n.sort(function(e,t){return e.weight<t.weight?-1:e.weight>t.weight?1:0})),this.limit?n.slice(0,this.limit):n},calculateHash:function(){var t=[];return l.each(this.items,function(e){e.text?t.push(e.text):e.product&&t.push(e.product.get("id"))}),t.join(",")},renderProcess:function(){this.items=this.upItems();var e=this,t=e.items;if(t.length){e.$el.html(e.template());var r=e.$(".lsp-js-recommendation-items");l.each(t,function(e){e.product?r.append(new s({model:e.product,templateType:"recommendationItem",showDetailLink:!1}).render().$el):e.text&&r.append('<div class="lsp-block-item lsp-block-item-promo-text"><span>'+e.text+"</span></div>")}),e.sliderItem=r}else e.$el.empty();return e}});return a}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<h2 class="jstore-tag lsp-title"><%= jStoreApp.t(\'Also_test\')%></h2>\r\n<div class="jstore-tag lsp-js-recommendation-items jstore-block lsp-block-items-list"></div>'},function(e,t,r){var s,o;s=[r(29),r(30),r(35),r(43),r(4),r(2),r(3)],void 0===(o=function(e,t,r,s,o,a,n){return o.Model.extend({defaults:{modifiersCost:0,smallImageUrl:"",mediumImageUrl:"",largeImageUrl:"",weight:null,fiberAmount:null,fatAmount:null,energyAmount:null,carbohydrateAmount:null,needDetail:!1,active:!0,not_active_message:""},initialize:function(){this.listenTo(jStoreApp.filter,"change:category_id change:pageID",this.UpUrls),this.listenTo(jStoreApp.filter,"change:terminal_id",this.upInfo),this.UpUrls(),this.upInfo()},getSearchString:function(){var r=this.get("searchString");return r||(r=[this.get("name"),this.get("description")],this.eachModifiers(function(e){var t=jStoreApp.dbItems.get(e.modifierId);t&&r.push(t.get("name"))}),n.each(this.get("parentGroups"),function(e){var t=jStoreApp.tree.get(e);t&&r.push(t.get("name"))}),n.each(this.get("tags"),function(e){r.push(e.name)}),r=r.join("#"),this.set("searchString",r)),r},eachModifiers:function(t){var r=this;n.each(this.get("modifiers"),function(e){t.apply(r,arguments)}),n.each(this.get("groupModifiers"),function(e){n.each(e.childModifiers,function(e){t.apply(r,arguments)})})},GetUrl:function(){return this.GetCategoryUrl()+"/"+encodeURIComponent(this.GetUrlId())},getName:function(){return this.get("name")},getSeoTitle:function(){var e=this.get("seoTitle");return e=e||this.getName()},getSeoDescription:function(){return this.get("seoDescription")},getSeoKeywords:function(){return this.get("seoKeywords")},GetUrlId:function(){return this.get("translitirateName")},getDesc:function(e){void 0===e&&(e=500);var t=this.get("description").split(" "),r="";for(key in t){if(r.length>e){r+="...";break}"string"==typeof t[key]&&(r=r.concat(" ",t[key]))}return r},inCategory:function(e){var t,r,s=this.get("parentGroups");for(t=0;t<s.length;t++)for(r=0;r<e.length;r++)if(e[r]===s[t]||"00000000-0000-0000-0000-000000000000"===e[r])return!0;return!1},getTags:function(s){var o=[],e=this.get("tags");return n.each(e,function(e){var t={name:e.name,translitName:e.translitName,className:""};if(t.className="lsp-js-item-tag-select lsp-block-item-tag-"+t.translitName,s){var r=s.get(e.translitName);r&&r.get("active")&&(t.className+=" lsp-block-item-tag-status-active")}o.push(t)}),o.sort(function(e,t){return e.name>t.name}),o},hasTag:function(t){var e=this.get("tags"),r=!1;return n.every(e,function(e){return e.name!==t&&e.translitName!==t||!(r=!0)}),r},GetCategoryUrl:function(){var e=this.getCategory();return e?e.getUrl():""},getCategory:function(){var e=this.get("parentGroups"),t=jStoreApp.filter.get("category_id"),r=this.get("parentGroup");return n.each(e,function(e){t===e&&(r=e)}),jStoreApp.tree.get(r)},UpUrls:function(){this.set("categoryUrl",this.GetCategoryUrl()),this.set("url",this.GetUrl())},isActive:function(){return this.get("active")},resetModifiersAmount:function(){return n.each(this.get("modifiers").models,function(e){e.setDefaultAmount()}),n.each(this.get("groupModifiers"),function(e){n.each(e.get("childModifiers").models,function(e){e.setDefaultAmount()})}),n.each(this.get("typeModifiers"),function(e){n.each(e.get("childModifiers").models,function(e){e.setDefaultAmount()}),e.afterInitialise()}),!0},getTreeChain:function(){return{url:this.GetUrl(),title:this.get("name")}},getProperty:function(t){var e=this.get("properties"),r="";return e&&void 0!==e&&n.every(e,function(e){return void 0===e.key||void 0===e.value||e.key!==t||(r=e.value,!1)}),r},getOffer:function(){return new s({dbItem:this})},upInfo:function(){var e=!0,t="",r=jStoreApp.filter.get("terminal_id"),s=this.get("prohibitedToSaleOn"),o={};return(window.jStoreAppConfig.terminalId||jStoreApp.restaurant.get("terminalIikoId")||!jStoreApp.filter.get("terminal_default"))&&Array.isArray(s)&&-1!==s.indexOf(r)&&(e=!1,t=jStoreApp.t("cart_item_unActive")),this.get("active")!==e&&(o.not_active_message=t,o.active=e),this.set(o),!0}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4)],void 0===(o=function(e){return e.Model.extend({defaults:{cost:!1,name:"",code:"",price:!1,group:!1,error:"",amount:0},validateModifier:function(){var e=this.get("minAmount"),t=this.get("maxAmount"),r=this.get("amount");return r<e?(1===t?this.set("error",jStoreApp.t("low_quantity_for_1_elem")):this.set("error",jStoreApp.t("low_quantity")),!1):t<r?(this.set("error",jStoreApp.t("too_much_quantity")),!1):(this.get("error")&&this.set("error",""),!0)},initialize:function(e){this.set({amount:e.defaultAmount?e.defaultAmount:0})},setAmount:function(e){var t=this.get("group"),r=(!1!==this.get("minAmount")&&jStoreApp.parseFloat(this.get("minAmount")),!1!==this.get("maxAmount")&&jStoreApp.parseFloat(this.get("maxAmount"))),s=jStoreApp.parseFloat(this.get("amount"));if(e=jStoreApp.parseFloat(e),(!t||t&&t.get("childModifiersHaveMinMaxRestrictions"))&&!1!==r&&r<e)return!1;if(t){var o=t.getConfig(),a=o.amount+e-s;if(a>o.maxAmount&&!t.reduceCount(a-o.maxAmount,this.get("id")))return!1}return e!==this.get("amount")&&this.set("amount",e),!0},setDefaultAmount:function(){var e=this.get("defaultAmount");this.setAmount(e||0)||this.setAmount(0)},getAmount:function(){return this.get("amount")},getPrice:function(){var e=this.get("dbModifier").get("differentPricesOn"),t=this.get("dbModifier").get("price");return(window.jStoreAppConfig.terminalId||jStoreApp.restaurant.get("terminalIikoId")||!jStoreApp.filter.get("terminal_default"))&&Array.isArray(e)&&e.every(function(e){return e.terminalId===jStoreApp.filter.get("terminal_id")&&(t=e.price),!0}),t},getCost:function(){return this.getPrice()*this.get("amount")}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(5),r(90),r(7),r(92),r(6)],void 0===(o=function(e,t,r,s,o){var a=e.extend({templateDefault:s,events:{"click .lsp-js-changeTerminalForm":"changeTerminalForm"},initialize:function(){return a.__super__.initialize.apply(this,arguments),this.listenTo(jStoreApp.DeliveryTerminals,"change",this.render),this.listenTo(jStoreApp.filter,"change:terminal_default change:terminal_id change:terminal_set_in_order",this.render),this},renderProcess:function(){var e={activeTerminal:jStoreApp.DeliveryTerminals.getActiveTerminal(),defaultSet:jStoreApp.filter.get("terminal_default")&&!jStoreApp.filter.get("terminal_set_in_order")};if(this.$el.empty().html(this.template(e)),jStoreApp.attachEvent("terminalInfoRendered",e),jStoreApp.restaurant.get("restarauntChooseIsRequired")&&e.defaultSet)return this.showTerminalPopup(!0),this},changeTerminalForm:function(e){e.preventDefault(),this.showTerminalPopup(!1)},showTerminalPopup:function(e){new r({modal:e}).render(new t({model:jStoreApp.restaurant}))}});return a}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(91),r(5),r(6),r(2)],void 0===(o=function(e,t,r,s){return t.extend({templateType:"terminalChange",templateSelectorDefault:"#lsp-template-terminal-change",templateDefault:e,idOnInitialize:"lsp-block-terminal-change",template:null,modifiers:null,events:{"click .lsp-js-cityChange":"terminalChange"},renderProcess:function(){return this.$el.empty().append(this.template({items:jStoreApp.DeliveryTerminals.getList()})),this},terminalChange:function(e){e.preventDefault();var t=s(e.target).data("id");t&&(jStoreApp.DeliveryTerminals.isTerminal(t)?jStoreApp.filter.changeTerminal(t,!0,"terminalChange"):jStoreApp.filter.changeTerminal(!1,!0,"terminalChange"),jStoreApp.filter.trigger("change:terminal_id"),this.remove())}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag more">\r\n    <div class="jstore-tag info">\r\n        <div class="jstore-tag h1 title"><%= jStoreApp.t(\'Chose_Your_terminal\')%></div>\r\n        <div class="jstore-tag cityList">\r\n            <% _.each(items, function(item){ %>\r\n            <span data-id="<%= item.id %>" class="jstore-tag lsp-js-cityChange cityItem"><%= item.name %></span>\r\n            <% }); %>\r\n        </div>\r\n    </div>\r\n    <div class="jstore-tag cf"></div>\r\n</div>'},function(e,t){e.exports='<div class="jstore-tag lsp-block-restinfo-inner">\r\n    <div class="jstore-tag city-terminal-c">\r\n        <%= jStoreApp.t(\'Your_terminal\')%>:&nbsp;\r\n        <% if(defaultSet){ %>\r\n        <a class="jstore-tag cityName lsp-js-changeTerminalForm"><%= jStoreApp.t(\'Chose_Your_terminal\')%></a>\r\n        <% }else{ %>\r\n        <a class="jstore-tag cityName lsp-js-changeTerminalForm"><%= activeTerminal.name %></a>\r\n        <% } %>\r\n    </div>\r\n</div>'},function(e,t,r){var s,o;s=[r(44),r(95),r(38),r(2)],void 0===(o=function(e,t,r,s){var o=e.extend({templateDefault:t,templateSelectorDefault:"#lsp-template-auth-block",templateAuthDefault:r,templateAuthSelectorDefault:"#lsp-template-auth-block-authorized",className:"lsp-block-auth-block",pageName:"userAuthBlock",templateType:"userAuthBlock",setSeoData:!1,initialize:function(){o.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:authorized",this.render);var t=this;this.$el.keyup(function(e){13===e.keyCode&&t.submit()})},successAuth:function(){this.$el.empty().html(this.templateAuth(this.model.toJSON()))},render:function(){jStoreApp.user.isAuthorised()?this.$el.empty().html(this.templateAuth(this.model.toJSON())):o.__super__.render.apply(this,arguments)}});return o}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-form">\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Auth\')%></h1>\r\n    <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-common-cont lsp-form-error-common-mess"></div>\r\n    <% if(userLoginType === 1){ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-phone">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Phone\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="phone" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% }else{ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-email">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Email\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="email" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% } %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-password">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Password\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="password" name="password" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row">\r\n        <span class="jstore-tag label-row-field "><span class="jstore-tag lsp-button lsp-js-submit"><%= jStoreApp.t(\'Comein\')%></span></span>\r\n    </label>\r\n    <label class="jstore-tag label-row">\r\n        <div class="jstore-tag label-row-field "><a class="jstore-tag" href="<%= urls.urlRegister %>"><%= jStoreApp.t(\'Register\')%></a>&nbsp;&nbsp;&nbsp;<a class="jstore-tag" href="<%= urls.urlRememberPass %>"><%= jStoreApp.t(\'Forgot_pass\')%></a></div>\r\n    </label>\r\n</div>'},function(e,t){e.exports='<div class="jstore-tag lsp-form lsp-full-weight">\r\n    <h2 class="jstore-tag h3">Войти</h2>\r\n    <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-common-cont lsp-form-error-common-mess"></div>\r\n    <% if(userLoginType === 1){ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-phone">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Phone\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="phone" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% }else{ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-email">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Email\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="email" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% } %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-password">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Password\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="password" name="password" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row">\r\n        <span class="jstore-tag label-row-field "><span class="jstore-tag lsp-button lsp-js-submit"><%= jStoreApp.t(\'Comein\')%></span></span>\r\n    </label>\r\n</div>'},function(e,t,r){var s,o;s=[r(5),r(25),r(7),r(97),r(4)],void 0===(o=function(e,t,r,s,o){var a=e.extend({templateType:"search",templateDefault:s,searchString:"",template:null,events:{"submit form":"submit"},initialize:function(){var s=this;a.__super__.initialize.apply(this,arguments),this.listenTo(o.history,"route",function(e,t,r){"search"===t&&r.length&&(s.searchString=r[0],s.$el.find("[name=search]").val(s.searchString))}),!this.searchString&&o.History.started&&jStoreApp.main&&"search"===jStoreApp.main.actualRoute.page&&(s.searchString=jStoreApp.main.actualRoute.arguments.search,s.$el.find("[name=search]").val(jStoreApp.main.actualRoute.arguments.search))},renderProcess:function(){return this.$el.empty().append(this.template({searchString:this.searchString})),this},submit:function(e){e.preventDefault(),e.stopPropagation();var t=this.$(e.target).find("[name=search]").val();this.parentView.search(t)}});return a}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag jstore-block-search-inner">\r\n    <form class="jstore-tag jstore-js-search-form lsp-form lsp-full-weight" action="#">\r\n        <div class="jstore-tag lsp-block-userinfo-appeal">Поиск</div>\r\n        <label class="jstore-tag label-row">\r\n            <span class="jstore-tag label-row-field label-row-field-search"><input placeholder="Поиск" name="search" type="text" class="jstore-search-input" value="<%= searchString %>"></span>\r\n        </label>\r\n        <div class="jstore-tag lsp-block-search-order-button-cont"><input type="submit" class="jstore-tag lsp-button" href="#!/order" value="<%= jStoreApp.t(\'Search_btn\')%>"></div>\r\n    </form>\r\n</div>'},function(e,t,r){var s,o;s=[r(4)],void 0===(o=function(e){return e.Model.extend({defaults:{url:"",title:""},getArray:function(){return{url:this.get("url"),title:this.get("title")}}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(8),r(4),r(3)],void 0===(o=function(e,t,s){return t.Model.extend({defaults:{parents:!1,_childs:!1,childModels:[]},initialize:function(){this.set("url",jStoreApp.restaurant.documentRoot()+"#!/"+this.getUrlId())},getChildModels:function(){var e=this.get("childs"),t=[];return e.length&&s.each(e,function(e){t.push(jStoreApp.tree.get(e.id))}),t},getUrl:function(){var e=jStoreApp.filter.get("pageID");return this.get("url")+(1<e?"/page-"+e:"")},getUrlPagination:function(){return this.get("url")+"/page-:pageID"},getName:function(){return this.get("name")},getSeoTitle:function(){var e=this.get("seoTitle");return e=e||this.getName()},getSeoDescription:function(){return this.get("seoDescription")},getSeoKeywords:function(){return this.get("seoKeywords")},getUrlId:function(){return this.get("translitirateName")},getParents:function(){var e=[],t=this.get("parentGroup");if("00000000-0000-0000-0000-000000000000"!==t){e.push(t);var r=jStoreApp.tree.get(t);r&&(e=e.concat(r.getParents()))}return e},getTreeChain:function(){var r=[],e=this.getParents();return s.each(e,function(e){var t=jStoreApp.tree.get(e);t&&r.push({url:t.getUrl(),title:t.getName()})}),r.push({url:this.getUrl(),title:this.getName()}),r},getChilds:function(t){t=t||10,t--;var r=[];return s.each(this.Childs.models,function(e){r.push(e.get("id")),0<t&&r.concat(e.getChilds())}),r},hasProducts:function(){var t=this.get("id"),r=!1;return jStoreApp.dbItems.every(function(e){return!e.inCategory([t])||!e.get("active")||!(r=!0)}),r}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4)],void 0===(o=function(e){return e.Model.extend({defaults:{kladrId:"",name:""},initialize:function(){jStoreApp.filter.on("change:city_id change:city_default",this.checkActive,this)},checkActive:function(){var e=jStoreApp.filter.get("city_id");this.set("active",e===this.get("id"))}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(102),r(33),r(2),r(3)],void 0===(o=function(e,t,r,s){"use strict";var o=t.extend({pageName:"itemDetail",setSeoData:!0,needDetail:!1,templateType:"itemDetail",templateSelectorDefault:"#lsp-template-item-detail",templateDefault:e,idOnInitialize:"lsp-block-item-detail",initialize:function(){o.__super__.initialize.apply(this,arguments),0<this.offer.get("amount")&&this.offer.setCount(this.offer.get("amount"))},renderProcess:function(){if(o.__super__.renderProcess.apply(this,arguments)){this.isPage&&jStoreApp.setSeoData(this)}},afterToCartFail:function(){},afterToCartSuccess:function(){location.href=this.model.GetCategoryUrl()},getSeoTitle:function(){return this.model.getSeoTitle()},getSeoDescription:function(){return this.model.getSeoDescription()},getSeoKeywords:function(){return this.model.getSeoKeywords()}});return o}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<h1 class="jstore-tag h1 lsp-detail-item-name"><%= name %></h1>\r\n<div class="jstore-tag lsp-detail-item-image-c">\r\n    <div class="jstore-tag lsp-detail-item-image">\r\n        <% if(tags.length){ %><div class="jstore-tag lsp-block-item-tags"><% _.each(tags, function(tag){ %>\x3c!--\r\n        --\x3e<span class="jstore-tag lsp-block-item-tag lsp-block-item-tag-<%= tag.translitName %>" title="<%= tag.name %>"></span>\x3c!--\r\n        --\x3e<% }); %></div><% } %>\r\n        <img class="jstore-tag" title="<%= name %>"\r\n             data-jstore-src="largeImageUrl">\r\n    </div>\r\n</div>\r\n\r\n<div class="jstore-tag lsp-detail-item-description-block">\r\n    <div class="jstore-tag lsp-detail-item-description"\r\n         data-jstore-value="description"></div>\r\n    <div class="jstore-tag lsp-js-typeModifiers-block">\r\n        <div class="jstore-tag lsp-modifier-group lsp-js-types-container"></div>\r\n    </div>\r\n\r\n    <div class="jstore-tag lsp-detail-item-price-c">\r\n        <div class="jstore-tag lsp-detail-item-count-c">\r\n            <span class="jstore-tag lsp-button-minus lsp-js-popup-item-minus">&#8211;</span>\r\n            <input class="jstore-tag lsp-popup-count lsp-js-popup-total-count" name="count"\r\n                   data-jstore-value="count">\r\n            <span class="jstore-tag lsp-button-plus lsp-js-popup-item-plus">+</span>\r\n            <em class="jstore-tag lsp-detail-count-type"><%= jStoreApp.t(useBalanceForSell ? \'PCS_KG\' : \'PCS\')%></em>\r\n        </div>\r\n        <strong class="jstore-tag lsp-detail-price-total lsp-js-popup-total-price"\r\n                data-jstore-value="count * cost"></strong> <em class="jstore-tag lsp-detail-price-total-valute"><%= jStoreApp.getCurrency()%></em>\r\n        <span class="jstore-tag lsp-detail-item-tocart-button lsp-button lsp-js-popup-tocart" data-jstore-class=\'{\r\n    "jstore-out-of-stock" : balance === 0\r\n}\'><%= jStoreApp.t(\'To_cart\')%></span>\r\n        <div class="jstore-tag jstore-share js-share" data-services="vkontakte,facebook,odnoklassniki,gplus,twitter"></div>\r\n    </div>\r\n    <div class="jstore-tag lsp-detail-energy-cont"\r\n         data-jstore-if="fiberAmount || fatAmount || carbohydrateAmount || carbohydrateAmount || energyAmount || weight">\r\n        <div class="jstore-tag lsp-detail-energy-title"><%= jStoreApp.t(\'energy_sum\') %>:</div>\r\n        <table class="jstore-tag lsp-detail-energy-table">\r\n            <tbody>\r\n                <tr class="jstore-tag lsp-detail-table-fiberAmount"\r\n                    data-jstore-if="fiberAmount">\r\n                    <td class="jstore-tag lsp-detail-table-property-name"><%= jStoreApp.t(\'Proteins\')%><span class="jstore-tag lsp-detail-table-property-enum">, <%= jStoreApp.t(\'Gram\')%></span></td>\r\n                    <td class="jstore-tag lsp-detail-table-property-value">\r\n                        <span class="jstore-tag lsp-detail-table-property-value lsp-js-item-fiberAmount-value"\r\n                              data-jstore-value="fiberAmount"></span>\r\n                    </td>\r\n                </tr>\r\n                <tr class="jstore-tag lsp-detail-table-fatAmount"\r\n                    data-jstore-if="fatAmount">\r\n                    <td class="jstore-tag lsp-detail-table-property-name"><%= jStoreApp.t(\'Fats\')%><span class="jstore-tag lsp-detail-table-property-enum">, <%= jStoreApp.t(\'Gram\')%></span></td>\r\n                    <td class="jstore-tag lsp-detail-table-property-value">\r\n                        <span class="jstore-tag lsp-detail-table-property-value lsp-js-item-fatAmount-value"\r\n                              data-jstore-value="fatAmount"></span>\r\n                    </td>\r\n                </tr>\r\n                <tr class="jstore-tag lsp-detail-table-carbohydrateAmount"\r\n                    data-jstore-if="carbohydrateAmount">\r\n                    <td class="jstore-tag lsp-detail-table-property-name"><%= jStoreApp.t(\'Carbohydrates\')%><span class="jstore-tag lsp-detail-table-property-enum">, <%= jStoreApp.t(\'Gram\')%></span></td>\r\n                    <td class="jstore-tag lsp-detail-table-property-value">\r\n                        <span class="jstore-tag lsp-detail-table-property-value lsp-js-item-carbohydrateAmount-value"\r\n                              data-jstore-value="carbohydrateAmount"></span>\r\n                    </td>\r\n                </tr>\r\n                <tr class="jstore-tag lsp-detail-table-energyAmount"\r\n                    data-jstore-if="energyAmount">\r\n                    <td class="jstore-tag lsp-detail-table-property-name"><%= jStoreApp.t(\'Nutritional_value\')%><span class="jstore-tag lsp-detail-table-property-enum">, <%= jStoreApp.t(\'CCal\')%></span></td>\r\n                    <td class="jstore-tag lsp-detail-table-property-value">\r\n                        <span class="jstore-tag lsp-detail-table-property-value lsp-js-item-energyAmount-value"\r\n                              data-jstore-value="energyAmount"></span>\r\n                    </td>\r\n                </tr>\r\n                <tr class="jstore-tag lsp-detail-table-weight"\r\n                    data-jstore-if="weight">\r\n                    <td class="jstore-tag lsp-detail-table-property-name"><%= jStoreApp.t(\'Weight\')%><span class="jstore-tag lsp-detail-table-property-enum">, <%= jStoreApp.t(\'Gram\')%></span></td>\r\n                    <td class="jstore-tag lsp-detail-table-property-value">\r\n                        <span class="jstore-tag lsp-detail-table-property-value lsp-js-item-weight-value"\r\n                              data-jstore-value="weight"></span>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n<div class="jstore-tag lsp-modifiers-container lsp-js-modifiers-block">\r\n    <div class="jstore-tag lsp-modifiers-container-inner lsp-js-modifiers-block">\r\n        <div class="jstore-tag lsp-detail-modifier-title"><%= jStoreApp.t(\'Additional_ing\')%>:</div>\r\n        <div class="jstore-tag lsp-modifier-group lsp-js-modifiers-container"></div>\r\n    </div>\r\n</div>'},function(e,t,r){var s,o;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}s=[r(5),r(104),r(45),r(2),r(3),r(26)],void 0===(o=function(e,t,r,s,o){var a,n=e.extend((i(a={formData:{},checkCode:"",templateDefault:t,templateSelectorDefault:"#lsp-template-register",initialize:function(){n.__super__.initialize.apply(this,arguments);var t=this;t.templateCode=o.template(r),t.$el.keyup(function(e){13===e.keyCode&&t.submit()})},className:"lsp-block-register",pageName:"userRegister",templateType:"userRegister",setSeoData:!0,getSeoTitle:function(){return jStoreApp.t("User_Registration")},getSeoDescription:function(){return""},getSeoKeywords:function(){return""},events:{"click .lsp-js-submit":"onSubmit","click .lsp-js-submit-code":"onSubmitCode"},onSubmit:function(e){e.preventDefault(),this.submit()}},"formData",{}),i(a,"formStep",1),i(a,"formFields",{name:{name:"name",type:"text",required:!0},email:{name:"email",type:"text",required:!0},phone:{name:"phone",type:"phone",required:!0},password:{name:"password",type:"text",required:!0},passwordRepeat:{name:"passwordRepeat",type:"passwordRepeat",chainField:"password",required:!0},cardNumber:{name:"cardNumber",type:"text",required:!1},userAgreement:{name:"userAgreement",type:"userAgreementRegister"},phoneValidationCode:{type:"integer"}}),i(a,"formFieldRequired",function(e){switch(e.name){case"name":case"email":case"phone":case"password":case"passwordRepeat":return 1===this.formStep;case"userAgreement":return 1===this.formStep&&jStoreApp.restaurant.needUserAgrement();case"phoneValidationCode":return 2===this.formStep;default:return e.required}}),i(a,"submit",function(){this.formStep=1,this.validateFormFields()&&(this.formData=this.getFormFieldsValues(),this.formData.phoneValidationCode=null,this.sendToServer(this.formData))}),i(a,"onSubmitCode",function(){this.formStep=2,this.validateFormFields()&&(this.formData.phoneValidationCode=this.getFormFieldValue("phoneValidationCode"),this.sendToServer(this.formData))}),i(a,"sendToServer",function(){var t=this;t.formData&&s.ajax({url:jStoreApp.restaurant.getUrl("UserRegister"),type:"post",async:!1,dataType:"json",data:{json:JSON.stringify({name:t.formData.name,email:t.formData.email,phone:t.formData.phone,password:t.formData.password,passwordRepeat:t.formData.passwordRepeat,phoneValidationCode:t.formData.phoneValidationCode,cardNumber:t.formData.cardNumber,restaraunt:jStoreApp.restaurant.get("id")}),lang:window.jStoreAppConfig.lang},success:function(e){e.shouldValidatePhone&&!e.customer?t.$el.empty().append(t.templateCode({urls:{urlLogIn:jStoreApp.user.get("urlLogIn"),urlRememberPass:jStoreApp.user.get("urlRememberPass")}})):t.validateFormAnswer(e)&&(e.customer.authorized=!0,jStoreApp.user.upData(e.customer),jStoreApp.user.toPersonal())},error:function(){t.showErrorMessage(jStoreApp.t("common_error"))}})}),i(a,"renderProcess",function(){var e=this,t=jStoreApp.restaurant;return e.$el.empty().append(e.template({urls:{urlLogIn:jStoreApp.user.get("urlLogIn"),urlRememberPass:jStoreApp.user.get("urlRememberPass")},useUserAgreement:t.needUserAgrement(),userAgreementUrl:t.get("userAgreementUrl")})),e.input_phone=e.$('input[name="phone"]'),e.input_phone.mask(jStoreApp.restaurant.getPhoneFormat(),{placeholder:"_"}),e}),a));return n}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-form">\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Registration\')%></h1>\r\n    <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-common-cont lsp-form-error-common-mess"></div>\r\n    <label class="jstore-tag label-row lsp-js-form-field-name">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'name\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="name" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-js-form-field-phone">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Phone\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="text" name="phone" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-js-form-field-email">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Email\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="email" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-js-form-field-password">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Password\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="password" name="password" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-js-form-field-passwordRepeat">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Password_confirm\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="password" name="passwordRepeat" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% if(useUserAgreement){ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-userAgreement">\r\n        <span class="jstore-tag label-row-text"></span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="checkbox" value="Y" name="userAgreement"> <%= jStoreApp.t(\'user_Agree\', {\'userAgreementUrl\' : userAgreementUrl})%></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% } %>\r\n    <label class="jstore-tag label-row">\r\n        <div class="jstore-tag label-row-field "><span class="jstore-tag lsp-button lsp-js-submit"><%= jStoreApp.t(\'Register\')%></span></div>\r\n    </label>\r\n    <label class="jstore-tag label-row">\r\n        <div class="jstore-tag label-row-field "><a class="jstore-tag" href="<%= urls.urlLogIn %>"><%= jStoreApp.t(\'Comein\')%></a>&nbsp;&nbsp;&nbsp;<a class="jstore-tag" href="<%= urls.urlRememberPass %>"><%= jStoreApp.t(\'Forgot_pass\')%></a></div>\r\n    </label>\r\n</div>'},function(e,t,r){var s,o;s=[r(106),r(108),r(4),r(2),r(3)],void 0===(o=function(o,t,e,a,r){return e.View.extend({className:"jstore-tag lsp-block-personal",template:null,pageName:"userPersonal",templateType:"userPersonal",setSeoData:!0,getSeoTitle:function(){return jStoreApp.t("Personal_section")},getSeoDescription:function(){return""},getSeoKeywords:function(){return""},initialize:function(){var e=a("#lsp-template-personal");e.length?this.template=r.template(e.html()):this.template=r.template(t),this.listenTo(jStoreApp.user,"change reset delete",this.render)},renderedHistory:[],render:function(){var s=this,e=jStoreApp.user.getWallets();!1===e&&jStoreApp.user.upBonusesCount(),this.$el.empty().append(this.template({user:{name:jStoreApp.user.getName(),email:jStoreApp.user.getEmail(),phone:jStoreApp.user.getPhone(),cardNumber:jStoreApp.user.getCardNumber(),wallets:e},canHaveBonuses:jStoreApp.user.canHaveBonuses(),showCardNumber:jStoreApp.restaurant.get("showCardNumber"),urls:{urlPersonal:jStoreApp.user.get("urlPersonal"),urlPersonalEdit:jStoreApp.user.get("urlPersonalEdit")}}));var t=this.$(".lsp-block-orders");return t.length&&r.each(t,function(e,t){if(s.renderedHistory.length>t)a(e).replaceWith(s.renderedHistory[t].$el);else{var r=new o({el:e});r.render(),s.renderedHistory.push(r)}}),this}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(107),r(4),r(3),r(2),r(26)],void 0===(o=function(t,e,o,s){return e.View.extend({className:"jstore-tag lsp-block-personal-orders",template:null,initialize:function(){var e=s("#lsp-template-personal-orders");e.length?this.template=o.template(e.html()):this.template=o.template(t),jStoreApp.user.on("update reset delete",this.render,this)},render:function(){var r=this;void 0===jStoreApp.historyOrders?s.ajax({url:jStoreApp.restaurant.getUrl("UserOrders")+"/"+jStoreApp.user.get("id"),dataType:"json",data:{lang:window.jStoreAppConfig.lang},success:function(e){var t=[];o.each(e.historyOrders,function(e){var s={number:e.number,sum:e.sum,date:e.date,status:e.status?e.status:jStoreApp.t("Delivered"),items:[],urls:{repeat:jStoreApp.restaurant.documentRoot()+"#!/personal/repeatOrder/"+e.orderId}};o.each(e.items,function(e){var t=jStoreApp.dbItems.get(e.id),r={name:e.name,amount:e.amount,useBalanceForSell:!!t&&t.get("useBalanceForSell"),modifiers:[]};o.each(e.modifiers,function(e){r.modifiers.push({name:e.name,amount:e.amount})}),s.items.push(r)}),t.push(s)}),jStoreApp.historyOrders=t,r.renderOrders(t)}}):this.renderOrders(jStoreApp.historyOrders)},renderOrders:function(e){this.$el.empty().append(this.template({orders:e}))}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<h3 class="jstore-tag label-row h3"><%= jStoreApp.t(\'Your_orders\')%></h3>\r\n<% if(orders.length){ %>\r\n<table class="jstore-tag lsp-block-orders-list">\r\n    <tbody>\r\n        <% _.each(orders, function(item){ %>\r\n        <tr class="jstore-tag">\r\n            <td class="jstore-tag">\r\n                <span class="jstore-tag lsp-block-orders-list-date"><%= item.date %></span>\r\n                <span class="jstore-tag lsp-block-orders-list-title"><%= jStoreApp.t(\'Order_N\')%> <%= item.number %></span>\r\n                <span class="jstore-tag lsp-block-orders-list-sum"><%= jStoreApp.t(\'by_summ\')%> <%= item.sum %> <%= jStoreApp.getCurrency()%></span>\r\n            </td>\r\n            <td class="jstore-tag lsp-block-orders-list-status"><%= jStoreApp.t(\'Order_status_short_\' + item.status) %></td>\r\n            <td class="jstore-tag">\r\n                <% _.each(item.items, function(productItem){ %>\r\n                <div class="jstore-tag lsp-block-orders-list-product">\r\n                    <div class="jstore-tag lsp-block-orders-list-product-name-cont"><span class="jstore-tag lsp-block-orders-list-product-name"><%= productItem.name %></span> x <span class="jstore-tag lsp-block-orders-list-product-amount"><%= productItem.amount %></span> <%= jStoreApp.t(productItem.useBalanceForSell ? \'PCS_KG\' : \'PCS\')%></div>\r\n                    <% if(productItem.modifiers.length){ %>\r\n                    <div class="jstore-tag lsp-block-orders-list-product-modifiers">\r\n                        <% _.each(productItem.modifiers, function( modifier ){ %>&nbsp;[ <%= modifier.name %> x <%= modifier.amount %> ]&nbsp;<% }); %>&nbsp;x&nbsp;<%= productItem.amount %>\r\n                    </div>\r\n                    <% } %>\r\n                </div>\r\n                <% }); %>\r\n            </td>\r\n            <td class="jstore-tag">&nbsp;</td>\r\n        </tr>\r\n        <% }); %>\r\n    </tbody>\r\n</table>\r\n<% }else{ %>\r\n<p class="jstore-tag"><%= jStoreApp.t(\'You_havet_ordered\')%></p>\r\n<% } %>'},function(e,t){e.exports='<div class="jstore-tag lsp-form">\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Personal\')%></h1>\r\n    <% if(user.name){ %>\r\n    <label class="jstore-tag label-row">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'name\')%>:</span>\r\n        <span class="jstore-tag label-row-field label-row-field-value"><%= user.name %></span>\r\n    </label>\r\n    <% } %>\r\n    <% if(user.phone){ %>\r\n    <label class="jstore-tag label-row">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Phone\')%>:</span>\r\n        <span class="jstore-tag label-row-field label-row-field-value"><%= user.phone %></span>\r\n    </label>\r\n    <% } %>\r\n    <% if(user.email){ %>\r\n    <label class="jstore-tag label-row">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Email\')%>:</span>\r\n        <span class="jstore-tag label-row-field label-row-field-value"><%= user.email %></span>\r\n    </label>\r\n    <% } %>\r\n    <label class="jstore-tag label-row">\r\n        <div class="jstore-tag label-row-field "><a href="<%= urls.urlPersonalEdit %>" class="jstore-tag lsp-button"><%= jStoreApp.t(\'Change\')%></a></div>\r\n    </label>\r\n    <% if(canHaveBonuses){\r\n        if(user.wallets){\r\n            %><h3 class="jstore-tag label-row h3"><%= jStoreApp.t(\'Bonus_balances\')%></h3><%\r\n            _.each(user.wallets, function(wallet){ %>\r\n            <label class="jstore-tag label-row">\r\n                <span class="jstore-tag label-row-text"><%= wallet.name %>:</span>\r\n                <span class="jstore-tag label-row-field label-row-field-value lsp-js-bonuses"><%= wallet.balance %> <%= jStoreApp.declination(\r\n                            jStoreApp.parseFloat(wallet.balance),\r\n                            [jStoreApp.t(\'bonus_\' + wallet.type + \'_5\'),jStoreApp.t(\'bonus_\' + wallet.type + \'_1\'),jStoreApp.t(\'bonus_\' + wallet.type + \'_2\')]\r\n                        ) %></span>\r\n            </label><%\r\n            });\r\n        } else { %>\r\n        <label class="jstore-tag label-row">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Your_bonuses\')%>:</span>&nbsp;\r\n            <span class="jstore-tag lsp-data-loading"><%= jStoreApp.t(\'info_loading\')%></span>\r\n        </label>\r\n        <% }\r\n    } %>\r\n    <% if(showCardNumber && user.cardNumber){ %>\r\n    <label class="jstore-tag label-row">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'card_num\')%>:</span>\r\n        <span class="jstore-tag label-row-field label-row-field-value"><%= user.cardNumber %></span>\r\n    </label>\r\n    <% } %>\r\n</div>\r\n<div class="jstore-tag lsp-block-orders"></div>'},function(e,t,r){var s,o;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}s=[r(5),r(110),r(111),r(3),r(2),r(26)],void 0===(o=function(e,t,r,s,o){var a,n=e.extend((i(a={formData:{},templateDefault:t,templateSelectorDefault:"#lsp-template-personal-edit",className:"lsp-block-personal-edit",pageName:"userPersonalEdit",templateType:"userPersonalEdit",setSeoData:!0,getSeoTitle:function(){return jStoreApp.t("Personal_Edit")},getSeoDescription:function(){return""},getSeoKeywords:function(){return""},events:{"click .lsp-js-submit":"onSubmit","click .lsp-js-submit-code":"onSubmitCode"}},"formData",{}),i(a,"formStep",1),i(a,"formFields",{name:{type:"text",required:!0},email:{type:"email",required:!0},phone:{type:"phone",required:!0},oldPassword:{type:"text",required:!0},newPassword:{name:"newPassword",type:"passwordRepeat",chainField:"newPasswordRepeat"},newPasswordRepeat:{name:"newPasswordRepeat",type:"passwordRepeat",chainField:"newPassword"},cardNumber:{name:"cardNumber",type:"text"},phoneValidationCode:{type:"integer"}}),i(a,"formFieldRequired",function(e){switch(e.name){case"name":case"email":case"phone":case"oldPassword":return 1===this.formStep;case"phoneValidationCode":return 2===this.formStep;default:return e.required}}),i(a,"initialize",function(){n.__super__.initialize.apply(this,arguments);var t=this;t.templateCode=s.template(r),this.$el.keyup(function(e){13===e.keyCode&&t.submit()})}),i(a,"onSubmit",function(e){e.preventDefault(),this.submit()}),i(a,"onSubmitCode",function(){this.formStep=2,this.validateFormFields()&&(this.formData.phoneValidationCode=this.getFormFieldValue("phoneValidationCode"),this.sendToServer(this.formData))}),i(a,"submit",function(){this.formStep=1,this.validateFormFields()&&(this.formData=this.getFormFieldsValues(),this.formData.phoneValidationCode=null,this.sendToServer(this.formData))}),i(a,"sendToServer",function(e){var t=this,r={id:jStoreApp.user.get("id"),oldPassword:e.oldPassword,email:e.email,name:e.name,phone:e.phone,cardNumber:e.cardNumber,phoneValidationCode:e.phoneValidationCode,restaraunt:jStoreApp.restaurant.get("id")};e.newPassword&&(r.newPassword=e.newPassword,r.newPasswordRepeat=e.newPasswordRepeat),o.ajax({url:jStoreApp.restaurant.getUrl("UserUpdate"),type:"post",async:!1,dataType:"json",data:{json:JSON.stringify(r),lang:window.jStoreAppConfig.lang},success:function(e){e.shouldValidatePhone&&!e.customer?t.$el.empty().append(t.templateCode({urls:{urlLogIn:jStoreApp.user.get("urlLogIn"),urlRememberPass:jStoreApp.user.get("urlRememberPass")}})):t.validateFormAnswer(e)&&(e.customer.authorized=!0,e.customer.cardnumber&&(e.customer.cardNumber=e.customer.cardnumber),jStoreApp.user.upData(e.customer),jStoreApp.user.toPersonal())},error:function(){t.showErrorMessage(jStoreApp.t("common_error"))}})}),i(a,"renderProcess",function(){this.$el.empty().append(this.template({user:{name:jStoreApp.user.getName(),email:jStoreApp.user.getEmail(),phone:jStoreApp.user.getPhone(),cardNumber:jStoreApp.user.getCardNumber()},showCardNumber:jStoreApp.restaurant.get("showCardNumber"),urls:{urlPersonal:jStoreApp.user.get("urlPersonal"),urlPersonalEdit:jStoreApp.user.get("urlPersonalEdit")}})),this.input_phone=this.$('input[name="phone"]'),this.input_phone.mask(jStoreApp.restaurant.getPhoneFormat(),{placeholder:"_"})}),a));return n}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-form">\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Personal\')%></h1>\r\n    <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-common-cont lsp-form-error-common-mess"></div>\r\n    <label class="jstore-tag label-row lsp-js-form-field-name">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'name\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="name" value="<%= user.name %>"></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-js-form-field-phone">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Phone\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="text" name="phone" value="<%= user.phone %>"></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-js-form-field-email">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Email\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="email" value="<%= user.email %>"></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% if(showCardNumber){ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-cardNumber">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'card_num\') %>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="cardNumber" value="<%= user.cardNumber %>"></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% } %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-oldPassword">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Pass_now\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="password" name="oldPassword" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-js-form-field-newPassword">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'New_pass\')%>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="password" name="newPassword" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-js-form-field-newPasswordRepeat">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Pass_confirm\')%>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="password" name="newPasswordRepeat" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row">\r\n        <div class="jstore-tag label-row-field "><a href="<%= urls.urlPersonal %>" class="jstore-tag lsp-button lsp-button-red"><%= jStoreApp.t(\'Cancel\')%></a>&nbsp;<span class="jstore-tag lsp-button lsp-js-submit"><%= jStoreApp.t(\'Save\')%></span></div>\r\n    </label>\r\n</div>'},function(e,t){e.exports='<div class="jstore-tag lsp-form lsp-form-confirm-code">\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Registration\')%></h1>\r\n    <p class="jstore-tag "><%= jStoreApp.t(\'Enter_sms_code\')%></p>\r\n    <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-common-cont lsp-form-error-common-mess"></div>\r\n    <label class="jstore-tag label-row lsp-js-form-field-phoneValidationCode">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'phoneValidationCode\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="phoneValidationCode" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row">\r\n        <div class="jstore-tag label-row-field "><span class="jstore-tag lsp-button lsp-js-submit-code"><%= jStoreApp.t(\'Save\')%></span></div>\r\n    </label>\r\n</div>'},function(e,t,r){var s,o;s=[r(5),r(113),r(2)],void 0===(o=function(e,t,r){var s=e.extend({templateDefault:t,templateSelectorDefault:"#lsp-template-remember-pass",className:"lsp-block-remember-pass",pageName:"userRememberPassword",templateType:"userRememberPassword",setSeoData:!0,getSeoTitle:function(){return jStoreApp.t("Pass_recovery")},events:{"click .lsp-js-submit":"onSubmit"},formFields:{email:{name:"email",type:"text",required:!0}},initialize:function(){s.__super__.initialize.apply(this,arguments);var t=this;this.$el.keyup(function(e){13===e.keyCode&&t.submit()})},onSubmit:function(e){e.preventDefault(),this.submit()},submit:function(){var t=this;if(this.validateFormFields()){var e={email:this.getFormFieldValue("email"),restaraunt:jStoreApp.restaurant.get("id")};r.ajax({url:jStoreApp.restaurant.getUrl("UserRememberPass"),type:"POST",async:!1,dataType:"json",data:{json:JSON.stringify(e),lang:window.jStoreAppConfig.lang},success:function(e){t.validateFormAnswer(e)&&t.showSuccessMessage(jStoreApp.t("pass_sended"))},error:function(){t.showErrorMessage(jStoreApp.t("common_error"))}})}},renderProcess:function(){this.$el.empty().append(this.template({urls:{urlLogIn:jStoreApp.user.get("urlLogIn"),urlRegister:jStoreApp.user.get("urlRegister")}}))}});return s}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-form">\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Pass_Rec\')%></h1>\r\n    <div class="jstore-tag lsp-form-success-mess lsp-form-success-mess-common-cont lsp-form-success-common-mess"></div>\r\n    <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-common-cont lsp-form-error-common-mess"></div>\r\n    <label class="jstore-tag label-row lsp-js-form-field-email">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Email\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="email" value=""></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row">\r\n        <div class="jstore-tag label-row-field "><span class="jstore-tag lsp-button lsp-js-submit"><%= jStoreApp.t(\'Recovery\')%></span></div>\r\n    </label>\r\n    <label class="jstore-tag label-row">\r\n        <div class="jstore-tag label-row-field "><a class="jstore-tag" href="<%= urls.urlLogIn %>"><%= jStoreApp.t(\'Comein\')%></a>&nbsp;&nbsp;&nbsp;<a href="<%= urls.urlRegister %>"><%= jStoreApp.t(\'Register\')%></a></div>\r\n    </label>\r\n</div>'},function(e,t){e.exports='<div class="jstore-tag lsp-form">\r\n    <% if (number !== null) { %>\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Order_N\')%> <%= number %></h1>\r\n    <% }else{ %>\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Order_Accepted\')%></h1>\r\n    <% } %>\r\n    <% if(customerName){ %>\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-block-title"><%= jStoreApp.t(\'Order_customerName\')%>:</span>\r\n        <span class="jstore-tag lsp-order-content"><%= customerName %></span>\r\n    </div>\r\n    <% } %>\r\n    <% if(customerPhone){ %>\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-block-title"><%= jStoreApp.t(\'Order_customerPhone\')%>:</span>\r\n        <span class="jstore-tag lsp-order-content"><%= customerPhone %></span>\r\n    </div>\r\n    <% } %>\r\n    <% if(addressString){ %>\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-addressString-block-title"><%= jStoreApp.t(\'Address\') %>:</span>\r\n        <span class="jstore-tag lsp-order-addressString-content"><%= addressString %></span>\r\n    </div>\r\n    <% } %>\r\n    <% if(sum){ %>\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-sum-block-title"><%= jStoreApp.t(\'Order_Sum\')%>:</span>\r\n        <span class="jstore-tag lsp-order-sum-content"><%= sum %></span>\r\n        <span class="jstore-tag lsp-order-sum-currency-content"><%= jStoreApp.getCurrency()%></span>\r\n    </div>\r\n    <% } %>\r\n    <% if(giveChange > 0){ %>\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-giveChange-block-title"><%= jStoreApp.t(\'Change_by\') %>:</span>\r\n        <span class="jstore-tag lsp-order-giveChange-content"><%= giveChange %></span>\r\n        <span class="jstore-tag lsp-order-giveChange-currency-content"><%= jStoreApp.getCurrency()%></span>\r\n    </div>\r\n    <% } %>\r\n\r\n\r\n    <% if(id){ %>\r\n        <% if(cancelTime === null && deliveryTime){ %>\r\n        <h2 class="jstore-tag lsp-order-status-title"><%= jStoreApp.t(\'Order_status_deliveryDate\') %>: <%= deliveryTime %></h2>\r\n        <% } %>\r\n\r\n\r\n\r\n        <% if(cancelTime === null){ %>\r\n\r\n            <h2 class="jstore-tag lsp-order-status-title"><%= jStoreApp.t(\'Order_Status\') %>:</h2>\r\n\r\n            <% if(showStatusTracker){ %>\r\n                <div class="jstore-tag jstore-order-status-line">\x3c!--\r\n                <% _.each(statuses, function(status){ %>\r\n                    --\x3e<div class="jstore-tag jstore-order-status-item <% if(status.status === \'active\'){ %>jstore-order-status-item-active<% } %> jstore-order-status-<%= status.status %> jstore-order-status-<%= status.id %>">\r\n                        <div class="jstore-tag jstore-order-status-item-content">\r\n                            <%= jStoreApp.t(\'Order_status_short_\' + status.id) %>\r\n                        </div>\x3c!--\r\n                        --\x3e<div class="jstore-tag jstore-order-status-item-time">\r\n                            <%= status.status === \'active\' ? (status.date ? status.date : jStoreApp.t(\'Order_status_short_Active\')) : status.date %>\r\n                        </div>\x3c!--\r\n                        --\x3e<div class="jstore-tag jstore-order-status-item-icon"></div>\x3c!--\r\n                        --\x3e<div class="jstore-tag jstore-order-status-item-icon-delivery-car"></div>\x3c!--\r\n                    --\x3e</div>\x3c!--\r\n                <% }); %>\r\n                --\x3e</div>\r\n            <% }else{\r\n                if(statusesLength > 1){\r\n                    _.each(statuses, function(status){\r\n                        if(status.date){ %>\r\n                            <div class="jstore-tag label-row">\r\n                                <span class="jstore-tag lsp-order-status-time"><%= jStoreApp.t(\'Order_status_\' + status.id)%>: </span>\r\n                                <span class="jstore-tag lsp-order-status-text"><%= status.date %></span>\r\n                            </div>\r\n                        <% }\r\n                    });\r\n                } else { %>\r\n                    <div class="jstore-tag label-row">\r\n                        <span class="jstore-tag lsp-order-status-content">\r\n                            <% if (status == null) { %> <%= jStoreApp.t(\'Order_NF\')%> <%} else { %> <%= jStoreApp.t(\'Order_status_\' + status) %><% } %>\r\n                        </span>\r\n                    </div>\r\n                <% }\r\n            } %>\r\n\r\n            <div class="jstore-tag label-row lsp-label-row-button">\r\n                <a class="jstore-tag lsp-button lsp-js-submit" href="<%= urls.checkOrder %>"><%= jStoreApp.t(\'up_Status\')%></a>\r\n            </div>\r\n\r\n        <% }else{ %>\r\n\r\n        <div class="jstore-tag label-row">\r\n            <span class="jstore-tag lsp-order-status-block-title"><%= jStoreApp.t(\'Order_Status\')%>:</span>\r\n            <span class="jstore-tag lsp-order-status-content"><%= jStoreApp.t(\'Order_Status_Canceled\')%></span>\r\n        </div>\r\n\r\n        <% } %>\r\n\r\n    <% }else{ %>\r\n\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-status-block-title"><%= jStoreApp.t(\'Order_Status\')%>:</span>\r\n        <span class="jstore-tag lsp-order-status-content">\r\n            <% if (status == null) {%> <%= jStoreApp.t(\'Order_NF\')%> <%} else { %> <%= jStoreApp.t(\'Order_status_\' + status) %> <span class="jstore-tag lsp-order-status-content-date"></span><% } %>\r\n        </span>\r\n    </div>\r\n\r\n    <% } %>\r\n\r\n</div>'},function(e,t,r){var s,o;s=[r(2),r(3),r(31),r(116),r(118)],void 0===(o=function(e,t,r,s,o){return r.extend({template:null,templateDefault:o,templateType:"cartPage",CartItem:s,className:"lsp-block-cartpage-inner",pageName:"cart",setSeoData:!0,getSeoTitle:function(){return jStoreApp.t("OrderCart")}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(2),r(32),r(117)],void 0===(o=function(e,t,r){return t.extend({templateDefault:r,tagName:"tr"})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<td class="jstore-tag lsp-cartblock-image-cont"><span class="jstore-tag lsp-delete-item lsp-js-item-delete"></span><img class="jstore-tag lsp-cartblock-image lsp-js-item-show" src="<%= smallImageUrl %>" /></td>\r\n<td class="jstore-tag">\r\n    <div class="jstore-tag lsp-cartblock-title-cont">\r\n        <span class="jstore-tag lsp-js-item-show lsp-cartblock-title"><%= name %><% _.each(types, function(type){ print(\', \' + type.name); }) %></span>\r\n        <% if(discount >= (amount * price)){ %>\r\n        <span class="jstore-tag lsp-block-cart-item-discount"><%= jStoreApp.t(\'gift\')%></span>\r\n        <% }else if(discount){ %>\r\n        <span class="jstore-tag lsp-block-cart-item-discount"><%= jStoreApp.t(\'discount\')%></span>\r\n        <% } %>\r\n    </div>\r\n    <div class="jstore-tag lsp-block-cart-modifers lsp-js-cart-modifers"></div>\r\n</td>\r\n<td class="jstore-tag lsp-cartblock-amount-cont">\x3c!--\r\n    --\x3e\x3c!--\r\n    --\x3e<em class="jstore-tag lsp-block-cartblock-item-amount-c-count"><%= amount %></em>\x3c!--\r\n    --\x3e<em class="jstore-tag lap-block-cartblock-item-amount-c-type"><%= jStoreApp.t(useBalanceForSell ? \'amount_kg\' : \'amount\')%></em>\x3c!--\r\n--\x3e</td>\r\n<td class="jstore-tag lsp-block-cartblock-item-price-c-count">\r\n    <%= amount * price %>&nbsp;<%= jStoreApp.getCurrency()%>\r\n</td>\r\n'},function(e,t){e.exports='<h2 class="jstore-tag h1"><%= jStoreApp.t(\'OrderCart\')%></h2>\r\n<table class="jstore-tag lsp-block-cartpage-items">\r\n    <thead>\r\n        <tr class="jstore-tag">\r\n            <th class="jstore-tag"></th>\r\n            <th class="jstore-tag"><%= jStoreApp.t(\'Name_Structure\')%></th>\r\n            <th class="jstore-tag"><%= jStoreApp.t(\'Quantity\')%></th>\r\n            <th class="jstore-tag text-right"><%= jStoreApp.t(\'Cost\')%></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody class="jstore-tag ordered-left-block lsp-cart-items-list"></tbody>\r\n    <tfoot>\r\n        <tr class="jstore-tag">\r\n            <td class="jstore-tag" colspan="2"></td>\r\n            <td class="jstore-tag lsp-blockcart-total-sum" colspan="2">\r\n                <% if(discountSum || bonusSum){ %>\r\n                <%= jStoreApp.t(\'Order_Sum\')%>: <span class="jstore-tag lsp-block-cart-sum lsp-block-cart-sum-item"><%= costWithoutDiscount %> <%= jStoreApp.getCurrency()%></span><br>\r\n                <% } %>\r\n                <% if(discountSum){ %>\r\n                <%= jStoreApp.t(\'Discount\')%>: <span class="jstore-tag lsp-block-cart-discount lsp-block-cart-sum-item"><%= discountSum %> <%= jStoreApp.getCurrency()%></span><br>\r\n                <% } %>\r\n                <% if(bonusSum){ %>\r\n                <%= jStoreApp.t(\'Bonus_pay\')%>: <span class="jstore-tag lsp-block-cart-bonus lsp-block-cart-sum-item"><%= bonusSum %> <%= jStoreApp.getCurrency()%></span><br>\r\n                <% } %>\r\n                <%= jStoreApp.t(\'Total\')%>: <span class="jstore-tag lsp-block-cart-total lsp-block-cart-sum-item"><%= totalCost %> <%= jStoreApp.getCurrency()%></span><br>\r\n            </td>\r\n        </tr>\r\n    </tfoot>\r\n</table>\r\n'},function(e,t,r){var s,o;s=[r(5),r(120),r(121),r(6),r(3),r(2),r(26),r(122),r(123)],void 0===(o=function(e,t,r,h,f,u){var o=e.extend({model:null,rest:null,submit:!1,deliveryService:null,formPrefix:"order",pageName:"order",templateType:"orderPage",templateSelectorDefault:"#lsp-template-order-form",templateDefault:t,templateProcessSelectorDefault:"#lsp-template-order-process",templateProcessDefault:r,setSeoData:!0,getSeoTitle:function(){return jStoreApp.t("Order_Making")},getSeoDescription:function(){return""},getSeoKeywords:function(){return""},initialize:function(){var s=this;o.__super__.initialize.apply(this,arguments),u.fn.datetimepicker.defaults.i18n.ua={months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeekShort:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"],dayOfWeek:["Неділя","Понеділок","Вівторок","Середовище","Четвер","П'ятниця","Субота"]},u.datetimepicker.setLocale(window.jStoreAppConfig.lang),this.$el.attr("id","lsp-block-order-form"),this.listenTo(jStoreApp.cart,"change",s.change),this.listenTo(this.model,"change",s.change),this.listenTo(this.model,"change:delivery_type",function(e,t){var r=".lsp-js-delivery-type-cont-"+t;s.$(".lsp-js-delivery-type-cont").not(r).slideUp(),s.$(r).slideDown()}),this.listenTo(this.model,"change:terminal_id",function(e,t){s.render()}),this.listenTo(this.model,"change:bonusPaySum",function(e,t){var r=this.$el.find(".lsp-js-form-field-bonusPay");r.find(".lsp-js-maxPaymentSum").html(t),r.find(".lsp-js-maxPaymentSumText").html(jStoreApp.declination(t,[jStoreApp.t("bonus_Bonus_5"),jStoreApp.t("bonus_Bonus_1"),jStoreApp.t("bonus_Bonus_2")])),0<t?r.removeClass("lsp-js-hidden"):r.addClass("lsp-js-hidden")}),this.listenTo(this.model,"change:marketing_source_select",function(e,t){var r=s.$el.find(".lsp-js-marketing-info-input");s.input_marketing_source.val(""),"_OTHER_"!==t?r.hide():r.show()}),this.listenTo(this.model,"change:delivery_city",function(e,t){s.rest.get("canReceiveDelivery")&&0===s.rest.get("addressCompleteSystem")&&s.initStreet(),jStoreApp.filter.changeCity(this.input_delivery_city.val(),!!h.getItem("terminal_id"),"order")}),s.listenTo(s.model,"change:payment_type",function(e,t){var r=".lsp-js-payment-type-cont-"+t.code;s.$(".lsp-js-payment-type-cont").not(r).slideUp(),s.$(r).slideDown()})},change:function(){var e=jStoreApp.cart.getTotal();this.updateFields({costWithoutDiscount:jStoreApp.fixMath(e.cost),discountSum:jStoreApp.fixMath(e.discountSum),bonusSum:jStoreApp.fixMath(e.bonusSum),deliverySum:jStoreApp.fixMath(e.deliverySum),totalCost:jStoreApp.fixMath(e.cost-e.discountSum-e.bonusSum+e.deliverySum)})},events:{"click .lsp-js-submit":"onSubmit","change textarea":"onChangeFormField","change input":"onChangeFormField","change select":"onChangeFormField","kladr_select input":"onChangeFormField","keyup [name=coupon]":"onChangeFormField"},getRequestData:function(){var e=this,t=this.checkFormFields();if(t){var r=jStoreApp.cart.getSumForPay(),s=!1,o="address",a=jStoreApp.cart.forOrder();e.rest.get("calculateDeliveryService")&&e.deliveryService&&(a.push({id:e.deliveryService.productId,name:e.deliveryService.productName,amount:1}),r+=e.deliveryService.productSum),"delivery"!==t.delivery_type&&(s=!0,o="self");var n=[];if(t.payment_type&&n.push({paymentType:t.payment_type,sum:t["payment_type_"+t.payment_type.code+"_sum"]?t["payment_type_"+t.payment_type.code+"_sum"]:0}),"Y"===t.bonusPay&&3===e.rest.get("loyalitySystem")&&jStoreApp.cart.availablePayments){var i=e.rest.get("paymentTypes");f.each(jStoreApp.cart.availablePayments,function(t){var r={paymentType:null,sum:0};f.every(i,function(e){return!Array.isArray(e.applicableMarketingCampaigns)||-1===e.applicableMarketingCampaigns.indexOf(t.id)||(r.paymentType=e,!1)}),f.each(t.walletInfos,function(e){r.sum+=jStoreApp.parseFloat(e.maxSum)}),n.push(r)})}var l=e.rest.get("paymentIikoNet"),p=0;if(l&&(p=3===e.rest.get("loyalitySystem")?0:jStoreApp.cart.getDiscountSum(),"Y"===t.bonusPay&&3!==e.rest.get("loyalitySystem")&&(p+=jStoreApp.order.get("bonusPaySum")),0<p&&n.push({paymentType:l,sum:p})),1===n.length&&t.payment_type&&"CASH"===n[0].paymentType.code&&0===n[0].sum&&(n=[]),0<n.length&&0===n[0].sum&&(n[0].sum=r),e.rest.get("bankCardForbiddenCategories")&&Array.isArray(e.rest.get("bankCardForbiddenCategories"))&&t.payment_type&&t.payment_type&&("POL"===t.payment_type.code||"ECARD"===t.payment_type.code)){var c=e.rest.get("bankCardForbiddenCategories").join(";"),d=[];if(jStoreApp.cart.each(function(e){var t=jStoreApp.dbItems.get(e.get("itemId"));t&&-1!==c.indexOf(t.get("categoryId"))&&d.push(t.get("name"))}),d.length)return this.$(".lsp-form-error-mess-common-cont").html(jStoreApp.t("has_forbiden_pay_category",{forbiddenItems:d.join(", ")})).slideDown(),!1}var u=jStoreApp.DeliveryCities.get(t.delivery_city),m={restaraunt:e.rest.get("id"),order:{id:jStoreApp.uuid(),phone:t.phone,orderType:o,address:{street:t.delivery_street,streetClassifierId:t.delivery_street_kladr_current?t.delivery_street_kladr_current.id:null,home:t.home,city:u?u.get("name"):null,cityId:u?u.get("kladrId"):null},date:void 0!==t["date_"+t.delivery_type]?t["date_"+t.delivery_type]:t.date,items:a,paymentItems:n.length?n:null,isSelfService:s,personsCount:t.person_count?parseInt(t.person_count):0,sumToPay:r},customer:{id:jStoreApp.user.getId(),phone:t.phone,name:t.name}};t.email.length&&(m.customer.email=t.email),t.apartment.length&&(m.order.address.apartment=t.apartment),t.housing.length&&(m.order.address.housing=t.housing),t.entrance.length&&(m.order.address.entrance=t.entrance),t.floor.length&&(m.order.address.floor=t.floor),t.doorphone.length&&(m.order.address.doorphone=t.doorphone),t.message.length&&(m.order.comment=t.message);var g=t.marketing_source_select&&"_OTHER_"!==t.marketing_source_select?t.marketing_source_select.length?t.marketing_source_select:null:t.marketing_source.length?t.marketing_source:null;return g&&(m.order.marketingSource=g),t.card_number.length&&(m.customer.cardNumber=t.card_number),t.coupon.length&&(m.coupon=t.coupon),t.post_code_city&&(m.order.address.comment=t.post_code_city,m.order.address.home="-",m.order.address.city="-"),t.payment_token&&(m.order.worldPayToken=t.payment_token),!1===jStoreApp.filter.get("terminal_default")&&jStoreApp.filter.get("terminal_id")?m.deliveryTerminalId=h.getItem("terminal_id",null):"self"===o&&t.terminal_id&&(m.deliveryTerminalId=t.terminal_id),m}return!1},onSubmit:function(){var r=this;if(!r.submit){var s=r.getFormFieldsValues(),o=r.getRequestData();return o&&(this.model.saveFields(),r.submit=!0,setTimeout(function(){!0===r.submit&&r.render_process()},3e3),jStoreApp.attachEvent("beforeSubmitOrder",[o]),u.ajax({url:r.rest.getUrl("addOrder"),type:"post",async:!0,data:{json:JSON.stringify(o),lang:window.jStoreAppConfig.lang},dataType:"json",success:function(e){if(r.submit=!1,e.service)r.deliveryService=e.service,r.render(),r.validateFormAnswer(e),r.$(".jstore-js-delivery-info").html(jStoreApp.t("Order_delivery",{curr:jStoreApp.getCurrency(),summ:jStoreApp.fixMath(r.deliveryService.productSum)})),r.$(".lsp-js-submit").html(jStoreApp.t("Order_delivery_continue")),jStoreApp.filter.set("pageParams",{service:e.service});else if(r.validateFormAnswer(e))if(window.jStoreApp.attachEvent("orderPlaced",[{requestData:o,answer:e}]),window.jStoreApp.ga("ec:setAction","checkout",{step:3}),window.jStoreApp.ga("send","event",{eventCategory:"Checkout",eventAction:"Final step"}),window.jStoreApp.cart.resetCart(),r.model.set({bonusPay:"N",bonusPaySum:0}),jStoreApp.discountResponseTreatment({discountInfo:[],availableFreeProducts:[]},jStoreApp.restaurant,jStoreApp.cart,jStoreApp.user,r.model,jStoreApp.filter),s.payment_type&&"ECARD"===s.payment_type.code&&3===r.rest.get("onlinePaymentSystem")&&e.success)r.post("https://secure"+(0===window.jStoreAppConfig.worldPayTestMode?"":"-test")+".worldpay.com/wcc/purchase",{testMode:window.jStoreAppConfig.worldPayTestMode,instId:r.rest.get("worldPayClientKey"),cartId:o.order.id,MC_orderId:o.order.id,currency:"GBP",country:"GB",amount:o.order.paymentItems[0].sum,desc:"Order payment",name:o.customer.name,town:o.order.address.city,address1:o.order.address.street,email:s.email.length?s.email:""});else if(e.url)location.href=e.url;else{var t=h.getItem("orderFields_"+jStoreApp.filter.get("terminal_id"),!1);t&&(["coupon","date_takeaway","date_delivery","date"].every(function(e){t[e]&&(t[e]="")}),h.setItem("orderFields_"+jStoreApp.filter.get("terminal_id"),t)),e.success?(h.setItem("successOrderSum",o.order.sumToPay),location.href=r.rest.documentRoot()+"#!/order/success"+(e.info.orderId?"/"+e.info.orderId:"")):(r.submit=!1,location.href=r.rest.documentRoot()+"#!/order/error")}else r.render(),r.validateFormAnswer(e)},error:function(){r.submit=!1,location.href=r.rest.documentRoot()+"#!/order/error"}})),!1}},post:function(e,t,r){r=r||"post";var s=document.createElement("form");for(var o in s.setAttribute("method",r),s.setAttribute("action",e),t)if(t.hasOwnProperty(o)){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",o),a.setAttribute("value",t[o]),s.appendChild(a)}document.body.appendChild(s),s.submit()},renderProcess:function(){var c=this,e={canReceiveDelivery:c.rest.get("canReceiveDelivery"),canReceiveTakeAway:c.rest.get("canReceiveTakeAway"),kladrKey:c.rest.get("kladrKey"),kladrToken:c.rest.get("kladrToken")},t=c.rest.get("addressCompleteSystem"),d=f.clone(c.model.attributes),r=[];f.each(c.rest.get("paymentTypesActive"),function(e){r.push({id:e.id,name:e.name,value:e.code,cssInput:"lsp-js-payment-type lsp-js-payment-type-"+e.code,cssCont:"lsp-js-payment-type-cont lsp-js-payment-type-cont-"+e.code,active:!0,default:d.payment_type.code===e.code}),0});var s=jStoreApp.DeliveryTerminals.getCitiesList();d.delivery_city&&s&&s.length&&s.every(function(e){return e.active=e.id===d.delivery_city,!0});var o={delivery:{default:"delivery"===d.delivery_type,name:jStoreApp.t("Delivery_to_House"),active:e.canReceiveDelivery,cssInput:"lsp-js-delivery-type lsp-js-delivery-type-delivery",cssCont:"lsp-js-delivery-type-cont lsp-js-delivery-type-cont-delivery",value:"delivery",cities:s},takeaway:{default:"takeaway"===d.delivery_type,name:jStoreApp.t("Take_from_Rest"),active:e.canReceiveTakeAway,cssInput:"lsp-js-delivery-type lsp-js-delivery-type-takeaway",cssCont:"lsp-js-delivery-type-cont lsp-js-delivery-type-cont-takeaway",value:"takeaway",deliveryTerminals:jStoreApp.DeliveryTerminals.getList()}};jStoreApp.filter.set("terminal_set_in_order",o.takeaway.default),jStoreApp.filter.set("city_set_in_order",o.delivery.default);var a=0;e.canReceiveDelivery&&a++,e.canReceiveTakeAway&&a++;var n,i,l=jStoreApp.cart.getTotal();c.$el.empty().html(c.template({paymentTypes:r,deliveryTypes:o,deliveryTypesCount:a,addressCompleteSystem:t,maxPaymentSum:d.bonusPaySum,maxPaymentSumText:jStoreApp.declination(d.bonusPaySum,[jStoreApp.t("bonus_Bonus_5"),jStoreApp.t("bonus_Bonus_1"),jStoreApp.t("bonus_Bonus_2")]),maxPaymentSumClass:c.rest.canPayDiscount()&&0<d.bonusPaySum?"":"lsp-js-hidden",fieldsValues:d,showCardNumber:3!==c.rest.get("loyalitySystem")&&c.rest.get("showCardNumber"),showPersonsCount:c.rest.get("showPersonsCount"),showCoupon:3===c.rest.get("loyalitySystem"),showMarketingSource:c.rest.get("showMarketingSource")&&!c.rest.getUtmMarketing(),useUserAgreement:c.rest.needUserAgrement(),userAgreementUrl:c.rest.get("userAgreementUrl"),marketingSourceInfo:c.rest.get("marketingSourceInfo"),activeTerminal:jStoreApp.DeliveryTerminals.getActiveTerminal(),emailChooseIsRequired:c.rest.get("emailChooseIsRequired"),loyalitySystem:c.rest.get("loyalitySystem"),orderDateTimePickerItems:window.jStoreAppConfig.orderDateTimePickerItems,costWithoutDiscount:jStoreApp.fixMath(l.cost),discountSum:jStoreApp.fixMath(l.discountSum),bonusSum:jStoreApp.fixMath(l.bonusSum),deliverySum:jStoreApp.fixMath(l.deliverySum),totalCost:jStoreApp.fixMath(l.cost-l.discountSum-l.bonusSum+l.deliverySum)})),f.each(o,function(e){e.default||c.$el.find(".lsp-js-delivery-type-cont-"+e.value).hide()}),f.each(r,function(e){e.default||c.$el.find(".lsp-js-payment-type-cont-"+e.value).hide()}),c.input_name=c.$('[name="name"]'),c.input_email=c.$('[name="email"]'),c.input_phone=c.$('[name="phone"]'),c.input_delivery_city=c.$('[name="delivery_city"]'),c.input_delivery_street=c.$('[name="delivery_street"]'),c.input_home=c.$('[name="home"]'),c.input_apartment=c.$('[name="apartment"]'),c.input_housing=c.$('[name="housing"]'),c.input_entrance=c.$('[name="entrance"]'),c.input_floor=c.$('[name="floor"]'),c.input_doorphone=c.$('[name="doorphone"]'),c.input_dates=c.$('input[name="date_delivery"], input[name="date_takeaway"]'),c.input_message=c.$('[name="message"]'),c.input_person_count=c.$('[name="person_count"]'),c.input_payment_type_CASH_sum=c.$('[name="payment_type_CASH_sum"]'),c.input_marketing_source=c.$('[name="marketing_source"]'),c.input_marketing_source_select=c.$('[name="marketing_source_select"]'),c.input_takeaway_terminal=c.$('[name="takeaway_terminal"]'),c.input_cardNumber=c.$('[name="cardNumber"]'),c.input_post_code=c.$('[name="post_code"]'),c.post_code_city=c.$('[name="post_code_city"]'),c.payment_token=c.$('[name="payment_token"]'),f.each(c.input_dates,function(t){t=u(t);var e=36e5,r=jStoreApp.DateNow().getTime(),s=new Date(r),o=new Date(r);o.setTime(9e5*Math.ceil((r+36e5)/9e5)),"date_takeaway"===t.attr("name")&&c.rest.get("defaultSelfServiceTime")?(e=6e4*c.rest.get("defaultSelfServiceTime"),o.setTime(r+e)):o.setTime(9e5*Math.ceil((r+36e5)/9e5));var a=o.getTime();t.val()&&jStoreApp.stringToDate2(t.val())&&(a=jStoreApp.stringToDate2(t.val()).getTime()),a<o.getTime()&&(a=o.getTime(),t.val("")),t.data("time",a);var n=o.getTime()>s.getTime()&&(o.getFullYear()>s.getFullYear()||o.getMonth()>s.getMonth()||o.getDate()>s.getDate())?"00:00":(o.getHours()<10?"0"+o.getHours():o.getHours())+":"+(10<o.getMinutes()?o.getMinutes():"0"+o.getMinutes()),i=window.jStoreAppConfig.orderDateTimePickerConfig?window.jStoreAppConfig.orderDateTimePickerConfig:{},l=f.extend({id:"lsp-block-datetimepicker",minDate:new Date(a),minTime:n,startDate:new Date(a),dayOfWeekStart:1,step:5,format:"Y.m.d H:i"},i);if(l.onSelectDate=function(e){i.minTime||(e.getTime()>o.getTime()&&(e.getFullYear()>o.getFullYear()||e.getMonth()>o.getMonth()||e.getDate()>o.getDate())?this.setOptions({minTime:"00:00"}):this.setOptions({minTime:n})),i.onSelectDate&&i.onSelectDate.apply(this,arguments)},l.onChangeDateTime=function(e){e&&t.data("time",e.getTime()),i.onChangeDateTime&&i.onChangeDateTime.apply(this,arguments)},t.datetimepicker(l),d.post_code_city&&d.post_code_cityOptions){var p=[];f.each(d.post_code_cityOptions,function(e){(e=e.value.split(","))[0].trim(),e[1].trim();var t=e[5].trim();-1===p.indexOf(t)&&p.push(t)}),1===p.length&&jStoreApp.DeliveryCities.every(function(e){return e.get("name")!==p[0]||(jStoreApp.filter.changeCity(e.get("id"),!0),!1)})}}),"false"!==c.input_phone.data("useHelper")&&c.input_phone.mask(c.rest.getPhoneFormat(),{placeholder:"_"}),c.initStreet(),0!==c.input_person_count.length&&"false"!==c.input_person_count.data("useHelper")&&(n=c.input_person_count,c.input_person_count.keyup(function(){var e=n.val(),t=e.replace(/[^\d]/g,"");t!==e&&n.val(t)})),0!==c.input_payment_type_CASH_sum.length&&"false"!==c.input_payment_type_CASH_sum.data("useHelper")&&(i=c.input_payment_type_CASH_sum).keyup(function(){var e=i.val(),t=e.replace(/[^\d]/g,"");t!==e&&i.val(t)}),0!==c.input_marketing_source_select.length&&c.$el.find(".lsp-js-marketing-info-input").hide();return this},initStreet:function(){var n=this,e={canReceiveDelivery:n.rest.get("canReceiveDelivery"),canReceiveTakeAway:n.rest.get("canReceiveTakeAway"),kladrKey:n.rest.get("kladrKey"),kladrToken:n.rest.get("kladrToken")};if(0===n.rest.get("addressCompleteSystem")){var t=jStoreApp.DeliveryCities.get(this.getFormFieldValue("delivery_city")),r=n.model.get("delivery_street_kladr_current");r=r||null,!0!==n.input_delivery_street.data("kladred")?t&&t.get("kladrId")&&e.canReceiveDelivery&&e.kladrKey&&e.kladrToken&&(n.input_delivery_street.kladr({token:e.kladrToken,key:e.kladrKey,type:u.kladr.type.street,parentType:u.kladr.type.city,parentId:t.get("kladrId"),labelFormat:n.LabelFormat,verify:!0,current:r,select:function(e){e&&n.buildingBuilding(e)},check:function(e){e&&n.buildingBuilding(e)}}),n.input_delivery_street.data("kladred",!0)):t&&t.get("kladrId")?n.input_delivery_street.kladr("parentId",t.get("kladrId")):n.input_delivery_street.kladr("parentId",null),n.buildingBuilding(r)}else if(1===n.rest.get("addressCompleteSystem")&&n.rest.get("getAddressIoApiKey")){var s=null,o=null;n.input_post_code.keyup(function(){var e=n.input_post_code.val();5<=e.length&&s!==e&&(s=e,o&&clearTimeout(o),o=setTimeout(function(){u.ajax({url:"https://api.getAddress.io/v2/uk/"+e,data:{"api-key":n.rest.get("getAddressIoApiKey")},dataType:"json",success:function(e){if(e.Addresses){var o="",a=[];f.each(e.Addresses,function(e){var t=(e=e.split(","))[0].trim(),r=e[1].trim(),s=e[5].trim();-1===a.indexOf(s)&&a.push(s),o+='<option value="'+e+'">'+t+(r?", "+r:"")+"</option>"}),1===a.length&&jStoreApp.DeliveryCities.every(function(e){return e.get("name")!==a[0]||(jStoreApp.filter.changeCity(e.get("id"),!0),!1)}),n.post_code_city.html(o),n.$(".lsp-js-form-field-post_code_city").removeClass("lsp-js-hidden")}}})},500))})}else if(2===n.rest.get("addressCompleteSystem")){var a=!1;n.input_delivery_street.kladr({parentId:1,token:e.kladrToken,key:e.kladrKey,type:u.kladr.type.street,parentType:u.kladr.type.city,labelFormat:n.LabelFormat,verify:!0,source:function(s,o){function r(){if(1<s.length){s=s.toLowerCase();for(var e=n.input_delivery_city.val(),t=[],r=0;r<a.length;r++)e===a[r].cityId&&-1!==a[r].searchName.indexOf(s)&&t.push({id:a[r].kladrId,name:a[r].name,type:"Улица"});o(t)}}!1===a?(a=[],u.ajax({url:n.rest.getUrl("Streets"),dataType:"json",success:function(e){if(e.streets){for(var t=0;t<e.streets.length;t++)e.streets[t].searchName=e.streets[t].name.toLowerCase();a=e.streets}r()},error:function(){}})):0<a.length&&r()},select:function(e){e&&n.buildingBuilding(e)},check:function(e){e&&n.buildingBuilding(e)},current:n.model.get("delivery_street_kladr_current")})}},buildingBuilding:function(e){var s=this,t=(s.rest.get("canReceiveDelivery"),s.rest.get("kladrKey")),r=s.rest.get("kladrToken");0===s.rest.get("addressCompleteSystem")&&(!0!==s.input_home.data("kladred")?e&&(this.input_home.kladr({token:r,key:t,type:u.kladr.type.building,parentType:u.kladr.type.street,parentId:e.id,labelFormat:this.LabelFormat,verify:!0,select:function(t){var r=[];return["корпус","строение","литера","стр.","стр","к.","к"].every(function(e){return 1===(r=t.name.split(e)).length}),0<r.length&&s.input_home.val(r[0].trim()),2===r.length&&0<s.input_housing.length&&s.input_housing.val(r[1].replace(/( строение| корпус| стр\.| к\.| стр| к | литера)/,",").trim()),!1}}),this.input_home.data("kladred",!0)):e&&this.input_home.kladr("parentId",e.id))},render_process:function(){this.$el.empty().append(this.templateProcess({deliveryServicePhone:this.rest.get("deliveryServicePhone")}))},LabelFormat:function(e,t){var r="";if("string"!=typeof e.name||"string"!=typeof t)return r;var s=e.name.toLowerCase();t=t.toLowerCase();var o=s.indexOf(t);if(o=0<o?o:0,e.typeShort&&(r+='<span class="ac-s2">'+e.typeShort+". </span>"),t.length<e.name.length?(r+='<span class="ac-s2">'+e.name.substr(0,o)+"</span>",r+='<span class="ac-s">'+e.name.substr(o,t.length)+"</span>",r+='<span class="ac-s2">'+e.name.substr(o+t.length,e.name.length-t.length-o)+"</span>"):r+='<span class="ac-s">'+e.name+"</span>",e.parents)for(var a=e.parents.length-1;-1<a;a--){var n=e.parents[a];n.name&&(r&&(r+='<span class="ac-st">, </span>'),r+='<span class="ac-st">'+n.name+" "+n.typeShort+".</span>")}return r},formFields:{name:{validateType:"text",maxLength:60},email:{validateType:"email"},phone:{type:"phone",validateType:"phone"},delivery_type:{type:"deliveryType"},date:{type:"dateDelivery"},date_delivery:{type:"dateDelivery"},date_takeaway:{type:"dateDelivery"},message:{validateType:"text",maxLength:500},delivery_city:{name:"delivery_city",type:"delivery_city"},delivery_street:{type:"street",validateType:"text",maxLength:60},delivery_street_kladr_current:{name:"delivery_street",type:"street_kladr_current"},home:{maxLength:10},apartment:{maxLength:10},housing:{maxLength:10},entrance:{maxLength:10},floor:{maxLength:10},doorphone:{maxLength:10},takeaway_terminal:{modelField:"terminal_id",type:"terminal"},userAgreement:{type:"userAgreement",validateType:"userAgreement"},card_number:{maxLength:60},coupon:{maxLength:50},person_count:{type:"integer",validateType:"text",maxLength:10},payment_type:{type:"paymentType"},payment_type_CASH_sum:{modelField:"payment_type_cash_sum",type:"paymentTypeSum"},marketing_source:{type:"marketing_source"},marketing_source_select:{},bonusPay:{type:"bonusPay"},post_code:{maxLength:10},post_code_city:{type:"post_code_city"},payment_token:{}},formFieldRequired:function(e){var t=this;switch(e.name){case"email":return t.rest.get("emailChooseIsRequired");case"userAgreement":return t.rest.needUserAgrement();case"post_code":case"post_code_city":return"delivery"===t.model.get("delivery_type")&&1===t.rest.get("addressCompleteSystem");case"name":case"phone":return"delivery"===t.model.get("delivery_type")&&1!==t.rest.get("addressCompleteSystem")||"delivery"!==t.model.get("delivery_type");case"delivery_street":if("street"===e.type)return"delivery"===t.model.get("delivery_type")&&1!==t.rest.get("addressCompleteSystem");break;case"home":return"delivery"===t.model.get("delivery_type")&&1!==t.rest.get("addressCompleteSystem");case"takeaway_terminal":var r=t.rest.getTerminals();return"delivery"!==t.model.get("delivery_type")&&r.length;default:return e.required}},checkFormFields:function(){var t="";jStoreApp.cart.isEmpty()&&(t=jStoreApp.t("empty_cart"));var e=jStoreApp.attachEvent("beforeOrder",[jStoreApp.order,jStoreApp.cart]);return f.each(e,function(e){e&&(t=e)}),t.length?(this.$(".lsp-form-error-mess-common-cont").html(t).slideDown(),!1):!!this.validateFormFields()&&this.getFormFieldsValues()}});return o}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-form">\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Order_Making\')%></h1>\r\n    <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-common-cont lsp-form-error-common-mess"></div>\r\n    <label class="jstore-tag label-row lsp-js-form-field-name">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Your_name\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="name" value="<%= fieldsValues.name %>"></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-js-form-field-phone">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Contact_phone\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="text" name="phone" value="<%= fieldsValues.phone %>"></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-js-form-field-email">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Email\')%><% if(emailChooseIsRequired){ %><span class="jstore-tag lsp-field-required-simbol">*</span><% } %>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="email" value="<%= fieldsValues.email %>"></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n\r\n    <% if(paymentTypes.length > 1){ %>\r\n    <div class="jstore-tag label-row lsp-js-form-field-payment_type">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Payment\')%> *:</span>\r\n        <span class="jstore-tag label-row-field full-row">\r\n            <% _.each(paymentTypes, function(paymentType){\r\n                if(!paymentType.active)\r\n                    return; %>\r\n            <div class="jstore-tag lsp-order-paymenttype-variant lsp-order-paymenttype-variant-<%= paymentType.value %>">\r\n                <label class="jstore-tag lsp-order-paymenttype-label"><input type="radio" value="<%= paymentType.value %>" name="payment_type" class="jstore-tag lsp-order-paymenttype-input <%= paymentType.cssInput %>" <%= paymentType[\'default\'] ? \'checked\' : \'\' %> ><%= paymentType.name %></label>\r\n                <div class="jstore-tag lsp-order-paymenttype-variant-fields">\r\n                    <% if(paymentType.value === \'CASH\'){ %>\r\n                    <div  class="jstore-tag <%= paymentType.cssCont %>">\r\n                        <label class="jstore-tag label-row lsp-js-form-field-payment_type_CASH_sum">\r\n                            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Surr\')%>:</span>\r\n                            <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="payment_type_CASH_sum" value="<%= fieldsValues.payment_type_CASH_sum %>"></span>\r\n                        </label>\r\n                    </div>\r\n                    <% }else if(paymentType.value === \'ECARD\'){ %>\r\n                    <div  class="jstore-tag <%= paymentType.cssCont %>">\r\n                        <div id="jstore-payment-block" class="jstore-tag <%= paymentType.cssCont %>"></div>\r\n                    </div>\r\n                    <% } %>\r\n                </div>\r\n            </div>\r\n            <% }); %>\r\n        </span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </div>\r\n    <% }else if(paymentTypes.length === 1){ %>\r\n    <input type="hidden" name="payment_type" value="<%= paymentTypes[0].value %>">\r\n    <% } %>\r\n\r\n    <% if(loyalitySystem > 0){ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-bonusPay <%= maxPaymentSumClass %>">\r\n        <span class="jstore-tag label-row-text"></span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag lsp-order-bonus-pay-input" type="checkbox" <%= fieldsValues.bonusPay === \'Y\' ? \'checked\' : \'\' %> value="Y" name="bonusPay"><%= jStoreApp.t(\'order_bonus\', {\'maxPaymentSum\' : maxPaymentSum, \'maxPaymentSumText\' : maxPaymentSumText})%></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% } %>\r\n\r\n\r\n\r\n\r\n\r\n    <% if(deliveryTypesCount > 1){ %>\r\n    <div class="jstore-tag label-row lsp-js-form-field-delivery_type">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Delivery\')%> *:</span>\r\n        <span class="jstore-tag label-row-field full-row">\r\n            <% _.each(deliveryTypes, function(deliveryType){\r\n                if(!deliveryType.active)\r\n                    return; %>\r\n            <label class="jstore-tag"><input type="radio" value="<%= deliveryType.value %>" name="delivery_type" class="jstore-tag lsp-order-deliverytype-input <%= deliveryType.cssInput %>" <%= deliveryType[\'default\'] ? \'checked\' : \'\' %> ><%= deliveryType.name %></label>\r\n            <% }); %>\r\n        </span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </div>\r\n    <% } %>\r\n\r\n\r\n    <% if(deliveryTypes.delivery.active) { %>\r\n    <div  class="jstore-tag <%= deliveryTypes.delivery.cssCont %>">\x3c!--\r\n        --\x3e<% if(addressCompleteSystem === 1){ %>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row lsp-js-form-field-post_code">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Post_code\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n            <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="post_code" value="<%= fieldsValues.post_code %>"></span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row lsp-js-form-field-post_code_city <%= fieldsValues.post_code_city ? \'\' : \'lsp-js-hidden\' %>">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Post_address\')%> *:</span>\r\n            <span class="jstore-tag label-row-field label-row-field-select">\r\n                <select class="jstore-tag" name="post_code_city"><% if(fieldsValues.post_code_city){\r\n                    _.each(fieldsValues.post_code_cityOptions, function(option){\r\n                        %><option value="<%= option.value %>" <%= option.value === fieldsValues.post_code_city ? \'selected\' : \'\' %>><%= option.name %></option><%\r\n                    }\r\n                )} %></select>\r\n            </span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<% }else{ %>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row lsp-js-form-field-delivery_city">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'City\')%> *:</span>\r\n                    <span class="jstore-tag label-row-field label-row-field-select">\r\n                        <% if(deliveryTypes.delivery.cities.length === 1){\r\n                            var city = deliveryTypes.delivery.cities[0]; %>\r\n                        <input type="hidden" name="delivery_city" value="<%= city.id %>">\r\n                        <input type="text" readonly class="jstore-tag input" value="<%= city.name %>">\r\n                        <% }else{ %>\r\n                        <select class="jstore-tag" name="delivery_city">\r\n                            <% _.each(deliveryTypes.delivery.cities, function(city) { %>\r\n                            <option class="jstore-tag" value="<%= city.id %>" <%= city.active ? \'selected\' : \'\' %>><%= city.name %></option>\r\n                            <% }); %>\r\n                        </select>\r\n                        <% } %>\r\n                    </span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row lsp-js-form-field-delivery_street">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Street\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n            <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="delivery_street" value="<%= fieldsValues.delivery_street %>"></span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row label-row-half lsp-js-form-field-home">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Home\')%><span class="jstore-tag lsp-field-required-simbol">*</span>:</span>\r\n            <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="10" type="text" name="home" value="<%= fieldsValues.home %>"></span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row label-row-half lsp-js-form-field-housing">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Housing\')%>:</span>\r\n            <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="10" type="text" name="housing" value="<%= fieldsValues.housing %>"></span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row label-row-half lsp-js-form-field-apartment">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Apartment\')%>:</span>\r\n            <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="10" type="text" name="apartment" value="<%= fieldsValues.apartment %>"></span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row label-row-half lsp-js-form-field-entrance">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Entrance\')%>:</span>\r\n            <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="10" type="text" name="entrance" value="<%= fieldsValues.entrance %>"></span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row label-row-half lsp-js-form-field-floor">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Floor\')%>:</span>\r\n            <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="10" type="text" name="floor" value="<%= fieldsValues.floor %>"></span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row label-row-half lsp-js-form-field-doorphone">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'DoorPhone\')%>:</span>\r\n            <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="10" type="text" name="doorphone" value="<%= fieldsValues.doorphone %>"></span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<label class="jstore-tag label-row lsp-js-form-field-delivery_date">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'delivery_date\') %>:</span>\r\n        <span class="jstore-tag label-row-field"><% if(orderDateTimePickerItems.length){\r\n            %><select class="jstore-tag" name="date_delivery"><%\r\n                _.each(orderDateTimePickerItems, function(item){\r\n                    %><option value="<%= item.value %>"><%= item.text %></option><%\r\n                }) %></select><%\r\n            }else{\r\n            %><input class="jstore-tag" type="text" name="date_delivery" placeholder="<%= jStoreApp.t(\'As_soon_As\')%>" value="<%= fieldsValues.date_delivery %>"><%\r\n            } %></span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n        --\x3e<% } %>\x3c!--\r\n\r\n    --\x3e</div>\r\n\r\n    <% } %>\r\n\r\n    <% if(deliveryTypes.takeaway.active) { %>\r\n    <div class="jstore-tag <%= deliveryTypes.takeaway.cssCont %>">\x3c!--\r\n        <% if(deliveryTypes.takeaway.deliveryTerminals.length > 1){ %>\r\n        --\x3e<div class="jstore-tag label-row lsp-js-form-field-takeaway_terminal">\r\n            <div class="jstore-tag label-row-text"><%= jStoreApp.t(\'Terminal\')%>:<span class="jstore-tag lsp-field-required-simbol">*</span>:</div>\r\n            <div class="jstore-tag label-row-field label-row-field-select">\r\n                <select class="jstore-tag" name="takeaway_terminal">\r\n                <%\r\n                    var activeTerminal;\r\n                    _.each(deliveryTypes.takeaway.deliveryTerminals, function( deliveryTerminal ){\r\n                        if(deliveryTerminal.active){\r\n                            activeTerminal = deliveryTerminal;\r\n                        }\r\n                    %>\r\n                    <option class="jstore-tag" <%= (deliveryTerminal.active ? \'selected\' : \'\') %> value="<%= deliveryTerminal.id %>"><%= deliveryTerminal.name %></option>\r\n                <% }); %>\r\n                </select><%\r\n                if(activeTerminal && activeTerminal.address){\r\n                %>\r\n                <p class="jstore-tag label-row-text-info"><%= activeTerminal.address %></p>\r\n                <%\r\n                }\r\n                %>\r\n            </div>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </div>\x3c!--\r\n        <% } %>\r\n\r\n        --\x3e<label class="jstore-tag label-row lsp-js-form-field-delivery_date">\r\n            <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'takeaway_date\') %>:</span>\r\n            <span class="jstore-tag label-row-field"><% if(orderDateTimePickerItems.length){\r\n            %><select class="jstore-tag" name="date_takeaway"><%\r\n                _.each(orderDateTimePickerItems, function(item){\r\n                    %><option value="<%= item.value %>"><%= item.text %></option><%\r\n                }) %></select><%\r\n            }else{\r\n            %><input class="jstore-tag" type="text" name="date_takeaway" placeholder="<%= jStoreApp.t(\'As_soon_As\')%>"  value="<%= fieldsValues.date_takeaway %>"><%\r\n            } %></span>\r\n            <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n        </label>\x3c!--\r\n\r\n    --\x3e</div>\r\n    <% } %>\r\n\r\n\r\n\r\n\r\n\r\n\r\n    <% if(showPersonsCount){ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-person_count">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Parson_count\')%>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="10" type="number" min="1" step="1" max="100" name="person_count" value="<%= fieldsValues.person_count %>"></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% } %>\r\n\r\n    <% if(showCoupon){ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-coupon">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'coupon\') %>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="coupon" value="<%= fieldsValues.coupon %>"></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% }else if(showCardNumber){ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-card_number">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'card_num\') %>:</span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" maxlength="60" type="text" name="card_number" value="<%= fieldsValues.cardNumber %>"></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% } %>\r\n\r\n    <% if(showMarketingSource){ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-marketing_source">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Where_found\')%>:</span>\r\n        <% if(marketingSourceInfo.length){ %>\r\n        <span class="jstore-tag label-row-field label-row-field-couple lsp-js-marketing-info-select">\r\n            <select class="jstore-tag" name="marketing_source_select">\r\n                <option class="jstore-tag" value=""></option>\r\n                <% _.each(marketingSourceInfo, function( item ){ %>\r\n                <option class="jstore-tag" value="<%= item.id %>" <%= fieldsValues.marketing_source_select === item.id ? \'selected\' : \'\' %>><%= item.name %></option>\r\n                <% }) %>\r\n                <option class="jstore-tag" value="_OTHER_"><%= jStoreApp.t(\'Other_source\')%></option>\r\n            </select>\r\n        </span>\r\n        <% } %>\r\n        <span class="jstore-tag label-row-field lsp-js-marketing-info-input">\r\n            <input class="jstore-tag" maxlength="60" type="text" name="marketing_source" value="<%= fieldsValues.marketing_source %>">\r\n        </span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% } %>\r\n\r\n    <label class="jstore-tag label-row lsp-js-form-field-message">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Order_comment\')%>:</span>\r\n        <span class="jstore-tag label-row-field"><textarea class="jstore-tag" maxlength="500" name="message"><%= fieldsValues.message %></textarea></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n\r\n    <% if(useUserAgreement){ %>\r\n    <label class="jstore-tag label-row lsp-js-form-field-userAgreement">\r\n        <span class="jstore-tag label-row-text"></span>\r\n        <span class="jstore-tag label-row-field"><input class="jstore-tag" type="checkbox" value="Y" name="userAgreement" <%= fieldsValues.userAgreement === \'Y\' ? \'checked\' : \'\' %>> <%= jStoreApp.t(\'user_Agree\', {\'userAgreementUrl\' : userAgreementUrl})%></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <% } %>\r\n\r\n    <label class="jstore-tag label-row lsp-form-field-order-sum lsp-js-form-field-costWithoutDiscount" data-jstore-class=\'{\r\n        "lsp-js-hidden" : !(discountSum || bonusSum)\r\n    }\'>\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Order_Sum\')%>:</span>\r\n        <span class="jstore-tag label-row-field"><span class="jstore-tag lsp-block-order-costWithoutDiscount lsp-block-order-sum-item"><span class="jstore-js-cart-order-sum-value" data-jstore-value="costWithoutDiscount"></span> <%= jStoreApp.getCurrency()%></span></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-form-field-order-sum lsp-js-form-field-discountSum"  data-jstore-class=\'{\r\n        "lsp-js-hidden" : !discountSum\r\n    }\'>\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Discount\')%>:</span>\r\n        <span class="jstore-tag label-row-field"><span class="jstore-tag lsp-block-order-discountSum lsp-block-order-sum-item"><span class="jstore-js-cart-order-sum-value" data-jstore-value="discountSum"></span> <%= jStoreApp.getCurrency()%></span></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-form-field-order-sum lsp-js-form-field-bonusSum"  data-jstore-class=\'{\r\n        "lsp-js-hidden" : !bonusSum\r\n    }\'>\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Bonus_pay\')%>:</span>\r\n        <span class="jstore-tag label-row-field"><span class="jstore-tag lsp-block-order-bonusSum lsp-block-order-sum-item"><span class="jstore-js-cart-order-sum-value" data-jstore-value="bonusSum"></span> <%= jStoreApp.getCurrency()%></span></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-form-field-order-sum lsp-js-form-field-deliverySum"  data-jstore-class=\'{\r\n        "lsp-js-hidden" : !deliverySum\r\n    }\'>\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Delivery_pay\')%>:</span>\r\n        <span class="jstore-tag label-row-field"><span class="jstore-tag lsp-block-order-deliverySum lsp-block-order-sum-item"><span class="jstore-js-cart-order-sum-value" data-jstore-value="deliverySum"></span> <%= jStoreApp.getCurrency()%></span></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n    <label class="jstore-tag label-row lsp-form-field-order-sum lsp-js-form-field-totalCost">\r\n        <span class="jstore-tag label-row-text"><%= jStoreApp.t(\'Total\')%>:</span>\r\n        <span class="jstore-tag label-row-field"><span class="jstore-tag lsp-block-order-totalCost lsp-block-order-sum-item"><span class="jstore-js-cart-order-sum-value" data-jstore-value="totalCost"></span> <%= jStoreApp.getCurrency()%></span></span>\r\n        <div class="jstore-tag lsp-form-error-mess lsp-form-error-mess-cont lsp-form-error-mess"></div>\r\n    </label>\r\n\r\n    <label class="jstore-tag label-row">\r\n        <div class="jstore-tag label-row-field delivery-info jstore-js-delivery-info"></div>\r\n        <span class="jstore-tag label-row-field "><span class="jstore-tag lsp-button lsp-js-submit"><%= jStoreApp.t(\'Page_make_order\')%></span></span>\r\n    </label>\r\n\r\n    <input type="hidden" name="payment_token" value="">\r\n</div>\r\n'},function(e,t){e.exports="<h1 class=\"jstore-tag h1\"><%= jStoreApp.t('Order_Making')%></h1>\r\n<%= jStoreApp.t('Order_Making_mess')%>"},function(e,t,r){var s,o;s=[r(2)],void 0===(o=function(e){var k,x;!function(o){o.kladr={},o.kladr.url="https://kladr-api.com/api.php",o.kladr.type={region:"region",district:"district",city:"city",street:"street",building:"building"};var a=null;o.kladr.api=function(e,t){!function(e,t){var r={token:"3eTazFdiiByS67btS4d7HRR5b6Z3AE8N"};e.type&&(r.contentType=e.type),e.name&&(r.query=e.name),e.parentType&&e.parentId&&(r[e.parentType+"Id"]=e.parentId),e.withParents&&(r.withParent=1),r.limit=e.limit?e.limit:2e3;var s=!1;a&&clearTimeout(a),a=setTimeout(function(){o.ajax({url:o.kladr.url,type:"get",data:r,dataType:"jsonp",success:function(e){s||(s=!0,t&&t(e.result))}}),setTimeout(function(){s||(s=!0,console.error("Request error"),t&&t([]))},5e3)},500)}(e,t)},o.kladr.check=function(e,t){e.withParents=!1,e.limit=1,o.kladr.api(e,function(e){e&&e.length?t&&t(e[0]):t&&t(!1)})}}(e),(k=e).fn.kladr=function(b,A){var w=x;return this.each(function(){var n,l,i,p,o,r,s,a,c,t,e=(n=k(this),o={token:p=i=l=null,key:null,type:null,parentType:null,parentId:null,limit:10,withParents:!1,verify:!1,showSpinner:!0,arrowSelect:!0,current:null,open:null,close:null,send:null,received:null,select:null,check:null,source:function(e,t){var r={token:p.token,key:p.token,type:p.type,name:e,parentType:p.parentType,parentId:p.parentId,withParents:p.withParents,limit:p.limit};k.kladr.api(r,t)},labelFormat:function(e,t){var r="",s=e.name.toLowerCase();t=t.toLowerCase();var o=s.indexOf(t);return o=0<o?o:0,e.typeShort&&(r+=e.typeShort+". "),t.length<e.name.length?(r+=e.name.substr(0,o),r+="<strong>"+e.name.substr(o,t.length)+"</strong>",r+=e.name.substr(o+t.length,e.name.length-t.length-o)):r+="<strong>"+e.name+"</strong>",r},valueFormat:function(e){return e.name}},r=38,s=40,a=27,c=13,t=null,function(e,t,r){if(p=n.data("kladr-options"),t!==x)return p[e]=t,n.data("kladr-options",p),n;if("string"===k.type(e))return p?p[e]:null;if(p)return n;if(p=o,"object"===k.type(e))for(var s in e)p[s]=e[s];return n.data("kladr-options",p),r&&r(),n}(b,A,function(){var t=!1;!function(){var e=k(document.getElementById("kladr_autocomplete")),t=n.attr("name");e.length||(e=k('<div id="lsp-block-kladr-autocomplete"></div>').appendTo("body")),n.attr("autocomplete","off"),(l=k('<ul class="kladr_autocomplete_'+t+'" style="display: none;"></ul>')).appendTo(e),(i=k('<div class="spinner kladr_autocomplete_'+t+'_spinner" class="spinner" style="display: none;"></div>')).appendTo(e)}(),d(),n.keyup(u),n.keydown(f),n.change(function(){t||function(){if(p.verify&&g()){var s=y(n.val());k.trim(s)&&(_(),j("send"),p.source(s,function(e){S(),j("received");for(var t=null,r=0;r<e.length;r++)if(s.toLowerCase()==e[r].name.toLowerCase()){t=e[r];break}t&&n.val(p.valueFormat(t,s)),p.current=t,n.data("kladr-options",p),j("check",p.current)}))}}()}),n.blur(function(){t||m()}),l.on("click","li, a",v),l.on("mouseenter","li",function(){var e=k(this);l.find("li.active").removeClass("active"),e.addClass("active"),j("preselect",e.find("a").data("kladr-object")),t=!0}),l.on("mouseleave","li",function(){k(this).removeClass("active"),t=!1}),k(window).resize(d)}));function d(){var e=n.offset(),t=n.outerWidth(),r=n.outerHeight();l.css({top:e.top+r+"px",left:e.left});var s=l.outerWidth()-l.width();l.width(t-s);var o=i.width(),a=i.height();i.css({top:e.top+(r-a)/2-1,left:e.left+t-o-2})}function u(e){if(!(8<e.which&&e.which<46)&&g()){var t=y(n.val());k.trim(t)?(_(),j("send"),p.source(t,function(e){S(),j("received"),n.is(":focus")&&k.trim(n.val())&&e.length?(function(e,t){l.empty();var r=[];for(var s in e){var o=e[s],a=p.valueFormat(o,t),n=p.labelFormat(o,t);if(-1===r.indexOf(n)){r.push(n);var i=k('<a data-val="'+a+'">'+n+"</a>");i.data("kladr-object",o),k("<li></li>").append(i).appendTo(l)}}}(e,t),d(),l.slideDown(50),j("open")):m()})):m()}}function m(){h(),l.hide(),j("close")}function g(){switch(p.type){case k.kladr.type.region:case k.kladr.type.district:case k.kladr.type.city:if(p.parentType&&!p.parentId)return void console.error("parentType is defined and parentId in not");break;case k.kladr.type.street:if(p.parentType!=k.kladr.type.city)return void console.error('For street parentType must equal "city"');if(!p.parentId)return void console.error("For street parentId must defined");break;case k.kladr.type.building:if(p.parentType!=k.kladr.type.street)return void console.error('For building parentType must equal "street"');if(!p.parentId)return void console.error("For building parentId must defined");break;default:return void console.error('type must defined and equal "region", "district", "city", "street" or "building"')}if(!(p.limit<1))return 1;console.error("limit must greater than 0")}function h(){var e=l.find(".active a");e.length&&(n.val(e.attr("data-val")),p.current=e.data("kladr-object"),n.data("kladr-options",p),j("select",p.current))}function f(e){var t=l.find("li.active");switch(e.which){case r:(t=t.length?(t.removeClass("active"),t.prev()):l.find("li").last()).addClass("active"),j("preselect",t.find("a").data("kladr-object")),p.arrowSelect&&h();break;case s:(t=t.length?(t.removeClass("active"),t.next()):l.find("li").first()).addClass("active"),j("preselect",t.find("a").data("kladr-object")),p.arrowSelect&&h();break;case a:t.removeClass("active"),m();break;case c:return p.arrowSelect||h(),t.removeClass("active"),m(),!1}}function v(){var e=k(this);return e.is("li")&&(e=e.find("a")),m(),n.focus(),!1}function y(e){for(var t,r,s="1234567890qazwsxedcrfvtgbyhnujmik,ol.p;[']- QAZWSXEDCRFVTGBYHNUJMIK<OL>P:{\"} ",o="",a=0;a<e.length;a++)t=e[a],-1<(r=s.indexOf(t))?o+="1234567890йфяцычувскамепинртгоьшлбщдюзжхэъ- ЙФЯЦЫЧУВСКАМЕПИНРТГОЬШЛБЩДЮЗЖХЭЪ "[r]:o+=t;return o}function j(e,t){e&&(n.trigger("kladr_"+e,t),p[e]&&p[e].call(n.get(0),t))}function _(){p.showSpinner&&(i.show(),function(){if(!t){var e=-.2;t=setInterval(function(){if(!i.is(":visible"))return clearInterval(t),void(t=null);i.css("background-position","0% "+e+"%"),95<(e+=5.555556)&&(e=-.2)},30)}}())}function S(){i.hide()}w==x&&(w=e)}),w}}.apply(t,s))||(e.exports=o)},,,function(e,t,r){var s,o;s=[r(126),r(46)],void 0===(o=function(e,t){return t.extend({templateType:"orderSuccess",templateSelectorDefault:"#lsp-template-order-success",templateDefault:e,pageName:"orderSuccess",getSeoTitle:function(){return jStoreApp.t("Order_success")},className:"lsp-block-success-order"})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<div class="jstore-tag lsp-form">\r\n    <% if (number !== null) { %>\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Order_N\')%> <%= number %></h1>\r\n    <% }else{ %>\r\n    <h1 class="jstore-tag h1"><%= jStoreApp.t(\'Order_Accepted\')%></h1>\r\n    <% } %>\r\n    <div class="jstore-tag label-row">\r\n        <%= jStoreApp.t(\'order_Added\')%>\r\n    </div>\r\n    <% if(customerName){ %>\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-block-title"><%= jStoreApp.t(\'Order_customerName\')%>:</span>\r\n        <span class="jstore-tag lsp-order-content"><%= customerName %></span>\r\n    </div>\r\n    <% } %>\r\n    <% if(customerPhone){ %>\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-block-title"><%= jStoreApp.t(\'Order_customerPhone\')%>:</span>\r\n        <span class="jstore-tag lsp-order-content"><%= customerPhone %></span>\r\n    </div>\r\n    <% } %>\r\n    <% if(addressString){ %>\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-addressString-block-title"><%= jStoreApp.t(\'Address\') %>:</span>\r\n        <span class="jstore-tag lsp-order-addressString-content"><%= addressString %></span>\r\n    </div>\r\n    <% } %>\r\n    <% if(sum){ %>\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-sum-block-title"><%= jStoreApp.t(\'Order_Sum\')%>:</span>\r\n        <span class="jstore-tag lsp-order-sum-content"><%= sum %></span>\r\n        <span class="jstore-tag lsp-order-sum-currency-content"><%= jStoreApp.getCurrency()%></span>\r\n    </div>\r\n    <% } %>\r\n    <% if(giveChange > 0){ %>\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-giveChange-block-title"><%= jStoreApp.t(\'Change_by\') %>:</span>\r\n        <span class="jstore-tag lsp-order-giveChange-content"><%= giveChange %></span>\r\n        <span class="jstore-tag lsp-order-giveChange-currency-content"><%= jStoreApp.getCurrency()%></span>\r\n    </div>\r\n    <% } %>\r\n\r\n    <% if(id){ %>\r\n        <% if(cancelTime === null && deliveryTime){ %>\r\n        <h2 class="jstore-tag lsp-order-status-title"><%= jStoreApp.t(\'Order_status_deliveryDate\') %>: <%= deliveryTime %></h2>\r\n        <% } %>\r\n\r\n        <% if(cancelTime === null){ %>\r\n\r\n            <h2 class="jstore-tag lsp-order-status-title"><%= jStoreApp.t(\'Order_Status\') %>:</h2>\r\n\r\n            <% if(showStatusTracker){ %>\r\n                <div class="jstore-tag jstore-order-status-line">\x3c!--\r\n                <% _.each(statuses, function(status){ %>\r\n                    --\x3e<div class="jstore-tag jstore-order-status-item <% if(status.status === \'active\'){ %>jstore-order-status-item-active<% } %> jstore-order-status-<%= status.status %> jstore-order-status-<%= status.id %>">\r\n                        <div class="jstore-tag jstore-order-status-item-content">\r\n                            <%= jStoreApp.t(\'Order_status_short_\' + status.id) %>\r\n                        </div>\x3c!--\r\n                        --\x3e<div class="jstore-tag jstore-order-status-item-time">\r\n                            <%= status.status === \'active\' ? (status.date ? status.date : jStoreApp.t(\'Order_status_short_Active\')) : status.date %>\r\n                        </div>\x3c!--\r\n                        --\x3e<div class="jstore-tag jstore-order-status-item-icon"></div>\x3c!--\r\n                        --\x3e<div class="jstore-tag jstore-order-status-item-icon-delivery-car"></div>\x3c!--\r\n                    --\x3e</div>\x3c!--\r\n                <% }); %>\r\n                --\x3e</div>\r\n            <% }else{\r\n                if(statusesLength > 1){\r\n                    _.each(statuses, function(status){\r\n                        if(status.date){\r\n                    %>\r\n                    <div class="jstore-tag label-row">\r\n                        <span class="jstore-tag lsp-order-status-time"><%= jStoreApp.t(\'Order_status_\' + status.id)%>: </span>\r\n                        <span class="jstore-tag lsp-order-status-text"><%= status.date %></span>\r\n                    </div>\r\n                    <%\r\n                        }\r\n                    });\r\n                } else { %>\r\n                    <div class="jstore-tag label-row">\r\n                        <span class="jstore-tag lsp-order-status-content">\r\n                            <% if (status == null) { %> <%= jStoreApp.t(\'Order_NF\')%> <%} else { %> <%= jStoreApp.t(\'Order_status_\' + status) %><% } %>\r\n                        </span>\r\n                    </div>\r\n                <% }\r\n            } %>\r\n\r\n        <div class="jstore-tag label-row lsp-label-row-button">\r\n            <a class="jstore-tag lsp-button lsp-js-submit" href="<%= urls.checkOrder %>"><%= jStoreApp.t(\'up_Status\')%></a>\r\n        </div>\r\n\r\n        <% }else{ %>\r\n\r\n        <div class="jstore-tag label-row">\r\n            <span class="jstore-tag lsp-order-status-block-title"><%= jStoreApp.t(\'Order_Status\')%>:</span>\r\n            <span class="jstore-tag lsp-order-status-content"><%= jStoreApp.t(\'Order_Status_Canceled\')%></span>\r\n        </div>\r\n\r\n        <% } %>\r\n\r\n    <% }else{ %>\r\n\r\n    <div class="jstore-tag label-row">\r\n        <span class="jstore-tag lsp-order-status-block-title"><%= jStoreApp.t(\'Order_Status\')%>:</span>\r\n        <span class="jstore-tag lsp-order-status-content">\r\n            <% if (status == null) {%> <%= jStoreApp.t(\'Order_NF\')%> <%} else { %> <%= jStoreApp.t(\'Order_status_\' + status) %> <span class="jstore-tag lsp-order-status-content-date"></span><% } %>\r\n        </span>\r\n    </div>\r\n\r\n    <% } %>\r\n</div>'},function(e,t,r){var s,o;s=[r(128),r(5)],void 0===(o=function(e,t){return t.extend({templateType:"orderError",templateSelectorDefault:"#lsp-template-order-error",templateDefault:e,pageName:"orderError",getSeoTitle:function(){return jStoreApp.t("Order_error")},className:"lsp-block-error-order",renderProcess:function(){return this.$el.empty().append(this.template({deliveryServicePhone:jStoreApp.restaurant.get("deliveryServicePhone")})),this}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports="<h1 class=\"jstore-tag h1\"><%= jStoreApp.t('Error')%></h1>\r\n<%= jStoreApp.t('order_error', {'deliveryServicePhone' : deliveryServicePhone})%>"},function(e,t,r){var s,o;s=[r(130),r(5),r(2)],void 0===(o=function(e,t,r){return t.extend({order_id:null,templateType:"orderFailPayment",templateDefault:e,templateSelectorDefault:"#lsp-template-fail-order",pageName:"orderFailPayment",setSeoData:!0,getSeoTitle:function(){return jStoreApp.t("Order_error")},className:"lsp-block-fail-order",renderProcess:function(){var e=this;return e.$el.empty(),r.ajax({url:jStoreApp.restaurant.getUrl("failOrder")+"/"+e.order_id,type:"get",data:{lang:window.jStoreAppConfig.lang},dataType:"json",success:function(){e.$el.append(e.template({number:e.order_id}))},error:function(){e.$el.append(e.template({number:null}))}}),this}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports="<div class=\"jstore-tag lsp-form\">\r\n    <h1 class=\"jstore-tag h1\"><%= jStoreApp.t('Checkout_Error')%></h1>\r\n    <%= jStoreApp.t('fail_mess', {'deliveryServicePhone' : jStoreApp.restaurant.get('deliveryServicePhone')})%>\r\n</div>"},function(e,t,r){var s,o;s=[r(2),r(3),r(31),r(132),r(134)],void 0===(o=function(e,t,r,s,o){return r.extend({template:null,templateDefault:o,templateType:"cartPage",CartItem:s,idOnInitialize:"lsp-block-cartpage",className:"lsp-block-cartpage-inner",pageName:"cart",setSeoData:!0,getSeoTitle:function(){return jStoreApp.t("Cart")}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(2),r(32),r(133)],void 0===(o=function(e,t,r){return t.extend({templateDefault:r,tagName:"tr"})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<td class="jstore-tag lsp-cartblock-image-cont"><span class="jstore-tag lsp-delete-item lsp-js-item-delete"></span><img class="jstore-tag lsp-cartblock-image lsp-js-item-show" src="<%= smallImageUrl %>" /></td>\r\n<td class="jstore-tag">\r\n    <div class="jstore-tag lsp-cartblock-title-cont">\r\n        <span class="jstore-tag lsp-js-item-show lsp-cartblock-title"><%= name %><% _.each(types, function(type){ print(\', \' + type.name); }) %></span>\r\n        <% if(discount >= (amount * price)){ %>\r\n        <span class="jstore-tag lsp-block-cart-item-discount"><%= jStoreApp.t(\'gift\')%></span>\r\n        <% }else if(discount){ %>\r\n        <span class="jstore-tag lsp-block-cart-item-discount"><%= jStoreApp.t(\'discount\')%></span>\r\n        <% } %>\r\n        <div class="jstore-tag lsp-help-info">\r\n        <% if(priceChanged){ %>\r\n        <%= jStoreApp.t(\'cart_item_price_changed\') %>\r\n        <% }else if(!active){ %>\r\n        <%= jStoreApp.t(\'cart_item_unActive\') %>\r\n        <% } %>\r\n        </div>\r\n    </div>\r\n    <div class="jstore-tag lsp-block-cart-modifiers lsp-js-cart-modifiers"></div>\r\n</td>\r\n<td class="jstore-tag lsp-cartblock-amount-cont">\x3c!--\r\n    --\x3e\x3c!--\r\n    <% if(active){ %>\r\n    --\x3e<span class="jstore-tag lsp-button-minus lsp-js-item-minus">&#8211;</span>\x3c!--\r\n    --\x3e<input class="jstore-tag lsp-block-cartblock-item-amount-c-count" name="count" value="<%= amount %>">\x3c!--\r\n    --\x3e<span class="jstore-tag lsp-button-plus lsp-js-item-plus">+</span>\x3c!--\r\n    --\x3e<em class="jstore-tag lap-block-cartblock-item-amount-c-type"><%= jStoreApp.t(useBalanceForSell ? \'amount_kg\' : \'amount\')%></em>\x3c!--\r\n    <% }else{ %>\r\n    --\x3e<span class="jstore-tag lsp-button-cross lsp-button-red lsp-js-item-delete">x</span>\x3c!--\r\n    --\x3e<em class="jstore-tag lsp-block-cartblock-item-amount-c-count"><%= amount %></em>\x3c!--\r\n    --\x3e<em class="jstore-tag lap-block-cartblock-item-amount-c-type"><%= jStoreApp.t(useBalanceForSell ? \'amount_kg\' : \'amount\')%></em>\x3c!--\r\n    <% } %>\r\n--\x3e</td>\r\n<td class="jstore-tag lsp-block-cartblock-item-price-c-count">\r\n    <span class="lsp-js-price"><%= price %></span>&nbsp;<%= jStoreApp.getCurrency()%>\r\n</td>\r\n'},function(e,t){e.exports='<h1 class="jstore-tag h1"><%= jStoreApp.t(\'Cart\')%></h1>\r\n<table class="jstore-tag lsp-block-cartpage-items">\r\n    <thead>\r\n        <tr>\r\n            <th class="jstore-tag"></th>\r\n            <th class="jstore-tag"><%= jStoreApp.t(\'Name_Structure\')%></th>\r\n            <th class="jstore-tag"><%= jStoreApp.t(\'Quantity\')%></th>\r\n            <th class="jstore-tag text-right"><%= jStoreApp.t(\'Cost\')%></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody class="jstore-tag ordered-left-block lsp-cart-items-list"></tbody>\r\n    <tfoot>\r\n        <tr>\r\n            <td class="jstore-tag" colspan="2"></td>\r\n            <td colspan="2" class="jstore-tag lsp-blockcart-total-sum">\r\n                <div class="jstore-tag jstore-cart-order-sum <%if(!(discountSum || bonusSum)){%>lsp-js-hidden<%}%>">\r\n                <%= jStoreApp.t(\'Order_Sum\')%>: <span class="jstore-tag lsp-block-cart-sum lsp-block-cart-sum-item"><span class="jstore-js-cart-order-sum-value"><%= costWithoutDiscount %></span> <%= jStoreApp.getCurrency()%></span><br>\r\n                </div>\r\n                <div class="jstore-tag jstore-cart-discount <%if(!discountSum){%>lsp-js-hidden<%}%>">\r\n                <%= jStoreApp.t(\'Discount\')%>: <span class="jstore-tag lsp-block-cart-discount lsp-block-cart-sum-item"><span class="jstore-js-cart-discount-value"><%= discountSum %></span> <%= jStoreApp.getCurrency()%></span><br>\r\n                </div>\r\n                <div class="jstore-tag jstore-cart-bonus">\r\n                <%= jStoreApp.t(\'Bonus_pay\')%>: <span class="jstore-tag lsp-block-cart-bonus lsp-block-cart-sum-item"><span class="jstore-js-cart-bonus-value"><%= bonusSum %></span> <%= jStoreApp.getCurrency()%></span><br>\r\n                </div>\r\n                <div class="jstore-tag jstore-cart-total">\r\n                    <%= jStoreApp.t(\'Total\')%>: <span class="jstore-tag lsp-block-cart-total"><span class="jstore-js-cart-total-value"><%= totalCost %></span> <%= jStoreApp.getCurrency()%></span><br>\r\n                </div>\r\n                <% if(totalItems){ %>\r\n                <div class="jstore-tag lsp-block-cart-order-button-cont"><a class="jstore-tag lsp-button" href="<%= urls.order %>"><%= jStoreApp.t(\'Make_order\')%></a></div>\r\n                <% } %>\r\n            </td>\r\n        </tr>\r\n    </tfoot>\r\n</table>\r\n'},function(e,t,r){var s,o;s=[r(5),r(2),r(3),r(136)],void 0===(o=function(e,t,r,s){"use strict";return e.extend({templateType:"pagination",templateDefault:s,el:"ul",paginationNumbers:3,pageItems:20,pageID:1,itemsCount:null,paginationUrlTemplate:null,renderProcess:function(){var e,t,r=this.paginationNumbers,s=Math.ceil(this.itemsCount/this.pageItems),o=[];for(s<this.pageID&&(this.pageID=s),o.push({class:"jstore-tag pagination-item pagination-first"+(1<this.pageID?" pagination-active":""),url:this.paginationUrlTemplate.replace(":pageID","1"),content:"<<"}),o.push({class:"jstore-tag pagination-item pagination-previous"+(1<this.pageID?" pagination-active":""),url:this.paginationUrlTemplate.replace(":pageID",""+(1<this.pageID?this.pageID-1:1)),content:"<"}),e=0<this.pageID-r?this.pageID-r:1,t=this.pageID>r?5:this.pageID;e<this.pageID;e++)o.push({class:"jstore-tag pagination-item pagination-item-number pagination-prev-id-"+t,url:this.paginationUrlTemplate.replace(":pageID",e),content:e}),t--;for(o.push({class:"jstore-tag pagination-item pagination-item-number pagination-current",content:this.pageID}),e=this.pageID+1,t=1;e<this.pageID+r+1&&e<=s;e++)o.push({class:"jstore-tag pagination-item pagination-item-number pagination-next-id-"+t,url:this.paginationUrlTemplate.replace(":pageID",e),content:e}),t++;return o.push({class:"jstore-tag pagination-item pagination-next"+(this.pageID<s?" pagination-active":""),url:this.paginationUrlTemplate.replace(":pageID",""+(this.pageID<s?this.pageID+1:s)),content:">"}),o.push({class:"jstore-tag pagination-item pagination-last"+(this.pageID<s?" pagination-active":""),url:this.paginationUrlTemplate.replace(":pageID",""+s),content:">>"}),this.$el.empty().html(this.template({items:o})),this}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<% _.each(items, function(item){\r\n%><li class="jstore-tag <%= item.class%>"><% if(item.url){ %><a class="jstore-tag" href="<%= item.url %>"><%= item.content %></a><% }else{ %><span class="jstore-tag"><%= item.content %></span><%} %></li><%\r\n}) %>'},function(e,t){e.exports='<% if(section.title && section.rootItem && window.jStoreAppConfig.h1InSection ){ %>\r\n<h1 class="jstore-tag h1"><%= section.title %></h1>\r\n<% }else if(section.title){ %>\r\n<h2 class="jstore-tag h1"><%= section.title %></h2>\r\n<% } %>\r\n<% if(section.showTags){%><% _.each(section.tags, function(tag){\r\n%><span data-id="<%= tag.translitName %>" class="jstore-tag lsp-block-tags-filter-item <%= tag.className %>" title="<%= tag.name %>">\x3c!--\r\n    --\x3e<span class="jstore-tag lsp-block-tags-filter-item-icon"></span>\x3c!--\r\n    --\x3e<span class="jstore-tag lsp-block-tags-filter-item-name"><%= tag.name %></span>\x3c!--\r\n--\x3e</span><% }); %></div>\r\n<% } %>\r\n<% if(section.showEmptyMessage){ %>\r\n<p class="jstore-tag jstore-no-offers"><%= jStoreApp.t(\'Products_not_found\')%></p>\r\n<% }else{ %>\r\n    <% if(section.subTitle){ %>\r\n    <h2 class="jstore-tag h1"><%= section.subTitle %></h2>\r\n    <% } %>\r\n    <% if(section.showDescription && section.description){ %>\r\n    <div class="jstore-tag lsp-block-section-description"><%= section.description %></div>\r\n    <% } %>\r\n    <% if(usePagination){ %>\r\n    <ul class="jstore-tag js-pagination jstore-pagination jstore-pagination-top"></ul>\r\n    <% } %>\r\n    <div class="jstore-tag lsp-block-items lsp-js-block-items"></div>\r\n    <% if(usePagination){ %>\r\n    <ul class="jstore-tag js-pagination jstore-pagination jstore-pagination-bottom"></ul>\r\n    <% } %>\r\n    <% if( section.showSeoText && section.seoText ){ %>\r\n    <div class="jstore-tag lsp-block-additional-text"><%= section.seoText %></div>\r\n    <% } %>\r\n<% } %>'},function(e,t){e.exports='<% if(!showEmptyMessage && showTags){%>\r\n<div class="jstore-tag lsp-block-tags-filter"><% _.each(tags, function(tag){\r\n    %><span data-id="<%= tag.translitName %>" class="jstore-tag lsp-block-tags-filter-item <%= tag.className %>" title="<%= tag.name %>">\x3c!--\r\n    --\x3e<span class="jstore-tag lsp-block-tags-filter-item-icon"></span>\x3c!--\r\n    --\x3e<span class="jstore-tag lsp-block-tags-filter-item-name"><%= tag.name %></span>\x3c!--\r\n--\x3e</span><% }); %></div>\r\n<% } %>\r\n<% if(showEmptyMessage){ %>\r\n<p class="jstore-tag jstore-no-offers"><%= jStoreApp.t(\'Products_not_found\')%></p>\r\n<% } %>'},function(e,t,r){var s,o;s=[r(5),r(36),r(2),r(3),r(140),r(47),r(141)],void 0===(o=function(e,s,t,r,o,a,n){return e.extend({oldView:!1,nomenclatureData:null,pageID:1,searchString:"",template:null,templateDefault:o,templateType:"searchPage",className:"jstore-page-category-search",templateSearchChild:n,pageName:"search",search:function(e){this.searchString=e,this.renderProducts(),location.hash="!/search/"+e.trim()},renderProcess:function(){this.renderTemplate({title:jStoreApp.t("Search")}),this.renderProducts()},itemsView:!1,renderProducts:function(){var e,t=jStoreApp.restaurant.documentRoot()+"#!/search"+(this.searchString?"/"+this.searchString:"")+"/page-:pageID";if(!1!==this.itemsView)return this.itemsView.searchString=this.searchString,this.itemsView.pageID=this.pageID,2!==jStoreApp.restaurant.get("paginationType")&&(this.itemsView.model=jStoreApp.dbItems.getList({searchString:this.searchString}),this.itemsView.paginationUrlTemplate=t),this.itemsView.render(),this;var r=this.$(".jstore-inner-block-categories");(e=2===jStoreApp.restaurant.get("paginationType")?new a({el:r,parentView:this,model:jStoreApp.tree,detailLink:!1,setSeoData:!1,rootSection:"",analyticsUse:!0,searchString:this.searchString,showTags:!0,tagsKey:"search"}):new s({el:r,parentView:this,model:jStoreApp.dbItems.getList({searchString:this.searchString}),usePagination:!0,paginationType:jStoreApp.restaurant.get("paginationType"),pageItems:jStoreApp.restaurant.get("pageSize"),pageID:this.pageID,detailLink:!1,setSeoData:!1,rootSection:"",analyticsUse:!0,analyticsList:jStoreApp.t("Search"),paginationUrlTemplate:t,pagination:!0,showDescription:!0,showSeoText:!0,searchPage:!0,searchString:this.searchString,showMessageIfEmpty:!0,showTags:!0,tagsKey:"search"})).render(),this.itemsView=e}})}.apply(t,s))||(e.exports=o)},function(e,t){e.exports='<% if(window.jStoreAppConfig.h1InSection ){ %>\r\n<h1 class="jstore-tag h1"><%= title %></h1>\r\n<% }else{ %>\r\n<h2 class="jstore-tag h1"><%= title %></h2>\r\n<% } %>\r\n<div class="jstore-block-search"></div>\r\n<div class="jstore-inner-block-categories"></div>'},function(e,t){e.exports='<div class="jstore-tag jstore-block-search-inner">\r\n    <form class="jstore-tag jstore-js-search-form" action="#">\r\n        <label class="jstore-tag label-row">\r\n            <span class="jstore-tag label-row-field label-row-field-search"><input name="search" class="jstore-search-input" value="<%= searchString %>"></span>\r\n        </label>\r\n        <input type="submit" class="jstore-tag lsp-button jstore-search-button" value="<%= jStoreApp.t(\'Search_btn\')%>">\r\n    </form>\r\n</div>'},function(e,t,r){var s,o;s=[r(4),r(3)],void 0===(o=function(e,s){return e.Model.extend({defaults:{name:"",iikoId:"",cities:null},initialize:function(){jStoreApp.filter.on("change:terminal_id change:terminal_default",this.checkActive,this)},checkActive:function(){var e=jStoreApp.filter.get("terminal_id")===this.get("id");this.get("active")!==e&&this.set("active",e)},hasCity:function(t){var r=!0,e=this.get("cities");return e&&(r=!1,s.each(e,function(e){t===e&&(r=!0)})),r}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;s=[r(4),r(3)],void 0===(o=function(e,r){return e.Model.extend({defaults:{name:"",translitName:"",className:"lsp-js-tag-select",active:!1,parentGroups:null},addParentGroups:function(e){var t=this.get("parentGroups");t=t||[],r.each(e,function(e){-1===t.indexOf(e)&&t.push(e)}),this.set("parentGroups",t)}})}.apply(t,s))||(e.exports=o)},function(e,t,r){var s,o;
/*!
 * jQuery-ajaxTransport-XDomainRequest - v1.0.3 - 2014-06-06
 * https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 * Copyright (c) 2014 Jason Moon (@JSONMOON)
 * Licensed MIT (/blob/master/LICENSE.txt)
 */s=[r(2)],void 0===(o=function(e){!function(i){if(!i.support.cors&&i.ajaxTransport&&window.XDomainRequest){var t=/^https?:\/\//i,o=/^get|post$/i,a=new RegExp("^"+location.protocol,"i");i.ajaxTransport("* text html xml json",function(r,s,e){if(r.crossDomain&&r.async&&o.test(r.type)&&t.test(r.url)&&a.test(r.url)){var n=null;return{send:function(e,o){var t="",a=(s.dataType||"").toLowerCase();n=new XDomainRequest,/^\d+$/.test(s.timeout)&&(n.timeout=s.timeout),n.ontimeout=function(){o(500,"timeout")},n.onload=function(){var e="Content-Length: "+n.responseText.length+"\r\nContent-Type: "+n.contentType,t={code:200,message:"success"},r={text:n.responseText};try{if("html"===a||/text\/html/i.test(n.contentType))r.html=n.responseText;else if("json"===a||"text"!==a&&/\/json/i.test(n.contentType))try{r.json=i.parseJSON(n.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===a||"text"!==a&&/\/xml/i.test(n.contentType)){var s=new ActiveXObject("Microsoft.XMLDOM");s.async=!1;try{s.loadXML(n.responseText)}catch(e){s=void 0}if(!s||!s.documentElement||s.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+n.responseText;r.xml=s}}catch(e){throw e}finally{o(t.code,t.message,r,e)}},n.onprogress=function(){},n.onerror=function(){o(500,"error",{text:n.responseText})},s.data&&(t="string"===i.type(s.data)?s.data:i.param(s.data)),n.open(r.type,r.url),n.send(t)},abort:function(){n&&n.abort()}}}})}}(e)}.apply(t,s))||(e.exports=o)}]]);